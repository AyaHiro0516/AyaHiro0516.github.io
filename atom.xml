<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AYAHIRO&#39;S BLOG</title>
  
  <subtitle>Nothing fxck you harder than time.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-08-05T10:56:20.669Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>ayahiro</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>javaæ³›å‹å½’çº³</title>
    <link href="http://yoursite.com/2019/08/05/generic/"/>
    <id>http://yoursite.com/2019/08/05/generic/</id>
    <published>2019-08-05T10:26:17.156Z</published>
    <updated>2019-08-05T10:56:20.669Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰åˆ†äº«ä¼šåšçš„æ³›å‹æ€»ç»“</p><h3 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generic</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">//keyè¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹ä¸ºT,Tçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š</span></span><br><span class="line">    <span class="keyword">private</span> T key;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Generic</span><span class="params">(T key)</span> </span>&#123; <span class="comment">//æ„é€ æ–¹æ³•å½¢å‚keyçš„ç±»å‹ä¹Ÿä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š</span></span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getKey</span><span class="params">()</span> </span>&#123; <span class="comment">//æ–¹æ³•getKeyçš„è¿”å›å€¼ç±»å‹ä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š</span></span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>&lt; &gt;é‡Œå¯ä»¥æœ‰å¤šä¸ªå‚æ•°</strong><br><a id="more"></a></p><h3 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h3><p>å®šä¹‰ä¸€ä¸ªæ³›å‹æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Generator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼ å…¥æ³›å‹å®å‚æ—¶ï¼š<br>å®šä¹‰ä¸€ä¸ªç”Ÿäº§å™¨å®ç°è¿™ä¸ªæ¥å£ï¼Œè™½ç„¶æˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªæ³›å‹æ¥å£Generator<t><br>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä¸ºTä¼ å…¥æ— æ•°ç§å®å‚ï¼Œå½¢æˆæ— æ•°ç§ç±»å‹çš„Generatoræ¥å£<br>åœ¨å®ç°ç±»å®ç°æ³›å‹æ¥å£æ—¶ï¼Œå¦‚å·²å°†æ³›å‹ç±»å‹ä¼ å…¥å®å‚ç±»å‹ï¼Œåˆ™æ‰€æœ‰ä½¿ç”¨æ³›å‹çš„åœ°æ–¹éƒ½è¦æ›¿æ¢æˆä¼ å…¥çš„å®å‚ç±»å‹</t></p><p>å³ï¼šGenerator<t>ï¼Œpublic T next();ä¸­çš„çš„Téƒ½è¦æ›¿æ¢æˆä¼ å…¥çš„Stringç±»å‹</t></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitGenerator</span> <span class="keyword">implements</span> <span class="title">Generator</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] fruits = <span class="keyword">new</span> String[]&#123;<span class="string">"Apple"</span>, <span class="string">"Banana"</span>, <span class="string">"Pear"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Random rand = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">return</span> fruits[rand.nextInt(<span class="number">3</span>)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³›å‹æ–¹æ³•"><a href="#æ³›å‹æ–¹æ³•" class="headerlink" title="æ³›å‹æ–¹æ³•"></a>æ³›å‹æ–¹æ³•</h3><p>ä¸è¦æ··æ·†è¿”å›å€¼ä¸ºæ³›å‹çš„æ–¹æ³•å’Œæ³›å‹æ–¹æ³•ï¼ŒäºŒè€…ä¸åŒ<br>ä¸€ä¸ªçœŸæ­£çš„æ³›å‹æ–¹æ³•ï¼š<br>é¦–å…ˆåœ¨publicä¸è¿”å›å€¼ä¹‹é—´çš„<t>å¿…ä¸å¯å°‘ï¼Œè¿™è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œå¹¶ä¸”å£°æ˜äº†ä¸€ä¸ªæ³›å‹T<br>è¿™ä¸ªTå¯ä»¥å‡ºç°åœ¨è¿™ä¸ªæ³›å‹æ–¹æ³•çš„ä»»æ„ä½ç½®<br>æ³›å‹çš„æ•°é‡ä¹Ÿå¯ä»¥ä¸ºä»»æ„å¤šä¸ªï¼Œå¦‚ï¼š</t></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T, K&gt; <span class="function">K <span class="title">showKeyName</span><span class="params">(Generic&lt;T&gt; container)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">showKeyName</span><span class="params">(Generic&lt;T&gt; container)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"container key :"</span> + container.getKey());</span><br><span class="line">    T test = container.getKey();</span><br><span class="line">    <span class="keyword">return</span> test;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»ä¸­ä¹Ÿå¯ä»¥æœ‰æ³›å‹æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMethod</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">        System.out.println(t.getClass().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">testMethod1</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³›å‹ç±»ä¸­çš„ç±»å‹å‚æ•°Tä¸æ³›å‹æ–¹æ³•ä¸­çš„ç±»å‹å‚æ•°Tæ˜¯æ²¡æœ‰è”ç³»çš„ï¼Œæ³›å‹æ–¹æ³•å§‹ç»ˆä»¥è‡ªå·±å®šä¹‰çš„ç±»å‹å‚æ•°ä¸ºå‡†</strong></p><p>å¦‚æœé™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›å‹çš„è¯ï¼Œå¿…é¡»å°†é™æ€æ–¹æ³•ä¹Ÿå®šä¹‰æˆæ³›å‹æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticGenerator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœåœ¨ç±»ä¸­å®šä¹‰ä½¿ç”¨æ³›å‹çš„é™æ€æ–¹æ³•ï¼Œéœ€è¦æ·»åŠ é¢å¤–çš„æ³›å‹å£°æ˜ï¼ˆå°†è¿™ä¸ªæ–¹æ³•å®šä¹‰æˆæ³›å‹æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="comment">     * å³ä½¿é™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›å‹ç±»ä¸­å·²ç»å£°æ˜è¿‡çš„æ³›å‹ä¹Ÿä¸å¯ä»¥ã€‚</span></span><br><span class="line"><span class="comment">     * å¦‚ï¼špublic static void show(T t)&#123;..&#125;,æ­¤æ—¶ç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼š</span></span><br><span class="line"><span class="comment">     * "StaticGenerator cannot be refrenced from static context"</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h3><h4 id="lt-gt"><a href="#lt-gt" class="headerlink" title="&lt;?&gt;"></a>&lt;?&gt;</h4><ul><li>è¢«ç§°ä½œæ— é™å®šçš„é€šé…ç¬¦</li><li>å½“&lt;?&gt;å­˜åœ¨æ—¶ï¼ŒCollectionå¯¹è±¡å¤±å»add( )èƒ½åŠ›</li><li>å³ä¸èƒ½è°ƒç”¨ä¸ç±»å‹æœ‰å…³çš„æ–¹æ³•</li></ul><h4 id="lt-extends-T-gt"><a href="#lt-extends-T-gt" class="headerlink" title="&lt;? extends T&gt;"></a>&lt;? extends T&gt;</h4><ul><li>è¢«ç§°ä½œæœ‰ä¸Šé™çš„é€šé…ç¬¦ï¼Œä»¥Tä¸ºä¸Šç•Œ</li><li>å¯¹åº”é›†åˆä¸§å¤±add( )èƒ½åŠ›</li><li>å¯ä»¥é€šè¿‡get( )è¿”å›å…ƒç´ ï¼Œèƒ½ç”¨Tä»¥åŠTçš„çˆ¶ç±»æ¥æ”¶</li><li>åªèƒ½è¢«Tä»¥åŠTå°±å­ç±»çš„é›†åˆèµ‹å€¼</li></ul><h4 id="lt-super-T-gt"><a href="#lt-super-T-gt" class="headerlink" title="&lt;? super T&gt;"></a>&lt;? super T&gt;</h4><ul><li>è¢«ç§°ä½œæœ‰ä¸‹é™çš„é€šé…ç¬¦ï¼Œä»¥Tä¸ºä¸‹ç•Œ</li><li>å¯¹åº”é›†åˆå¯ä»¥add( )Tä»¥åŠTçš„å­ç±»</li><li>å¯ä»¥é€šè¿‡get( )è¿”å›å…ƒç´ ï¼Œä½†åªèƒ½ç”¨Objectæ¥æ”¶</li><li>åªèƒ½è¢«Tä»¥åŠTçš„çˆ¶ç±»çš„é›†åˆèµ‹å€¼</li></ul><p><strong>æ³›å‹çš„ä¸Šä¸‹è¾¹ç•Œæ·»åŠ ï¼Œå¿…é¡»ä¸æ³›å‹çš„å£°æ˜åœ¨ä¸€èµ·</strong></p><blockquote><p>æ³›å‹çš„å£°æ˜ï¼šå³åœ¨ç±»ååçš„&lt; &gt;ï¼Œæ³›å‹æ–¹æ³•ä¿®é¥°ç¬¦å’Œè¿”å›å€¼ä¹‹é—´çš„&lt; &gt;</p></blockquote><h3 id="ç±»å‹æ“¦é™¤"><a href="#ç±»å‹æ“¦é™¤" class="headerlink" title="ç±»å‹æ“¦é™¤"></a>ç±»å‹æ“¦é™¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; l1 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">List&lt;Integer&gt; l2 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">System.out.println(l1.getClass()==l2.getClass()); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><blockquote><p>ç±»å‹æ“¦é™¤ï¼šæ³›å‹ä¿¡æ¯åªå­˜åœ¨äºä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥ JVM ä¹‹å‰ï¼Œä¸æ³›å‹ç›¸å…³çš„ä¿¡æ¯ä¼šè¢«æ“¦é™¤æ‰</p></blockquote><p>åœ¨æ³›å‹ç±»è¢«ç±»å‹æ“¦é™¤çš„æ—¶å€™ï¼Œä¹‹å‰æ³›å‹ç±»ä¸­çš„ç±»å‹å‚æ•°éƒ¨åˆ†å¦‚æœæ²¡æœ‰æŒ‡å®šä¸Šé™ï¼Œå¦‚ <t> åˆ™ä¼šè¢«è½¬è¯‘æˆæ™®é€šçš„ Object ç±»å‹ï¼Œå¦‚æœæŒ‡å®šäº†ä¸Šé™å¦‚ <t extends string> åˆ™ç±»å‹å‚æ•°å°±è¢«æ›¿æ¢æˆç±»å‹ä¸Šé™Stringï¼Œå¹¶ä¸å­˜åœ¨<t super string>çš„å†™æ³•</t></t></t></p><p>List<t> ä¸€æ—¦ä¼ å…¥ç±»å‹å‚æ•°  List<integer>    å°±ä¸èƒ½add(string)äº†ï¼Œä½†åŸºäºå¯¹ç±»å‹æ“¦é™¤çš„äº†è§£ï¼Œå…¶å®Téƒ½æ˜¯Objectï¼Œå¯ä»¥åˆ©ç”¨åå°„ç»•å¼€è¿™ä¸ªé™åˆ¶</integer></t></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»å‹æ“¦é™¤åï¼Œadd()æ–¹æ³•ç­‰åŒäº boolean add(Object obj);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; ls = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">ls.add(<span class="number">23</span>);</span><br><span class="line"><span class="comment">//ls.add("text");</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Method method = ls.getClass().getDeclaredMethod(<span class="string">"add"</span>, Object.class);</span><br><span class="line">    method.invoke(ls, <span class="string">"test"</span>);</span><br><span class="line">    method.invoke(ls, <span class="number">42.9f</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆ©ç”¨ç±»å‹æ“¦é™¤çš„åŸç†ï¼Œç”¨åå°„çš„æ‰‹æ®µå°±ç»•è¿‡äº†æ­£å¸¸å¼€å‘ä¸­ç¼–è¯‘å™¨ä¸å…è®¸çš„æ“ä½œé™åˆ¶</p><p>å‚è€ƒèµ„æ–™ï¼š<br><a href="https://blog.csdn.net/s10461/article/details/53941091" target="_blank" rel="noopener">https://blog.csdn.net/s10461/article/details/53941091</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰åˆ†äº«ä¼šåšçš„æ³›å‹æ€»ç»“&lt;/p&gt;
&lt;h3 id=&quot;æ³›å‹ç±»&quot;&gt;&lt;a href=&quot;#æ³›å‹ç±»&quot; class=&quot;headerlink&quot; title=&quot;æ³›å‹ç±»&quot;&gt;&lt;/a&gt;æ³›å‹ç±»&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Generic&lt;/span&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//keyè¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹ä¸ºT,Tçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; T key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Generic&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(T key)&lt;/span&gt; &lt;/span&gt;&amp;#123; &lt;span class=&quot;comment&quot;&gt;//æ„é€ æ–¹æ³•å½¢å‚keyçš„ç±»å‹ä¹Ÿä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.key = key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; T &lt;span class=&quot;title&quot;&gt;getKey&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123; &lt;span class=&quot;comment&quot;&gt;//æ–¹æ³•getKeyçš„è¿”å›å€¼ç±»å‹ä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;&amp;lt; &amp;gt;é‡Œå¯ä»¥æœ‰å¤šä¸ªå‚æ•°&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Basic" scheme="http://yoursite.com/tags/Basic/"/>
    
  </entry>
  
  <entry>
    <title>javaé›†åˆç±»å½’çº³</title>
    <link href="http://yoursite.com/2019/07/31/collection-map/"/>
    <id>http://yoursite.com/2019/07/31/collection-map/</id>
    <published>2019-07-30T17:21:53.058Z</published>
    <updated>2019-07-30T18:58:10.366Z</updated>
    
    <content type="html"><![CDATA[<p>ç²—ç•¥çœ‹äº†ä¸‹é›†åˆç±»çš„å¸¸ç”¨ç±»ï¼Œæ²¡è€å¿ƒçœ‹æºç ï¼Œçœ‹äº†åˆ°é¢è¯•é‚£ä¼šä¹Ÿå¿˜äº†ï¼Œå°±ç®€å•è®°å½•ä¸‹å„ä¸ªç±»çš„åŸºæœ¬ç‰¹ç‚¹å§(æ‘¸é±¼çœŸçˆ½)</p><p>å…ˆæ¥å¼ æ¶æ„å›¾æ’‘ä¸‹åœºé¢ï¼Œå¥½çœ‹çš„<br><img src="/2019/07/31/collection-map/Collectionæ¶æ„.jpg" alt="Collectionæ¶æ„"></p><a id="more"></a><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>æ¥å£ç‰¹æ€§ï¼šæœ‰åºçš„ï¼Œå…ƒç´ å¯é‡å¤ï¼Œå…è®¸å…ƒç´ ä¸ºnull</p><h4 id="ArrayList-ğŸ”¥"><a href="#ArrayList-ğŸ”¥" class="headerlink" title="ArrayList ğŸ”¥"></a>ArrayList ğŸ”¥</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>æ•°ç»„</strong>ï¼Œåˆå§‹å®¹é‡ä¸º10ï¼Œæ¯æ¬¡æ‰©å®¹1.5å€</li><li>åœ¨å¢åˆ æ—¶ï¼Œç”¨çš„æ˜¯æ•°ç»„å¤åˆ¶System.arraycopyæ–¹æ³•ï¼Œæ˜¯nativeæ–¹æ³•ï¼Œæ•ˆç‡ä¸é”™</li><li>é€‚åˆéšæœºæŸ¥æ‰¾å’Œéå†ï¼Œä¸é€‚åˆæ’å…¥å’Œåˆ é™¤</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="LinkedList-ğŸ”¥"><a href="#LinkedList-ğŸ”¥" class="headerlink" title="LinkedList ğŸ”¥"></a>LinkedList ğŸ”¥</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>åŒå‘é“¾è¡¨</strong></li><li>å®ç°Dequeæ¥å£ï¼Œå¯ä»¥åƒæ ˆå’Œé˜Ÿåˆ—æ“ä½œå®ƒ</li><li>é€‚åˆæ’å…¥å’Œåˆ é™¤ï¼Œä¸é€‚åˆæŸ¥æ‰¾</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>æ•°ç»„</strong>ï¼Œåˆå§‹å®¹é‡ä¸º10ï¼Œæ¯æ¬¡æ‰©å®¹2å€</li><li>çº¿ç¨‹å®‰å…¨ï¼Œä½†ä¸æ¨èï¼Œå¯ä»¥ä½¿ç”¨List list = Collections.synchronizedList(new ArrayList(â€¦));</li></ul><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>å­˜å‚¨key-valueé”®å€¼å¯¹ï¼Œæ²¡æœ‰å®ç°Collectionæ¥å£</p><h4 id="HashMap-ğŸ”¥"><a href="#HashMap-ğŸ”¥" class="headerlink" title="HashMap ğŸ”¥"></a>HashMap ğŸ”¥</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>æ•£åˆ—è¡¨+çº¢é»‘æ ‘</strong>ï¼Œåˆå§‹å®¹é‡ä¸º16ï¼Œè£…è½½å› å­0.75ï¼Œæ¯æ¬¡æ‰©å®¹2å€</li><li>keyä¸å¯é‡å¤ï¼Œå…è®¸keyå’Œvalueä¸ºnull</li><li>å­˜å‚¨æ— åº</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>æ•£åˆ—è¡¨+çº¢é»‘æ ‘+åŒå‘é“¾è¡¨</strong>ï¼Œçˆ¶ç±»æ˜¯HashMap</li><li>å…è®¸keyå’Œvalueä¸ºnull</li><li>æ’å…¥æœ‰åº</li><li>æä¾›ä¸¤ç§éå†é¡ºåºï¼Œè®¿é—®é¡ºåºå’Œæ’å…¥é¡ºåºï¼ˆé»˜è®¤ï¼‰</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="TreeMap-ğŸ”¥"><a href="#TreeMap-ğŸ”¥" class="headerlink" title="TreeMap ğŸ”¥"></a>TreeMap ğŸ”¥</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>çº¢é»‘æ ‘</strong></li><li>ä¸å…è®¸keyä¸ºnull</li><li>ä½¿ç”¨Comparator/Comparableå®ç°æ’åº</li><li>å¯ä»¥æ ¹æ®keyè¿›è¡Œæ’åºï¼Œé»˜è®¤ä½¿ç”¨keyçš„è‡ªç„¶æ’åº</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a>Hashtable</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>æ•£åˆ—è¡¨</strong></li><li>ä¸å…è®¸keyæˆ–valueä¸ºnull</li><li>çº¿ç¨‹å®‰å…¨ï¼Œä½†æ•ˆç‡ä½ï¼Œå·²è¿‡æ—¶</li></ul><h4 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>æ•£åˆ—è¡¨+çº¢é»‘æ ‘</strong></li><li>keyå’Œvalueéƒ½ä¸èƒ½ä¸ºnull</li><li>ä½¿ç”¨é”åˆ†æ®µæŠ€æœ¯ä¿è¯çº¿ç¨‹å®‰å…¨</li></ul><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>Setæ¥å£ç‰¹æ€§ï¼šä¸å…è®¸é‡å¤çš„æ•°æ®ã€‚æ£€ç´¢æ•ˆç‡ä½ä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜</p><h4 id="HashSet-ğŸ”¥"><a href="#HashSet-ğŸ”¥" class="headerlink" title="HashSet ğŸ”¥"></a>HashSet ğŸ”¥</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>å“ˆå¸Œè¡¨+çº¢é»‘æ ‘</strong></li><li>æ— åº</li><li>æ•°æ®å¯ä¸ºnull</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>çº¢é»‘æ ‘</strong></li><li>æœ‰åºï¼Œå¯å®ç°æ’åºåŠŸèƒ½</li><li>æ•°æ®ä¸å¯ä¸ºnull</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><h4 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h4><ul><li>åº•å±‚ç»“æ„æ˜¯<strong>å“ˆå¸Œè¡¨+åŒå‘é“¾è¡¨</strong>ï¼Œçˆ¶ç±»æ˜¯HashSet</li><li>æ— åº</li><li>æ•°æ®å¯ä¸ºnull</li><li>å†™å…¥æ¯”HashSetå¼ºï¼Œæ–°å¢å’Œåˆ é™¤æ¯”HashSetå·®</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><p>å‚è€ƒé“¾æ¥</p><ul><li><p><a href="https://www.jianshu.com/p/0d5d18ee7905" target="_blank" rel="noopener">https://www.jianshu.com/p/0d5d18ee7905</a></p></li><li><p><a href="https://blog.csdn.net/qazwsxpcm/article/details/79703898" target="_blank" rel="noopener">https://blog.csdn.net/qazwsxpcm/article/details/79703898</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç²—ç•¥çœ‹äº†ä¸‹é›†åˆç±»çš„å¸¸ç”¨ç±»ï¼Œæ²¡è€å¿ƒçœ‹æºç ï¼Œçœ‹äº†åˆ°é¢è¯•é‚£ä¼šä¹Ÿå¿˜äº†ï¼Œå°±ç®€å•è®°å½•ä¸‹å„ä¸ªç±»çš„åŸºæœ¬ç‰¹ç‚¹å§(æ‘¸é±¼çœŸçˆ½)&lt;/p&gt;
&lt;p&gt;å…ˆæ¥å¼ æ¶æ„å›¾æ’‘ä¸‹åœºé¢ï¼Œå¥½çœ‹çš„&lt;br&gt;&lt;img src=&quot;/2019/07/31/collection-map/Collectionæ¶æ„.jpg&quot; alt=&quot;Collectionæ¶æ„&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Basic" scheme="http://yoursite.com/tags/Basic/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/27/state-memento-observer/"/>
    <id>http://yoursite.com/2019/07/27/state-memento-observer/</id>
    <published>2019-07-27T06:03:52.401Z</published>
    <updated>2019-07-28T12:07:31.879Z</updated>
    
    <content type="html"><![CDATA[<p>è¿˜å‰©ä¸‹æœ€å3ä¸ªæ¨¡å¼äº†ï¼Œå­¦å®Œäº†ä¹‹åè®¾è®¡æ¨¡å¼çš„ç¬”è®°å°±å‘Šä¸€æ®µè½äº†ã€‚ä¸å…¶è¯´æ˜¯â€œå†™â€åšå®¢ï¼Œä¸å¦‚è¯´æ˜¯è®°å½•ç¬”è®°ï¼Œå­¦å®Œä¸€éè®¾è®¡æ¨¡å¼ï¼Œ<br>çŸ¥é“å„ä¸ªæ¨¡å¼å¤§æ¦‚ä»€ä¹ˆæ ·å­ï¼Œä»¥åç¢°åˆ°äº†å†å›æ¥ç¿»ç¿»ç¬”è®°ï¼Œå°±å¾ˆèˆ’æœã€‚å¤‡æˆ˜æ˜¥æ‹›çš„æ—¶å€™å†æ¥äºŒåˆ·å§ã€‚</p><h3 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h3><p><strong>æè¿°ï¼šè®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚çŠ¶æ€æ¨¡å¼éœ€è¦å¯¹æ¯ä¸€ä¸ªç³»ç»Ÿå¯èƒ½è·å–çš„çŠ¶æ€åˆ›ç«‹ä¸€ä¸ªçŠ¶æ€ç±»çš„å­ç±»ã€‚å½“ç³»ç»Ÿçš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¾¿æ”¹å˜æ‰€é€‰çš„å­ç±»ã€‚</strong></p><p><img src="/2019/07/27/state-memento-observer/çŠ¶æ€æ¨¡å¼.png" alt="çŠ¶æ€æ¨¡å¼"><br><a id="more"></a></p><p>ä»€ä¹ˆæ—¶å€™ç”¨çŠ¶æ€æ¨¡å¼ï¼Ÿ<br>å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ï¼Œå°±è€ƒè™‘ç”¨çŠ¶æ€æ¨¡å¼ã€‚çŠ¶æ€æ¨¡å¼ä¸»è¦è§£å†³çš„æ˜¯å½“æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çŠ¶æ€è½¬æ¢çš„æ¡ä»¶è¡¨è¾¾å¼è¿‡äºå¤æ‚çš„æƒ…å†µã€‚æŠŠçŠ¶æ€çš„åˆ¤æ–­é€»è¾‘è½¬ç§»åˆ°è¡¨ç¤ºä¸åŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç±»ä¸­ï¼Œå¯ä»¥æŠŠå¤æ‚çš„åˆ¤æ–­é€»è¾‘ç®€åŒ–ã€‚</p><p>çŠ¶æ€æ¨¡å¼çš„3ä¸ªè§’è‰²</p><ul><li><p>Contextï¼ˆç¯å¢ƒè§’è‰²ï¼‰: å®ƒå®šä¹‰äº†å®¢æˆ·ç¨‹åºéœ€è¦çš„æ¥å£å¹¶ç»´æŠ¤ä¸€ä¸ªå…·ä½“çŠ¶æ€è§’è‰²çš„å®ä¾‹ï¼Œå°†ä¸çŠ¶æ€ç›¸å…³çš„æ“ä½œå§”æ‰˜ç»™å½“å‰çš„å…·ä½“çŠ¶æ€å¯¹è±¡æ¥å¤„ç†ã€‚</p></li><li><p>Stateï¼ˆæŠ½è±¡çŠ¶æ€ï¼‰: å®šä¹‰ä¸€ä¸ªæ¥å£ä»¥å°è£…ä½¿ç”¨ä¸Šä¸‹æ–‡ç¯å¢ƒçš„çš„ä¸€ä¸ªç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºã€‚</p></li><li><p>ConcreteStateï¼ˆå…·ä½“çŠ¶æ€ï¼‰:å®ç°æŠ½è±¡çŠ¶æ€å®šä¹‰çš„æ¥å£ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//State</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Period</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">(MealTime mealTime)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteState</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Morning</span> <span class="keyword">extends</span> <span class="title">Period</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(MealTime mealTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mealTime.hour &gt; <span class="number">6</span> &amp;&amp; mealTime.hour &lt;= <span class="number">9</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç°åœ¨æ˜¯æ—©ä¸Šï¼Œå¯ä»¥åƒåŒ…å­å–è±†æµ†"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mealTime.setCurrent(<span class="keyword">new</span> Noon());</span><br><span class="line">            mealTime.eat();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Noon</span> <span class="keyword">extends</span> <span class="title">Period</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(MealTime mealTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mealTime.hour &gt; <span class="number">9</span> &amp;&amp; mealTime.hour &lt;= <span class="number">13</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"å¿«åˆ°ä¸­åˆäº†ï¼Œå¯ä»¥åƒå¤§ç¢—å®½é¢"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mealTime.setCurrent(<span class="keyword">new</span> Afternoon());</span><br><span class="line">            mealTime.eat();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Afternoon</span> <span class="keyword">extends</span> <span class="title">Period</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(MealTime mealTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mealTime.hour &gt; <span class="number">13</span> &amp;&amp; mealTime.hour &lt;= <span class="number">17</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç°åœ¨æ˜¯ä¸‹åˆï¼Œç»™é˜¿å§¨å€’æ¯å¡å¸ƒå¥‡è¯º"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mealTime.setCurrent(<span class="keyword">new</span> Evening());</span><br><span class="line">            mealTime.eat();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Evening</span> <span class="keyword">extends</span> <span class="title">Period</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(MealTime mealTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mealTime.hour &gt; <span class="number">17</span> &amp;&amp; mealTime.hour &lt;= <span class="number">22</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç°åœ¨æ˜¯æ™šä¸Šï¼Œå¯ä»¥åƒè‘±æ²¹æ‹Œé¢"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"æƒ³åƒå¤œå®µï¼Ÿä¸æ€•é•¿è†˜ï¼Ÿ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Context</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MealTime</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Period current;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">double</span> hour;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MealTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        current = <span class="keyword">new</span> Morning();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrent</span><span class="params">(Period current)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.current = current;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getHour</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHour</span><span class="params">(<span class="keyword">double</span> hour)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hour = hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        current.eat(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MealTime mealTime = <span class="keyword">new</span> MealTime();</span><br><span class="line">        mealTime.setHour(<span class="number">7</span>);</span><br><span class="line">        mealTime.eat();</span><br><span class="line">        mealTime.setHour(<span class="number">10</span>);</span><br><span class="line">        mealTime.eat();</span><br><span class="line">        mealTime.setHour(<span class="number">15</span>);</span><br><span class="line">        mealTime.eat();</span><br><span class="line">        mealTime.setHour(<span class="number">18</span>);</span><br><span class="line">        mealTime.eat();</span><br><span class="line">        mealTime.setHour(<span class="number">23</span>);</span><br><span class="line">        mealTime.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯åªæ›´æ”¹äº†çŠ¶æ€çš„æŸä¸€å‚æ•°ï¼Œå°±æœ‰ä¸åŒçš„è¡Œä¸ºã€‚è°ƒç”¨å…·ä½“æ–¹æ³•eat()çš„æ—¶å€™ï¼Œæ˜¯çœ‹ä¸åˆ°æœ‰é€‰æ‹©çš„è¿‡ç¨‹çš„ï¼Œé¿å…äº†å¤§é‡çš„if elseåˆ¤æ–­ã€‚</p><p>çŠ¶æ€æ¨¡å¼çš„å¥½å¤„<br>å°†ä¸ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºå±€éƒ¨åŒ–ï¼Œå¹¶ä¸”å°†ä¸åŒçŠ¶æ€çš„è¡Œä¸ºåˆ†å‰²å¼€ã€‚å¯ä»¥æ¶ˆé™¤åºå¤§çš„åˆ†æ”¯è¯­å¥ï¼Œé€šè¿‡å®šä¹‰æ–°çš„å­ç±»å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚</p><h3 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h3><p><strong>æè¿°ï¼šå¤‡å¿˜å½•å¯¹è±¡æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨å¦å¤–ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çŠ¶æ€çš„å¿«ç…§çš„å¯¹è±¡ã€‚å¤‡å¿˜å½•æ¨¡å¼çš„ç”¨æ„æ˜¯åœ¨ä¸ç ´åå°è£…çš„æ¡ä»¶ä¸‹ï¼Œå°†ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ‰ä½ï¼Œå¹¶å¤–éƒ¨åŒ–ï¼Œå­˜å‚¨èµ·æ¥ï¼Œä»è€Œå¯ä»¥åœ¨å°†æ¥åˆé€‚çš„æ—¶å€™æŠŠè¿™ä¸ªå¯¹è±¡è¿˜åŸåˆ°å­˜å‚¨èµ·æ¥çš„çŠ¶æ€ã€‚</strong></p><p><img src="/2019/07/27/state-memento-observer/å¤‡å¿˜å½•æ¨¡å¼.png" alt="å¤‡å¿˜å½•æ¨¡å¼"></p><p>ä»€ä¹ˆæ—¶å€™ç”¨å¤‡å¿˜å½•æ¨¡å¼ï¼Ÿ<br>å¤‡å¿˜å½•æ¨¡å¼é€‚ç”¨äºåŠŸèƒ½æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†éœ€è¦ç»´æŠ¤æˆ–è®°å½•å±æ€§å†å²çš„ç±»ï¼Œæˆ–è€…éœ€è¦ä¿å­˜çš„å±æ€§åªæ˜¯ä¼—å¤šå±æ€§çš„å°éƒ¨åˆ†æ—¶ã€‚</p><p>tips: åœ¨æŸä¸ªç³»ç»Ÿä½¿ç”¨å‘½ä»¤æ¨¡å¼æ—¶ï¼Œéœ€è¦å®ç°å‘½ä»¤çš„æ’¤é”€åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼æ¥å­˜å‚¨å¯æ’¤é”€æ“ä½œçš„çŠ¶æ€</p><p>å¤‡å¿˜å½•æ¨¡å¼çš„3ä¸ªè§’è‰²</p><ul><li><p>Originatorï¼ˆåŸå‘å™¨ï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå¤‡å¿˜å½•ï¼Œå¹¶å­˜å‚¨å®ƒçš„å½“å‰å†…éƒ¨çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¥æ¢å¤å…¶å†…éƒ¨çŠ¶æ€ï¼Œä¸€èˆ¬å°†éœ€è¦ä¿å­˜å†…éƒ¨çŠ¶æ€çš„ç±»è®¾è®¡ä¸ºåŸå‘å™¨ã€‚</p></li><li><p>Mementoï¼ˆå¤‡å¿˜å½•)ï¼šå­˜å‚¨åŸå‘å™¨çš„å†…éƒ¨çŠ¶æ€ï¼Œæ ¹æ®åŸå‘å™¨æ¥å†³å®šä¿å­˜å“ªäº›å†…éƒ¨çŠ¶æ€ã€‚å¤‡å¿˜å½•çš„è®¾è®¡ä¸€èˆ¬å¯ä»¥å‚è€ƒåŸå‘å™¨çš„è®¾è®¡ï¼Œæ ¹æ®å®é™…éœ€è¦ç¡®å®šå¤‡å¿˜å½•ç±»ä¸­çš„å±æ€§ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>é™¤äº†åŸå‘å™¨æœ¬èº«ä¸è´Ÿè´£äººç±»ä¹‹å¤–ï¼Œå¤‡å¿˜å½•å¯¹è±¡ä¸èƒ½ç›´æ¥ä¾›å…¶ä»–ç±»ä½¿ç”¨</strong>ï¼ŒåŸå‘å™¨çš„è®¾è®¡åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­å®ç°æœºåˆ¶ä¼šæœ‰æ‰€ä¸åŒã€‚</p></li><li><p>Caretakerï¼ˆè´Ÿè´£äººï¼‰ï¼šè´Ÿè´£äººåˆç§°ä¸ºç®¡ç†è€…ï¼Œå®ƒè´Ÿè´£ä¿å­˜å¤‡å¿˜å½•ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å¤‡å¿˜å½•çš„å†…å®¹è¿›è¡Œæ“ä½œæˆ–æ£€æŸ¥ã€‚åœ¨è´Ÿè´£äººç±»ä¸­å¯ä»¥å­˜å‚¨ä¸€ä¸ªæˆ–å¤šä¸ªå¤‡å¿˜å½•å¯¹è±¡ï¼Œå®ƒåªè´Ÿè´£å­˜å‚¨å¯¹è±¡ï¼Œè€Œä¸èƒ½ä¿®æ”¹å¯¹è±¡ï¼Œä¹Ÿæ— é¡»çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚ã€‚</p></li></ul><p>å¤‡å¿˜å½•æ¨¡å¼çš„æ ¸å¿ƒæ˜¯å¤‡å¿˜å½•ç±»ä»¥åŠç”¨äºç®¡ç†å¤‡å¿˜å½•çš„è´Ÿè´£äººç±»çš„è®¾è®¡ã€‚</p><p>ç”¨å¤‡å¿˜å½•æ¨¡å¼æ¨¡æ‹Ÿä¸‹æ£‹æ—¶çš„æ‚”æ£‹æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Originator</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chessman</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String label;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chessman</span><span class="params">(String label, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.label = label;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿å­˜çŠ¶æ€</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChessmanMemento <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ChessmanMemento(label, x, y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¢å¤çŠ¶æ€</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restore</span><span class="params">(ChessmanMemento memento)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.label = memento.getLabel();</span><br><span class="line">        <span class="keyword">this</span>.x = memento.getX();</span><br><span class="line">        <span class="keyword">this</span>.y = memento.getY();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"æ£‹å­&lt;%s&gt;ï¼šå½“å‰ä½ç½®ä¸ºï¼š&lt;%d, %d&gt;"</span>, label, x, y));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Memento</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChessmanMemento</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String label;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChessmanMemento</span><span class="params">(String label, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.label = label;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLabel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> label;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getY</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Caretaker</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MementoCaretaker</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ChessmanMemento memento;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ChessmanMemento <span class="title">getMemento</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> memento;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMemento</span><span class="params">(ChessmanMemento memento)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.memento = memento;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Memento</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Chessman chessman = <span class="keyword">new</span> Chessman(<span class="string">"é»‘å­"</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        chessman.show();</span><br><span class="line"></span><br><span class="line">        MementoCaretaker caretaker = <span class="keyword">new</span> MementoCaretaker();</span><br><span class="line">        caretaker.setMemento(chessman.save());</span><br><span class="line"></span><br><span class="line">        chessman.setPosition(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">        chessman.show();</span><br><span class="line"></span><br><span class="line">        chessman.restore(caretaker.getMemento());</span><br><span class="line">        chessman.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><p><strong>æè¿°ï¼šåœ¨å¯¹è±¡é—´å®šä¹‰ä¸€ä¸ªä¸€å¯¹å¤šçš„è”ç³»æ€§ï¼Œç”±æ­¤å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†çŠ¶æ€ï¼Œæ‰€æœ‰å…¶ä»–ç›¸å…³çš„å¯¹è±¡ä¼šè¢«é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨åˆ·æ–°ã€‚</strong></p><p><img src="/2019/07/27/state-memento-observer/è§‚å¯Ÿè€…æ¨¡å¼.png" alt="è§‚å¯Ÿè€…æ¨¡å¼"></p><p>è§‚å¯Ÿè€…æ¨¡å¼çš„åŠ¨æœº<br>å°†ä¸€ä¸ªç³»ç»Ÿåˆ†å‰²æˆä¸€ç³»åˆ—ç›¸äº’åä½œçš„ç±»æœ‰å¾ˆä¸å¥½çš„å‰¯ä½œç”¨ï¼Œå³éœ€è¦ç»´æŠ¤ç›¸å…³å¯¹è±¡é—´çš„ä¸€è‡´æ€§ã€‚æˆ‘ä»¬ä¸å¸Œæœ›ä¸ºäº†ç»´æŒä¸€è‡´æ€§è€Œä½¿å„ç±»ç´§å¯†è€¦åˆï¼Œè¿™æ ·ä¼šç»™ç»´æŠ¤ï¼Œæ‰©å±•å’Œé‡ç”¨éƒ½å¸¦æ¥ä¸ä¾¿ã€‚è€Œè§‚å¯Ÿè€…æ¨¡å¼çš„å…³é”®å¯¹è±¡æ˜¯Subjectå’ŒObserverï¼Œä¸€ä¸ªSubjectå¯ä»¥æœ‰ä»»æ„æ•°ç›®ä¾èµ–å®ƒçš„Observerï¼Œä¸€æ—¦Subjectçš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰çš„Observeréƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚Subjectå‘å‡ºé€šçŸ¥æ—¶ä¸éœ€è¦çŸ¥é“å®ƒçš„è§‚å¯Ÿè€…æ˜¯è°ï¼Œä»»ä½•ä¸€ä¸ªå…·ä½“è§‚å¯Ÿè€…ä¹Ÿä¸éœ€è¦çŸ¥é“å…¶ä»–è§‚å¯Ÿè€…å­˜åœ¨ã€‚</p><p>ä»€ä¹ˆæ—¶å€™ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ<br>å½“ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶ä»–å¯¹è±¡ï¼Œä¸”ä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡æœ‰å¾…æ”¹å˜æ—¶ï¼›ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€æ–¹é¢ä¾èµ–äºå¦å¤–ä¸€æ–¹é¢ï¼Œè¿™æ—¶ç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å°†è¿™ä¸¤è€…å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å„è‡ªç‹¬ç«‹æ”¹å˜å’Œå¤ç”¨ã€‚</p><p>è§‚å¯Ÿè€…æ¨¡å¼çš„4ä¸ªè§’è‰²  </p><ul><li><p>Subjectï¼ˆç›®æ ‡ï¼‰ï¼šç›®æ ‡åˆç§°ä¸ºä¸»é¢˜ï¼Œå®ƒæ˜¯æŒ‡è¢«è§‚å¯Ÿçš„å¯¹è±¡ã€‚åœ¨ç›®æ ‡ä¸­å®šä¹‰äº†ä¸€ä¸ªè§‚å¯Ÿè€…é›†åˆï¼Œä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„è§‚å¯Ÿè€…æ¥è§‚å¯Ÿï¼Œå®ƒæä¾›ä¸€ç³»åˆ—æ–¹æ³•æ¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ï¼ŒåŒæ—¶å®ƒå®šä¹‰äº†é€šçŸ¥æ–¹æ³•notify()ã€‚ç›®æ ‡ç±»å¯ä»¥æ˜¯æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–å…·ä½“ç±»ã€‚</p></li><li><p>ConcreteSubjectï¼ˆå…·ä½“ç›®æ ‡ï¼‰ï¼šå…·ä½“ç›®æ ‡æ˜¯ç›®æ ‡ç±»çš„å­ç±»ï¼Œé€šå¸¸å®ƒåŒ…å«æœ‰ç»å¸¸å‘ç”Ÿæ”¹å˜çš„æ•°æ®ï¼Œå½“å®ƒçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå‘å®ƒçš„å„ä¸ªè§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ï¼›åŒæ—¶å®ƒè¿˜å®ç°äº†åœ¨ç›®æ ‡ç±»ä¸­å®šä¹‰çš„æŠ½è±¡ä¸šåŠ¡é€»è¾‘æ–¹æ³•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚å¦‚æœæ— é¡»æ‰©å±•ç›®æ ‡ç±»ï¼Œåˆ™å…·ä½“ç›®æ ‡ç±»å¯ä»¥çœç•¥ã€‚</p></li><li><p>Observerï¼ˆè§‚å¯Ÿè€…ï¼‰ï¼šè§‚å¯Ÿè€…å°†å¯¹è§‚å¯Ÿç›®æ ‡çš„æ”¹å˜åšå‡ºååº”ï¼Œè§‚å¯Ÿè€…ä¸€èˆ¬å®šä¹‰ä¸ºæ¥å£ï¼Œè¯¥æ¥å£å£°æ˜äº†æ›´æ–°æ•°æ®çš„æ–¹æ³•update()ï¼Œå› æ­¤åˆç§°ä¸ºæŠ½è±¡è§‚å¯Ÿè€…ã€‚</p></li><li><p>ConcreteObserverï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰ï¼šåœ¨å…·ä½“è§‚å¯Ÿè€…ä¸­ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘å…·ä½“ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒå­˜å‚¨å…·ä½“è§‚å¯Ÿè€…çš„æœ‰å…³çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€éœ€è¦å’Œå…·ä½“ç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´ï¼›å®ƒå®ç°äº†åœ¨æŠ½è±¡è§‚å¯Ÿè€…Observerä¸­å®šä¹‰çš„update()æ–¹æ³•ã€‚é€šå¸¸åœ¨å®ç°æ—¶ï¼Œå¯ä»¥è°ƒç”¨å…·ä½“ç›®æ ‡ç±»çš„attach()æ–¹æ³•å°†è‡ªå·±æ·»åŠ åˆ°ç›®æ ‡ç±»çš„é›†åˆä¸­æˆ–é€šè¿‡detach()æ–¹æ³•å°†è‡ªå·±ä»ç›®æ ‡ç±»çš„é›†åˆä¸­åˆ é™¤ã€‚</p></li></ul><p>ä¸¾ä¸ªå¾®ä¿¡å…¬ä¼—å·æ¨é€çš„ä¾‹å­ï¼Œéå¸¸å¥‘åˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Observer</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subscriber</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">receive</span><span class="params">(String publisher, String articleName)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteObserver</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeChatClient</span> <span class="keyword">implements</span> <span class="title">Subscriber</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeChatClient</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(String publisher, String articleName)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"ç”¨æˆ·&lt;%s&gt; æ¥æ”¶åˆ° &lt;%s&gt;å¾®ä¿¡å…¬ä¼—å· çš„æ¨é€ï¼Œæ–‡ç« æ ‡é¢˜ä¸º &lt;%s&gt;"</span>, username, publisher, articleName));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Subject</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Subscriber&gt; subscribers;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> pubStatus = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Publisher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        subscribers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(Subscriber subscriber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subscribers.add(subscriber);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unsubscribe</span><span class="params">(Subscriber subscriber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.subscribers.contains(subscriber)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.subscribers.remove(subscriber);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifySubscribers</span><span class="params">(String publisher, String articleName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.pubStatus) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Subscriber subscriber : <span class="keyword">this</span>.subscribers) &#123;</span><br><span class="line">            subscriber.receive(publisher, articleName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.clearPubStatus();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">setPubStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pubStatus = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">clearPubStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pubStatus = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteSubject</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeChatAccounts</span> <span class="keyword">extends</span> <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeChatAccounts</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publishArticles</span><span class="params">(String articleName, String content)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"\n&lt;%s&gt;å¾®ä¿¡å…¬ä¼—å· å‘å¸ƒäº†ä¸€ç¯‡æ¨é€ï¼Œæ–‡ç« åç§°ä¸º &lt;%s&gt;ï¼Œå†…å®¹ä¸º &lt;%s&gt; "</span>, <span class="keyword">this</span>.name, articleName, content));</span><br><span class="line">        setPubStatus();</span><br><span class="line">        notifySubscribers(<span class="keyword">this</span>.name, articleName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WeChatAccounts accounts = <span class="keyword">new</span> WeChatAccounts(<span class="string">"Xåšå£«"</span>);</span><br><span class="line"></span><br><span class="line">        WeChatClient user1 = <span class="keyword">new</span> WeChatClient(<span class="string">"ayahiro"</span>);</span><br><span class="line">        WeChatClient user2 = <span class="keyword">new</span> WeChatClient(<span class="string">"bxy0516"</span>);</span><br><span class="line">        WeChatClient user3 = <span class="keyword">new</span> WeChatClient(<span class="string">"tom"</span>);</span><br><span class="line"></span><br><span class="line">        accounts.subscribe(user1);</span><br><span class="line">        accounts.subscribe(user2);</span><br><span class="line">        accounts.subscribe(user3);</span><br><span class="line"></span><br><span class="line">        accounts.publishArticles(<span class="string">"article1"</span>, <span class="string">"something1"</span>);</span><br><span class="line"></span><br><span class="line">        accounts.unsubscribe(user1);</span><br><span class="line">        accounts.publishArticles(<span class="string">"article2"</span>, <span class="string">"something2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´ï¼Œè§‚å¯Ÿè€…æ¨¡å¼æ‰€åšçš„å·¥ä½œæ˜¯åœ¨è§£é™¤è€¦åˆï¼Œè®©è€¦åˆçš„åŒæ–¹éƒ½ä¾èµ–äºæŠ½è±¡ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå…·ä½“ï¼Œæ˜¯ä¾èµ–å€’è½¬åŸåˆ™çš„æœ€ä½³ä½“ç°ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/wwwdc1012/article/details/83353580" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/83353580</a></li><li><a href="https://blog.csdn.net/wwwdc1012/article/details/83317973" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/83317973</a></li><li><a href="https://xuwujing.blog.csdn.net/article/details/83589031" target="_blank" rel="noopener">https://xuwujing.blog.csdn.net/article/details/83589031</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿˜å‰©ä¸‹æœ€å3ä¸ªæ¨¡å¼äº†ï¼Œå­¦å®Œäº†ä¹‹åè®¾è®¡æ¨¡å¼çš„ç¬”è®°å°±å‘Šä¸€æ®µè½äº†ã€‚ä¸å…¶è¯´æ˜¯â€œå†™â€åšå®¢ï¼Œä¸å¦‚è¯´æ˜¯è®°å½•ç¬”è®°ï¼Œå­¦å®Œä¸€éè®¾è®¡æ¨¡å¼ï¼Œ&lt;br&gt;çŸ¥é“å„ä¸ªæ¨¡å¼å¤§æ¦‚ä»€ä¹ˆæ ·å­ï¼Œä»¥åç¢°åˆ°äº†å†å›æ¥ç¿»ç¿»ç¬”è®°ï¼Œå°±å¾ˆèˆ’æœã€‚å¤‡æˆ˜æ˜¥æ‹›çš„æ—¶å€™å†æ¥äºŒåˆ·å§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;çŠ¶æ€æ¨¡å¼&quot;&gt;&lt;a href=&quot;#çŠ¶æ€æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;çŠ¶æ€æ¨¡å¼&quot;&gt;&lt;/a&gt;çŠ¶æ€æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šè®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚çŠ¶æ€æ¨¡å¼éœ€è¦å¯¹æ¯ä¸€ä¸ªç³»ç»Ÿå¯èƒ½è·å–çš„çŠ¶æ€åˆ›ç«‹ä¸€ä¸ªçŠ¶æ€ç±»çš„å­ç±»ã€‚å½“ç³»ç»Ÿçš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¾¿æ”¹å˜æ‰€é€‰çš„å­ç±»ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/07/27/state-memento-observer/çŠ¶æ€æ¨¡å¼.png&quot; alt=&quot;çŠ¶æ€æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼å’Œæ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/26/strategy-template/"/>
    <id>http://yoursite.com/2019/07/26/strategy-template/</id>
    <published>2019-07-26T05:16:00.180Z</published>
    <updated>2019-07-26T10:07:59.942Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©å­¦ä¸¤ä¸ªç®€å•ï¼Œå®¹æ˜“ç†è§£åˆå®ç”¨çš„è®¾è®¡æ¨¡å¼</p><h3 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h3><p><strong>æè¿°ï¼šå®šä¹‰ä¸€ä¸ªç®—æ³•çš„ç³»åˆ—ï¼Œå°†å…¶å„ä¸ªåˆ†è£…ï¼Œå¹¶ä¸”ä½¿ä»–ä»¬æœ‰äº¤äº’æ€§ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•åœ¨ç”¨æˆ·ä½¿ç”¨çš„æ—¶å€™èƒ½ç‹¬ç«‹çš„æ”¹å˜ã€‚</strong></p><p><img src="/2019/07/26/strategy-template/ç­–ç•¥æ¨¡å¼.png" alt="ç­–ç•¥æ¨¡å¼"><br><a id="more"></a></p><p>ä»€ä¹ˆæ—¶å€™ç”¨ç­–ç•¥æ¨¡å¼ï¼Ÿ<br>ç­–ç•¥æ¨¡å¼æ˜¯ç”¨æ¥å°è£…ç®—æ³•çš„ï¼Œä»æ¦‚å¿µä¸Šæ¥çœ‹ï¼Œæ‰€æœ‰è¿™äº›ç®—æ³•å®Œæˆçš„éƒ½æ˜¯ç›¸åŒçš„å·¥ä½œï¼Œåªæ˜¯å®ç°ä¸åŒï¼Œå®ƒå¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼è°ƒç”¨æ‰€æœ‰çš„ç®—æ³•ï¼Œå‡å°‘äº†ç®—æ³•ç±»å’Œä½¿ç”¨ç®—æ³•ç±»ä¹‹é—´çš„è€¦åˆã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å‘ç°å¯ä»¥ç”¨å®ƒå°è£…å‡ ä¹ä»»ä½•ç±»å‹çš„è§„åˆ™ï¼Œåªè¦åœ¨åˆ†æè¿‡ç¨‹ä¸­å¬åˆ°éœ€è¦åœ¨ä¸åŒæ—¶æœºåº”ç”¨ä¸åŒçš„ä¸šåŠ¡è§„åˆ™ï¼Œå°±å¯ä»¥ç”¨ç­–ç•¥æ¨¡å¼å¤„ç†è¿™ç§å˜åŒ–çš„å¯èƒ½æ€§ã€‚</p><p>ç­–ç•¥æ¨¡å¼çš„3ä¸ªè§’è‰²</p><ul><li><p>Contextï¼ˆç¯å¢ƒç±»ï¼‰ï¼šç¯å¢ƒç±»æ˜¯ä½¿ç”¨ç®—æ³•çš„è§’è‰²ï¼Œå®ƒåœ¨è§£å†³æŸä¸ªé—®é¢˜ï¼ˆå³å®ç°æŸä¸ªæ–¹æ³•ï¼‰æ—¶å¯ä»¥é‡‡ç”¨å¤šç§ç­–ç•¥ã€‚åœ¨ç¯å¢ƒç±»ä¸­ç»´æŒä¸€ä¸ªå¯¹æŠ½è±¡ç­–ç•¥ç±»çš„å¼•ç”¨å®ä¾‹ï¼Œç”¨äºå®šä¹‰æ‰€é‡‡ç”¨çš„ç­–ç•¥ã€‚</p></li><li><p>Strategyï¼ˆæŠ½è±¡ç­–ç•¥ç±»ï¼‰ï¼šå®ƒä¸ºæ‰€æ”¯æŒçš„ç®—æ³•å£°æ˜äº†æŠ½è±¡æ–¹æ³•ï¼Œæ˜¯æ‰€æœ‰ç­–ç•¥ç±»çš„çˆ¶ç±»ï¼Œå®ƒå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–å…·ä½“ç±»ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¥å£ã€‚ç¯å¢ƒç±»é€šè¿‡æŠ½è±¡ç­–ç•¥ç±»ä¸­å£°æ˜çš„æ–¹æ³•åœ¨è¿è¡Œæ—¶è°ƒç”¨å…·ä½“ç­–ç•¥ç±»ä¸­å®ç°çš„ç®—æ³•ã€‚</p></li><li><p>ConcreteStrategyï¼ˆå…·ä½“ç­–ç•¥ç±»ï¼‰ï¼šå®ƒå®ç°äº†åœ¨æŠ½è±¡ç­–ç•¥ç±»ä¸­å£°æ˜çš„ç®—æ³•ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œå…·ä½“ç­–ç•¥ç±»å°†è¦†ç›–åœ¨ç¯å¢ƒç±»ä¸­å®šä¹‰çš„æŠ½è±¡ç­–ç•¥ç±»å¯¹è±¡ï¼Œä½¿ç”¨ä¸€ç§å…·ä½“çš„ç®—æ³•å®ç°æŸä¸ªä¸šåŠ¡å¤„ç†ã€‚</p></li></ul><p>ç­–ç•¥æ¨¡å¼å®ç°èµ·æ¥ä¹Ÿååˆ†ç®€å•ï¼Œéšä¾¿å†™ä¸ªä»£ç ç¤ºèŒƒå°±å¥½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Strategy</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">FastFood</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">getFood</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteStrategy</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FKC</span> <span class="keyword">extends</span> <span class="title">FastFood</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getFood</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç‚¹å¼€å°èœï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">McDonalds</span> <span class="keyword">extends</span> <span class="title">FastFood</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getFood</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç‚¹é‡‘æ‹±é—¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Context</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TakeawayPlatform</span> </span>&#123;</span><br><span class="line">    FastFood fastFood;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TakeawayPlatform</span><span class="params">(FastFood fastFood)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fastFood = fastFood;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getFood</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fastFood.getFood();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­–ç•¥æ¨¡å¼ç»“åˆç®€å•å·¥å‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TakeawayFactory</span> </span>&#123;</span><br><span class="line">    FastFood fastFood = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String KFC = <span class="string">"KFC"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String McDonalds = <span class="string">"McDonalds"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TakeawayFactory</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> KFC:</span><br><span class="line">                fastFood = <span class="keyword">new</span> FKC();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> McDonalds:</span><br><span class="line">                fastFood = <span class="keyword">new</span> McDonalds();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getFood</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fastFood.getFood();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TakeawayPlatform takeawayKFC = <span class="keyword">new</span> TakeawayPlatform(<span class="keyword">new</span> FKC());</span><br><span class="line">        takeawayKFC.getFood();</span><br><span class="line"></span><br><span class="line">        TakeawayPlatform takeawayMCD = <span class="keyword">new</span> TakeawayPlatform(<span class="keyword">new</span> McDonalds());</span><br><span class="line">        takeawayMCD.getFood();</span><br><span class="line"></span><br><span class="line">        TakeawayFactory takeawayFactory = <span class="keyword">new</span> TakeawayFactory(<span class="string">"KFC"</span>);</span><br><span class="line">        takeawayFactory.getFood();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨åŸºæœ¬ç­–ç•¥æ¨¡å¼ä¸­ï¼Œé€‰æ‹©ConcreteStrategyçš„èŒè´£ç”±å®¢æˆ·ç«¯æ‰¿æ‹…ï¼Œå¹¶è½¬ç»™Contextå¯¹è±¡ã€‚è¿™å¹¶æ²¡æœ‰è§£é™¤å®¢æˆ·ç«¯éœ€è¦é€‰æ‹©åˆ¤æ–­çš„å‹åŠ›ï¼Œè€Œç­–ç•¥æ¨¡å¼å’Œç®€å•å·¥å‚æ¨¡å¼ç»“åˆåï¼Œé€‰æ‹©çš„èŒè´£ä¹Ÿå¯ä»¥ç”±Contextæ‰¿æ‹…ï¼Œè¿™æœ€å¤§åŒ–å‡è½»äº†å®¢æˆ·ç«¯çš„èŒè´£ã€‚</p><h3 id="æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼"><a href="#æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼"></a>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</h3><p><strong>æè¿°ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•åŠå…·ä½“æ„é€ å­ç±»çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥è¿«ä½¿å­ç±»å®ç°å‰©ä½™çš„é€»è¾‘ã€‚ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œä»è€Œå¯¹å‰©ä½™çš„é€»è¾‘æœ‰ä¸åŒçš„å®ç°ã€‚å…ˆæ„å»ºä¸€ä¸ªé¡¶çº§é€»è¾‘æ¡†æ¶ï¼Œè€Œå°†é€»è¾‘çš„ç»†èŠ‚ç•™ç»™å…·ä½“çš„å­ç±»å»å®ç°ã€‚</strong></p><p><img src="/2019/07/26/strategy-template/æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼.png" alt="æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼"></p><p>ä»€ä¹ˆæ—¶å€™ç”¨æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ï¼Ÿ<br>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼æä¾›äº†å¾ˆå¥½çš„ä»£ç å¤ç”¨å¹³å°ï¼Œå½“é‡åˆ°ä¸€äº›åˆ—æ­¥éª¤æ„æˆçš„è¿‡ç¨‹éœ€è¦æ‰§è¡Œï¼Œè¿™äº›è¿‡ç¨‹ä»é«˜å±‚æ¬¡ä¸Šçœ‹æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯æœ‰äº›å…·ä½“æ­¥éª¤å®ç°å¯èƒ½ä¸åŒï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ã€‚</p><p>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼çš„2ä¸ªè§’è‰²</p><ul><li><p>AbstractClassï¼ˆæŠ½è±¡ç±»ï¼‰ï¼šåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—åŸºæœ¬æ“ä½œ(PrimitiveOperations)ï¼Œè¿™äº›åŸºæœ¬æ“ä½œå¯ä»¥æ˜¯å…·ä½“çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡çš„ï¼Œæ¯ä¸€ä¸ªåŸºæœ¬æ“ä½œå¯¹åº”ç®—æ³•çš„ä¸€ä¸ªæ­¥éª¤ï¼Œåœ¨å…¶å­ç±»ä¸­å¯ä»¥é‡å®šä¹‰æˆ–å®ç°è¿™äº›æ­¥éª¤ã€‚åŒæ—¶ï¼Œåœ¨æŠ½è±¡ç±»ä¸­å®ç°äº†ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•(Template Method)ï¼Œç”¨äºå®šä¹‰ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶ï¼Œæ¨¡æ¿æ–¹æ³•ä¸ä»…å¯ä»¥è°ƒç”¨åœ¨æŠ½è±¡ç±»ä¸­å®ç°çš„åŸºæœ¬æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨åœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°çš„åŸºæœ¬æ–¹æ³•ï¼Œè¿˜å¯ä»¥è°ƒç”¨å…¶ä»–å¯¹è±¡ä¸­çš„æ–¹æ³•ã€‚</p></li><li><p>ConcreteClassï¼ˆå…·ä½“å­ç±»ï¼‰ï¼šå®ƒæ˜¯æŠ½è±¡ç±»çš„å­ç±»ï¼Œç”¨äºå®ç°åœ¨çˆ¶ç±»ä¸­å£°æ˜çš„æŠ½è±¡åŸºæœ¬æ“ä½œä»¥å®Œæˆå­ç±»ç‰¹å®šç®—æ³•çš„æ­¥éª¤ï¼Œä¹Ÿå¯ä»¥è¦†ç›–åœ¨çˆ¶ç±»ä¸­å·²ç»å®ç°çš„å…·ä½“åŸºæœ¬æ“ä½œã€‚</p></li></ul><p>ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•æ˜¯å®šä¹‰åœ¨æŠ½è±¡ç±»ä¸­çš„ã€æŠŠåŸºæœ¬æ“ä½œæ–¹æ³•ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ€»ç®—æ³•æˆ–ä¸€ä¸ªæ€»è¡Œä¸ºçš„æ–¹æ³•ã€‚è¿™ä¸ªæ¨¡æ¿æ–¹æ³•å®šä¹‰åœ¨æŠ½è±¡ç±»ä¸­ï¼Œå¹¶ç”±å­ç±»ä¸åŠ ä»¥ä¿®æ”¹åœ°å®Œå…¨ç»§æ‰¿ä¸‹æ¥ã€‚æ¨¡æ¿æ–¹æ³•æ˜¯ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œå®ƒç»™å‡ºäº†ä¸€ä¸ªé¡¶å±‚é€»è¾‘æ¡†æ¶ï¼Œè€Œé€»è¾‘çš„ç»„æˆæ­¥éª¤åœ¨æŠ½è±¡ç±»ä¸­å¯ä»¥æ˜¯å…·ä½“æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡æ–¹æ³•ã€‚</p><p>åŸºæœ¬æ–¹æ³•æ˜¯å®ç°ç®—æ³•å„ä¸ªæ­¥éª¤çš„æ–¹æ³•ï¼Œæ˜¯æ¨¡æ¿æ–¹æ³•çš„ç»„æˆéƒ¨åˆ†ã€‚åŸºæœ¬æ–¹æ³•åˆå¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼šæŠ½è±¡æ–¹æ³•(Abstract Method)ã€å…·ä½“æ–¹æ³•(Concrete Method)å’Œé’©å­æ–¹æ³•(Hook Method)ã€‚</p><ul><li>æŠ½è±¡æ–¹æ³•ï¼šä¸€ä¸ªæŠ½è±¡æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜ã€ç”±å…¶å…·ä½“å­ç±»å®ç°ã€‚</li><li>å…·ä½“æ–¹æ³•ï¼šä¸€ä¸ªå…·ä½“æ–¹æ³•ç”±ä¸€ä¸ªæŠ½è±¡ç±»æˆ–å…·ä½“ç±»å£°æ˜å¹¶å®ç°ï¼Œå…¶å­ç±»å¯ä»¥è¿›è¡Œè¦†ç›–ä¹Ÿå¯ä»¥ç›´æ¥ç»§æ‰¿ã€‚</li><li>é’©å­æ–¹æ³•ï¼šå¯ä»¥ä¸ä¸€äº›å…·ä½“æ­¥éª¤ â€œæŒ‚é’©â€ ï¼Œä»¥å®ç°åœ¨ä¸åŒæ¡ä»¶ä¸‹æ‰§è¡Œæ¨¡æ¿æ–¹æ³•ä¸­çš„ä¸åŒæ­¥éª¤</li></ul><p>åšå¥¶èŒ¶çš„åŸºæœ¬å·¥åºå¤§è‡´æ˜¯ç›¸åŒçš„ï¼ŒåŠ å¥¶åŠ èŒ¶ï¼Œé¡¾å®¢é€‰æ‹©åŠ æ–™åŠ å†°ç”œåº¦ç­‰ç­‰ï¼Œæœ€åå¡‘å°ã€‚ç”¨ä»£ç æ¼”ç¤ºå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AbstractClass</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MilkTea</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ¨¡ç‰ˆæ–¹æ³•ï¼Œæ³¨æ„è¦åŠ finalè®©å­ç±»ä¸èƒ½æ”¹å†™</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">makeMilkTea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        addMilk();</span><br><span class="line">        addTea();</span><br><span class="line">        <span class="keyword">if</span> (needIce()) &#123;</span><br><span class="line">            addIce();</span><br><span class="line">        &#125;</span><br><span class="line">        addStuff();</span><br><span class="line">        packUp();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addMilk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ·»åŠ ç‰›å¥¶"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addTea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ·»åŠ èŒ¶æ±"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addIce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ·»åŠ å†°å—"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">packUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¡‘å°ï¼Œå®Œæˆï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">needIce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">addStuff</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteClass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PearlMilkTea</span> <span class="keyword">extends</span> <span class="title">MilkTea</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addStuff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åŠ çç "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedBeanMilkTeaWithIce</span> <span class="keyword">extends</span> <span class="title">MilkTea</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">needIce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addStuff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åŠ çº¢è±†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TemplateMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"-----å¼€å§‹åˆ¶ä½œçç å¥¶èŒ¶-----"</span>);</span><br><span class="line">        MilkTea pearl = <span class="keyword">new</span> PearlMilkTea();</span><br><span class="line">        pearl.makeMilkTea();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"-----å¼€å§‹åˆ¶ä½œçº¢è±†å¥¶èŒ¶åŠ å†°-----"</span>);</span><br><span class="line">        MilkTea redBean = <span class="keyword">new</span> RedBeanMilkTeaWithIce();</span><br><span class="line">        redBean.makeMilkTea();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä¸å˜çš„å’Œå¯å˜çš„è¡Œä¸ºåœ¨æ–¹æ³•çš„å­ç±»å®ç°æ··åˆåœ¨ä¸€èµ·æ—¶ï¼Œä¸å˜çš„è¡Œä¸ºå°±ä¼šåœ¨å­ç±»ä¸­é‡å¤å‡ºç°ã€‚é€šè¿‡æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼æŠŠä¸å˜çš„è¡Œä¸ºæ¬åˆ°å•ä¸€çš„åœ°æ–¹ï¼Œè¿™æ ·å¸®åŠ©å­ç±»æ‘†è„±é‡å¤ä¸å˜è¡Œä¸ºçš„çº ç¼ </p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/wwwdc1012/article/details/83152856" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/83152856</a></li><li><a href="https://blog.csdn.net/wwwdc1012/article/details/83005717" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/83005717</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©å­¦ä¸¤ä¸ªç®€å•ï¼Œå®¹æ˜“ç†è§£åˆå®ç”¨çš„è®¾è®¡æ¨¡å¼&lt;/p&gt;
&lt;h3 id=&quot;ç­–ç•¥æ¨¡å¼&quot;&gt;&lt;a href=&quot;#ç­–ç•¥æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;ç­–ç•¥æ¨¡å¼&quot;&gt;&lt;/a&gt;ç­–ç•¥æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šå®šä¹‰ä¸€ä¸ªç®—æ³•çš„ç³»åˆ—ï¼Œå°†å…¶å„ä¸ªåˆ†è£…ï¼Œå¹¶ä¸”ä½¿ä»–ä»¬æœ‰äº¤äº’æ€§ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•åœ¨ç”¨æˆ·ä½¿ç”¨çš„æ—¶å€™èƒ½ç‹¬ç«‹çš„æ”¹å˜ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/07/26/strategy-template/ç­–ç•¥æ¨¡å¼.png&quot; alt=&quot;ç­–ç•¥æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼å’Œä¸­ä»‹è€…æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/25/mediator-visitor/"/>
    <id>http://yoursite.com/2019/07/25/mediator-visitor/</id>
    <published>2019-07-25T11:18:19.868Z</published>
    <updated>2019-07-25T17:39:37.371Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šæ¬¡å­¦äº†è§£é‡Šå™¨æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼ï¼Œéƒ½ä¸æ˜¯ç”¨å¾—å¾ˆå¤šï¼Œè€Œä¸”éƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±ä¸æ°´åšå®¢äº†</p><h3 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h3><p><strong>æè¿°ï¼šå°è£…ä¸€äº›æ–½åŠ äºæŸç§æ•°æ®ç»“æ„å…ƒç´ ä¹‹ä¸Šçš„æ“ä½œã€‚ä¸€æ—¦è¿™äº›æ“ä½œéœ€è¦ä¿®æ”¹ï¼Œæ¥å—è¿™ä¸ªæ“ä½œçš„æ•°æ®ç»“æ„å¯ä»¥ä¿æŒä¸å˜ã€‚è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹æœªå®šçš„ç³»ç»Ÿï¼Œå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±çš„æ¼”åŒ–ã€‚</strong></p><p><img src="/2019/07/25/mediator-visitor/è®¿é—®è€…æ¨¡å¼.png" alt="è®¿é—®è€…æ¨¡å¼"><br><a id="more"></a></p><p>è®¿é—®è€…æ¨¡å¼çš„ç›®çš„æ˜¯è¦æŠŠå¤„ç†ä»æ•°æ®ç»“æ„åˆ†ç¦»å‡ºæ¥ï¼Œæœ‰æ¯”è¾ƒç¨³å®šçš„æ•°æ®ç»“æ„ï¼Œåˆæœ‰æ˜“äºå˜åŒ–çš„ç®—æ³•çš„è¯ï¼Œä½¿ç”¨è®¿é—®è€…æ¨¡å¼æ˜¯åˆé€‚çš„ï¼Œå› ä¸ºå®ƒä½¿å¾—ç®—æ³•æ“ä½œçš„å¢åŠ å˜å¾—å®¹æ˜“ã€‚å…¶ç¼ºç‚¹æ˜¯å¢åŠ æ–°çš„æ•°æ®ç»“æ„å˜å¾—å›°éš¾ã€‚è®¿é—®è€…æ¨¡å¼æ¯”è¾ƒå¤æ‚ï¼Œå½“çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰è€ƒè™‘ä½¿ç”¨å®ƒã€‚</p><p>è®¿é—®è€…æ¨¡å¼çš„5å’Œè§’è‰²</p><ul><li><p>Visitorï¼ˆæŠ½è±¡è®¿é—®è€…ï¼‰è§’è‰²ï¼šå£°æ˜äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–¹æ³•æ“ä½œï¼Œå½¢æˆæ‰€æœ‰çš„å…·ä½“è®¿é—®è€…è§’è‰²å¿…é¡»å®ç°çš„æ¥å£ã€‚</p></li><li><p>ConcreteVisitorï¼ˆå…·ä½“è®¿é—®è€…ï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡è®¿é—®è€…æ‰€å£°æ˜çš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯æŠ½è±¡è®¿é—®è€…æ‰€å£°æ˜çš„å„ä¸ªè®¿é—®æ“ä½œã€‚</p></li><li><p>Elementï¼ˆæŠ½è±¡å…ƒç´ ï¼‰ï¼šå£°æ˜ä¸€ä¸ªæ¥å—æ“ä½œï¼Œæ¥å—ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä½œä¸ºä¸€ä¸ªå‚æ•°ã€‚</p></li><li><p>ConcreteElementï¼ˆå…·ä½“å…ƒç´ ï¼‰ï¼šå®ç°äº†æŠ½è±¡èŠ‚ç‚¹æ‰€è§„å®šçš„æ¥å—æ“ä½œã€‚</p></li><li><p>ObjectStructureï¼ˆç»“æ„å¯¹è±¡ï¼‰ï¼šæœ‰å¦‚ä¸‹çš„è´£ä»»ï¼Œå¯ä»¥éå†ç»“æ„ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p></li></ul><p>åœ¨æœ¬ä¾‹ä¸­ï¼ŒæŠŠå•æ‰€å½“åšæŠ½è±¡å…ƒç´ ï¼Œå…·ä½“å…ƒç´ æœ‰ç”·å•æ‰€å’Œå¥³å•æ‰€ï¼Œç”±æ­¤å¯è§æ•°æ®ç»“æ„æ—¶ç¨³å®šçš„ï¼Œå› ä¸ºç”Ÿç†æ€§åˆ«åªæœ‰ç”·å¥³ä¹‹åˆ†ã€‚è¿›äº†å•æ‰€å¯ä»¥è§£å¤§ä¾¿è§£å°ä¾¿ï¼Œæ´—æ‰‹ï¼ŒæŠ½çƒŸï¼Œæƒ³å¹²å•¥å¹²å•¥ã€‚å› æ­¤æ“ä½œæ˜¯å¤šå˜çš„ï¼Œè¿™äº›æ“ä½œéƒ½ç›¸å½“äºæ˜¯â€œæ”¾æ¾â€ï¼ŒæŠŠâ€œæ”¾æ¾â€æŠ½è±¡æˆVisitor, ç”¨ä»£ç æ¨¡æ‹Ÿå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Visitor</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Rest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">getManRest</span><span class="params">(ManRoom manRoom)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">getWomanRest</span><span class="params">(WomanRoom womanRoom)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteVisitor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stool</span> <span class="keyword">extends</span> <span class="title">Rest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getManRest</span><span class="params">(ManRoom manRoom)</span> </span>&#123;</span><br><span class="line">        System.out.println(manRoom.getClass().getSimpleName() + <span class="string">"ä¸Šå¤§ä¾¿"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getWomanRest</span><span class="params">(WomanRoom womanRoom)</span> </span>&#123;</span><br><span class="line">        System.out.println(womanRoom.getClass().getSimpleName() + <span class="string">"ä¸Šå¤§ä¾¿"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pee</span> <span class="keyword">extends</span> <span class="title">Rest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getManRest</span><span class="params">(ManRoom manRoom)</span> </span>&#123;</span><br><span class="line">        System.out.println(manRoom.getClass().getSimpleName() + <span class="string">"ä¸Šå°ä¾¿"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getWomanRest</span><span class="params">(WomanRoom womanRoom)</span> </span>&#123;</span><br><span class="line">        System.out.println(womanRoom.getClass().getSimpleName() + <span class="string">"ä¸Šå°ä¾¿"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Element</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Toilet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Rest rest)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteElementA</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ManRoom</span> <span class="keyword">extends</span> <span class="title">Toilet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Rest rest)</span> </span>&#123;</span><br><span class="line">        rest.getManRest(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteElementB</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WomanRoom</span> <span class="keyword">extends</span> <span class="title">Toilet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Rest rest)</span> </span>&#123;</span><br><span class="line">        rest.getWomanRest(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ObjectStructure</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ToiletManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Toilet&gt; elements = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attach</span><span class="params">(Toilet toilet)</span> </span>&#123;</span><br><span class="line">        elements.add(toilet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">detach</span><span class="params">(Toilet toilet)</span> </span>&#123;</span><br><span class="line">        elements.remove(toilet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(Rest rest)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Toilet toilet : elements) &#123;</span><br><span class="line">            toilet.accept(rest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ToiletManager toiletManager = <span class="keyword">new</span> ToiletManager();</span><br><span class="line">        toiletManager.attach(<span class="keyword">new</span> ManRoom());</span><br><span class="line">        toiletManager.attach(<span class="keyword">new</span> WomanRoom());</span><br><span class="line"></span><br><span class="line">        Stool stool = <span class="keyword">new</span> Stool();</span><br><span class="line">        toiletManager.display(stool);</span><br><span class="line"></span><br><span class="line">        Pee pee = <span class="keyword">new</span> Pee();</span><br><span class="line">        toiletManager.display(pee);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h3><p><strong>æè¿°ï¼šåŒ…è£…äº†ä¸€ç³»åˆ—å¯¹è±¡ç›¸äº’ä½œç”¨çš„æ–¹å¼ï¼Œä½¿å¾—è¿™äº›å¯¹è±¡ä¸å¿…ç›¸äº’æ˜æ˜¾ä½œç”¨ï¼Œä»è€Œä½¿å®ƒä»¬å¯ä»¥æ¾æ•£å¶åˆã€‚å½“æŸäº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸ä¼šç«‹å³å½±å“å…¶ä»–çš„ä¸€äº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨ï¼Œä¿è¯è¿™äº›ä½œç”¨å¯ä»¥å½¼æ­¤ç‹¬ç«‹çš„å˜åŒ–ã€‚</strong></p><p><img src="/2019/07/25/mediator-visitor/ä¸­ä»‹è€…æ¨¡å¼.png" alt="ä¸­ä»‹è€…æ¨¡å¼"></p><p>åœ¨å¼€å‘ä¸­ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šå°½ç®¡å°†ç³»ç»Ÿåˆ†å‰²æˆè®¸å¤šå¯¹è±¡é€šå¸¸å¯å¢åŠ å…¶å¯å¤ç”¨æ€§ï¼Œä½†æ˜¯å¯¹è±¡é—´ç›¸äº’è¿æ¥çš„æ¿€å¢åˆä¼šé™ä½å…¶å¯å¤ç”¨æ€§äº†ï¼Œå¤§é‡çš„è¿æ¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡ä¸å¯èƒ½åœ¨æ²¡æœ‰å…¶ä»–å¯¹è±¡çš„æ”¯æŒä¸‹å·¥ä½œï¼Œç³»ç»Ÿè¡¨ç°ä¸ºä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œæ‰€ä»¥ï¼Œå¯¹ç³»ç»Ÿçš„è¡Œä¸ºè¿›è¡Œä»»ä½•è¾ƒå¤§çš„æ”¹åŠ¨å°±ååˆ†å›°éš¾äº†ï¼Œè¿™å°±æ˜¯ä¸­ä»‹è€…æ¨¡å¼è§£å†³é—®é¢˜çš„èƒŒæ™¯ã€‚</p><p>ä¸­ä»‹è€…æ¨¡å¼çš„4ä¸ªè§’è‰²</p><ul><li><p>Mediatorï¼ˆæŠ½è±¡ä¸­ä»‹è€…ï¼‰ï¼šå®ƒå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£ç”¨äºä¸å„åŒäº‹å¯¹è±¡ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚</p></li><li><p>ConcreteMediatorï¼ˆå…·ä½“ä¸­ä»‹è€…ï¼‰ï¼šå®ƒæ˜¯æŠ½è±¡ä¸­ä»‹è€…çš„å­ç±»ï¼Œé€šè¿‡åè°ƒå„ä¸ªåŒäº‹å¯¹è±¡æ¥å®ç°åä½œè¡Œä¸ºï¼Œå®ƒç»´æŒäº†å¯¹å„ä¸ªåŒäº‹å¯¹è±¡çš„å¼•ç”¨ã€‚</p></li><li><p>Colleagueï¼ˆæŠ½è±¡åŒäº‹ç±»ï¼‰ï¼šå®ƒå®šä¹‰å„ä¸ªåŒäº‹ç±»å…¬æœ‰çš„æ–¹æ³•ï¼Œå¹¶å£°æ˜äº†ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥ä¾›å­ç±»å®ç°ï¼ŒåŒæ—¶å®ƒç»´æŒäº†ä¸€ä¸ªå¯¹æŠ½è±¡ä¸­ä»‹è€…ç±»çš„å¼•ç”¨ï¼Œå…¶å­ç±»å¯ä»¥é€šè¿‡è¯¥å¼•ç”¨æ¥ä¸ä¸­ä»‹è€…é€šä¿¡ã€‚</p></li><li><p>ConcreteColleagueï¼ˆå…·ä½“åŒäº‹ç±»ï¼‰ï¼šå®ƒæ˜¯æŠ½è±¡åŒäº‹ç±»çš„å­ç±»ï¼›æ¯ä¸€ä¸ªåŒäº‹å¯¹è±¡åœ¨éœ€è¦å’Œå…¶ä»–åŒäº‹å¯¹è±¡é€šä¿¡æ—¶ï¼Œå…ˆä¸ä¸­ä»‹è€…é€šä¿¡ï¼Œé€šè¿‡ä¸­ä»‹è€…æ¥é—´æ¥å®Œæˆä¸å…¶ä»–åŒäº‹ç±»çš„é€šä¿¡ï¼›åœ¨å…·ä½“åŒäº‹ç±»ä¸­å®ç°äº†åœ¨æŠ½è±¡åŒäº‹ç±»ä¸­å£°æ˜çš„æŠ½è±¡æ–¹æ³•ã€‚</p></li></ul><p>ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºä¸­ä»‹è€…ç±»çš„å¼•å…¥ï¼Œåœ¨ä¸­ä»‹è€…æ¨¡å¼ä¸­ï¼Œä¸­ä»‹è€…ç±»æ‰¿æ‹…äº†ä¸¤æ–¹é¢çš„èŒè´£ï¼š</p><ul><li><p>ä¸­è½¬ä½œç”¨ï¼ˆç»“æ„æ€§ï¼‰ï¼šé€šè¿‡ä¸­ä»‹è€…æä¾›çš„ä¸­è½¬ä½œç”¨ï¼Œå„ä¸ªåŒäº‹å¯¹è±¡å°±ä¸å†éœ€è¦æ˜¾å¼å¼•ç”¨å…¶ä»–åŒäº‹ï¼Œå½“éœ€è¦å’Œå…¶ä»–åŒäº‹è¿›è¡Œé€šä¿¡æ—¶ï¼Œå¯é€šè¿‡ä¸­ä»‹è€…æ¥å®ç°é—´æ¥è°ƒç”¨ã€‚è¯¥ä¸­è½¬ä½œç”¨å±äºä¸­ä»‹è€…åœ¨ç»“æ„ä¸Šçš„æ”¯æŒã€‚</p></li><li><p>åè°ƒä½œç”¨ï¼ˆè¡Œä¸ºæ€§ï¼‰ï¼šä¸­ä»‹è€…å¯ä»¥æ›´è¿›ä¸€æ­¥çš„å¯¹åŒäº‹ä¹‹é—´çš„å…³ç³»è¿›è¡Œå°è£…ï¼ŒåŒäº‹å¯ä»¥ä¸€è‡´çš„å’Œä¸­ä»‹è€…è¿›è¡Œäº¤äº’ï¼Œè€Œä¸éœ€è¦æŒ‡æ˜ä¸­ä»‹è€…éœ€è¦å…·ä½“æ€ä¹ˆåšï¼Œä¸­ä»‹è€…æ ¹æ®å°è£…åœ¨è‡ªèº«å†…éƒ¨çš„åè°ƒé€»è¾‘ï¼Œå¯¹åŒäº‹çš„è¯·æ±‚è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œå°†åŒäº‹æˆå‘˜ä¹‹é—´çš„å…³ç³»è¡Œä¸ºè¿›è¡Œåˆ†ç¦»å’Œå°è£…ã€‚</p></li></ul><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œä¹°å®¶å’Œä¹°å®¶äº¤æ˜“æ—¶ä½¿ç”¨ç§»åŠ¨æ”¯ä»˜ï¼Œä»¥å‰æ˜¯ä½¿ç”¨çº¸å¸è¿›è¡Œé¢å¯¹é¢äº¤æ˜“ã€‚ç°åœ¨å¯ä»¥é€šè¿‡æ”¯ä»˜å®ã€å¾®ä¿¡è½¬è´¦äº¤æ˜“ï¼Œè¿™äº›ç§»åŠ¨æ”¯ä»˜å¹³å°å°±ç›¸å½“äºä¸­ä»‹è€…ã€‚è€Œæ”¯ä»˜å®ã€å¾®ä¿¡å°±æ˜¯å…·ä½“ä¸­ä»‹è€…äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Mediator</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MobilePayment</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Account account, <span class="keyword">double</span> amount)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Colleague</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> MobilePayment mobilePayment;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(MobilePayment mobilePayment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mobilePayment = mobilePayment;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteColleague</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Seller</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Seller</span><span class="params">(MobilePayment mobilePayment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(mobilePayment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">        mobilePayment.transfer(<span class="keyword">this</span>, amount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å–å®¶æ”¶åˆ° "</span> + amount + <span class="string">" å…ƒ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Buyer</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Buyer</span><span class="params">(MobilePayment mobilePayment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(mobilePayment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">        mobilePayment.transfer(<span class="keyword">this</span>, amount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¹°å®¶æ”¶åˆ° "</span> + amount + <span class="string">" å…ƒ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteMediator</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alipay</span> <span class="keyword">extends</span> <span class="title">MobilePayment</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Buyer buyer;</span><br><span class="line">    <span class="keyword">private</span> Seller seller;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBuyer</span><span class="params">(Buyer buyer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.buyer = buyer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSeller</span><span class="params">(Seller seller)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.seller = seller;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Account account, <span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (account <span class="keyword">instanceof</span> Buyer) &#123;</span><br><span class="line">            seller.notify(amount);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            buyer.notify(amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mediator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Alipay alipay = <span class="keyword">new</span> Alipay();</span><br><span class="line"></span><br><span class="line">        Buyer buyer = <span class="keyword">new</span> Buyer(alipay);</span><br><span class="line">        Seller seller = <span class="keyword">new</span> Seller(alipay);</span><br><span class="line"></span><br><span class="line">        alipay.setBuyer(buyer);</span><br><span class="line">        alipay.setSeller(seller);</span><br><span class="line"></span><br><span class="line">        buyer.transfer(<span class="number">999</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­ä»‹è€…æ¨¡å¼å¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿä¸­åº”ç”¨ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¯¯ç”¨ã€‚å½“ç³»ç»Ÿä¸­å‡ºç°äº†â€œå¤šå¯¹å¤šâ€äº¤äº’å¤æ‚çš„å¯¹è±¡ç¾¤æ—¶ï¼Œä¸è¦æ€¥äºä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œè€Œè¦å…ˆåæ€ä½ çš„ç³»ç»Ÿåœ¨è®¾è®¡ä¸Šæ˜¯ä¸æ˜¯åˆç†ã€‚</p><p>ä¼˜ç‚¹ï¼šMediatorçš„å‡ºç°å‡å°‘äº†å„ä¸ªColleagueçš„è€¦åˆï¼Œä½¿å¾—å¯ä»¥ç‹¬ç«‹æ”¹å˜å’Œå¤ç”¨å„ä¸ªColleague,ç”±äºæŠŠå¯¹è±¡å¦‚ä½•åä½œè¿›è¡Œäº†æŠ½è±¡ï¼Œå°†ä¸­ä»‹è€…ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¦‚å¿µå¹¶å°†å…¶å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™æ ·å…³æ³¨çš„å¯¹è±¡å°±ä»å¯¹è±¡å„è‡ªæœ¬èº«è½¬ç§»åˆ°å®ƒä»¬ä¹‹é—´çš„äº¤äº’ä¸Šæ¥ï¼Œä¹Ÿå°±æ˜¯ä»¥æ›´å®è§‚çš„è§’åº¦å»çœ‹å¾…ç³»ç»Ÿã€‚</p><p>ç¼ºç‚¹ï¼šç”±äºConcreteMediatoræ§åˆ¶äº†é›†ä¸­åŒ–ï¼Œäºæ˜¯å°±æŠŠäº¤äº’å¤æ‚æ€§å˜ä¸ºä¸­ä»‹è€…å¤æ‚æ€§ï¼Œè¿™å°±ä½¿å¾—ä¸­ä»‹è€…ä¼šå˜å¾—æ¯”ä»»ä½•ä¸€ä¸ªConcreteColleagueéƒ½å¤æ‚ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/wwwdc1012/article/details/83389158" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/83389158</a></li><li><a href="https://xuwujing.blog.csdn.net/article/details/83588888" target="_blank" rel="noopener">https://xuwujing.blog.csdn.net/article/details/83588888</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šæ¬¡å­¦äº†è§£é‡Šå™¨æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼ï¼Œéƒ½ä¸æ˜¯ç”¨å¾—å¾ˆå¤šï¼Œè€Œä¸”éƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±ä¸æ°´åšå®¢äº†&lt;/p&gt;
&lt;h3 id=&quot;è®¿é—®è€…æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è®¿é—®è€…æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è®¿é—®è€…æ¨¡å¼&quot;&gt;&lt;/a&gt;è®¿é—®è€…æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šå°è£…ä¸€äº›æ–½åŠ äºæŸç§æ•°æ®ç»“æ„å…ƒç´ ä¹‹ä¸Šçš„æ“ä½œã€‚ä¸€æ—¦è¿™äº›æ“ä½œéœ€è¦ä¿®æ”¹ï¼Œæ¥å—è¿™ä¸ªæ“ä½œçš„æ•°æ®ç»“æ„å¯ä»¥ä¿æŒä¸å˜ã€‚è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹æœªå®šçš„ç³»ç»Ÿï¼Œå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±çš„æ¼”åŒ–ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/07/25/mediator-visitor/è®¿é—®è€…æ¨¡å¼.png&quot; alt=&quot;è®¿é—®è€…æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹å‘½ä»¤æ¨¡å¼å’Œè´£ä»»é“¾æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/24/command-responsibility/"/>
    <id>http://yoursite.com/2019/07/24/command-responsibility/</id>
    <published>2019-07-24T07:44:02.383Z</published>
    <updated>2019-07-24T08:52:29.267Z</updated>
    
    <content type="html"><![CDATA[<p>ç»ˆäºæ¥åˆ°äº†è¡Œä¸ºå‹æ¨¡å¼çš„å­¦ä¹ ï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯æœ€å¤šçš„ï¼Œæ…¢æ…¢å•ƒå§</p><h3 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h3><p><strong>æè¿°ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯å–æ¶ˆçš„æ“ä½œã€‚</strong></p><p><img src="/2019/07/24/command-responsibility/å‘½ä»¤æ¨¡å¼.png" alt="å‘½ä»¤æ¨¡å¼"><br><a id="more"></a><br>å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€æ“ä½œæ—¶ï¼Œâ€œè¡Œä¸ºè¯·æ±‚è€…â€å’Œâ€œè¡Œä¸ºå®ç°è€…â€ç´§è€¦åˆæ˜¯ä¸åˆé€‚çš„ã€‚<br>å‘½ä»¤æ¨¡å¼ç”¨æ¥è§£å†³â€œè¡Œä¸ºè¯·æ±‚è€…â€å’Œâ€œè¡Œä¸ºå®ç°è€…â€ç´§è€¦åˆçš„é—®é¢˜ã€‚</p><p>å‘½ä»¤æ¨¡å¼çš„4ä¸ªè§’è‰²</p><ul><li><p>Commandï¼ˆå‘½ä»¤æ¥å£ï¼‰ï¼šç”¨æ¥å£°æ˜æ“ä½œçš„æ¥å£ã€‚</p></li><li><p>ConcreteCommandï¼ˆå…·ä½“å‘½ä»¤ç±»ï¼‰ï¼šå°†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡ç»‘å®šäºä¸€ä¸ªåŠ¨ä½œï¼Œè°ƒç”¨æ¥æ”¶è€…ç›¸åº”çš„æ“ä½œã€‚</p></li><li><p>Receiverï¼ˆå‘½ä»¤æ‰§è¡Œå¯¹è±¡ï¼‰ï¼šçŸ¥é“å¦‚ä½•å®æ–½ä¸æ‰§è¡Œä¸€ä¸ªè¯·æ±‚ç›¸å…³çš„æ“ä½œï¼Œä»»ä½•ç±»éƒ½å¯èƒ½ä½œä¸ºä¸€ä¸ªæ¥æ”¶è€…ã€‚</p></li><li><p>Invokerï¼ˆå‘½ä»¤è¯·æ±‚å¯¹è±¡ï¼‰ï¼šç”¨äºæ‰§è¡Œè¿™ä¸ªè¯·æ±‚ï¼Œå¯ä»¥åŠ¨æ€çš„å¯¹å‘½ä»¤è¿›è¡Œæ§åˆ¶ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Receiver</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Barbecuer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bakeMutton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"çƒ¤ç¾Šè‚‰ä¸²"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bakeChickenWing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"çƒ¤é¸¡ç¿…"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Command</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Barbecuer barbecuer;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Order</span><span class="params">(Barbecuer barbecuer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.barbecuer = barbecuer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">excuteOrder</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteCommand</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BakeMuttonOrder</span> <span class="keyword">extends</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BakeMuttonOrder</span><span class="params">(Barbecuer barbecuer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(barbecuer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">excuteOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        barbecuer.bakeMutton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BakeChickenWingOrder</span> <span class="keyword">extends</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BakeChickenWingOrder</span><span class="params">(Barbecuer barbecuer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(barbecuer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">excuteOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        barbecuer.bakeChickenWing();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Invoker</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Waiter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orders = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrder</span><span class="params">(Order order)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (order <span class="keyword">instanceof</span> BakeChickenWingOrder) &#123;</span><br><span class="line">            System.out.println(<span class="string">"æœåŠ¡å‘˜ï¼šé¸¡ç¿…æ²¡æœ‰äº†ï¼"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            orders.add(order);</span><br><span class="line">            System.out.println(<span class="string">"å¢åŠ è®¢å•ï¼š"</span> + order.getClass().getSimpleName() + <span class="string">"ï¼Œæ—¶é—´ï¼š"</span> + <span class="keyword">new</span> Date().toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cancelOrder</span><span class="params">(Order order)</span> </span>&#123;</span><br><span class="line">        orders.remove(order);</span><br><span class="line">        System.out.println(<span class="string">"å–æ¶ˆè®¢å•ï¼š"</span> + order.getClass().getSimpleName() + <span class="string">"ï¼Œæ—¶é—´ï¼š"</span> + <span class="keyword">new</span> Date().toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyOrders</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Order order : orders) &#123;</span><br><span class="line">            order.excuteOrder();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Barbecuer barbecuer=<span class="keyword">new</span> Barbecuer();</span><br><span class="line">        Order order1=<span class="keyword">new</span> BakeChickenWingOrder(barbecuer);</span><br><span class="line">        Order order2=<span class="keyword">new</span> BakeMuttonOrder(barbecuer);</span><br><span class="line">        Order order3=<span class="keyword">new</span> BakeMuttonOrder(barbecuer);</span><br><span class="line"></span><br><span class="line">        Waiter waiter=<span class="keyword">new</span> Waiter();</span><br><span class="line">        waiter.setOrder(order1);</span><br><span class="line">        waiter.setOrder(order2);</span><br><span class="line">        waiter.setOrder(order3);</span><br><span class="line">        waiter.notifyOrders();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“å‘½ä»¤æ¨¡å¼çš„ä¼˜ç‚¹  </p><ol><li>èƒ½è¾ƒå®¹æ˜“åœ°è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—</li><li>åœ¨éœ€è¦çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¾ƒå®¹æ˜“åœ°å°†å‘½ä»¤è®°å…¥æ—¥å¿—</li><li>å…è®¸æ¥æ”¶è¯·æ±‚çš„ä¸€æ–¹å†³å®šæ˜¯å¦è¦å¦å†³è¯·æ±‚</li><li>èƒ½å®¹æ˜“åœ°å®ç°å¯¹è¯·æ±‚çš„æ’¤é”€å’Œé‡åš</li><li>ç”±äºæ·»åŠ æ–°çš„å…·ä½“å‘½ä»¤ç±»ä¸å½±å“å…¶ä»–ç±»ï¼Œå› æ­¤å¢åŠ æ–°çš„å…·ä½“å‘½ä»¤ç±»å¾ˆå®¹æ˜“</li></ol><p>æœ€å…³é”®çš„ä¼˜ç‚¹æ˜¯ï¼š<strong>æŠŠè¯·æ±‚ä¸€ä¸ªæ“ä½œçš„å¯¹è±¡ä¸çŸ¥é“æ€ä¹ˆæ‰§è¡Œä¸€ä¸ªæ“ä½œçš„å¯¹è±¡åˆ†éš”å¼€</strong></p><h3 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h3><p><strong>æè¿°ï¼šä¸ºè§£é™¤è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´è€¦åˆï¼Œè€Œä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒã€‚</strong></p><p><img src="/2019/07/24/command-responsibility/è´£ä»»é“¾æ¨¡å¼.png" alt="è´£ä»»é“¾æ¨¡å¼"></p><p>è´£ä»»é“¾æ¨¡å¼çš„2ä¸ªè§’è‰²</p><ul><li><p>Handlerï¼ˆæŠ½è±¡å¤„ç†è€…ï¼‰ï¼šå®ƒå®šä¹‰äº†ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼Œä¸€èˆ¬è®¾è®¡ä¸ºæŠ½è±¡ç±»ï¼Œç”±äºä¸åŒçš„å…·ä½“å¤„ç†è€…å¤„ç†è¯·æ±‚çš„æ–¹å¼ä¸åŒï¼Œå› æ­¤åœ¨å…¶ä¸­å®šä¹‰äº†æŠ½è±¡è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚å› ä¸ºæ¯ä¸€ä¸ªå¤„ç†è€…çš„ä¸‹å®¶è¿˜æ˜¯ä¸€ä¸ªå¤„ç†è€…ï¼Œå› æ­¤åœ¨æŠ½è±¡å¤„ç†è€…ä¸­å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å¤„ç†è€…ç±»å‹çš„å¯¹è±¡ï¼Œä½œä¸ºå…¶å¯¹ä¸‹å®¶çš„å¼•ç”¨ã€‚é€šè¿‡è¯¥å¼•ç”¨ï¼Œå¤„ç†è€…å¯ä»¥è¿æˆä¸€æ¡é“¾ã€‚</p></li><li><p>ConcreteHandlerï¼ˆå…·ä½“å¤„ç†è€…ï¼‰ï¼šå®ƒæ˜¯æŠ½è±¡å¤„ç†è€…çš„å­ç±»ï¼Œå¯ä»¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œåœ¨å…·ä½“å¤„ç†è€…ç±»ä¸­å®ç°äº†æŠ½è±¡å¤„ç†è€…ä¸­å®šä¹‰çš„æŠ½è±¡è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œåœ¨å¤„ç†è¯·æ±‚ä¹‹å‰éœ€è¦è¿›è¡Œåˆ¤æ–­ï¼Œçœ‹æ˜¯å¦æœ‰ç›¸åº”çš„å¤„ç†æƒé™ï¼Œå¦‚æœå¯ä»¥å¤„ç†è¯·æ±‚å°±å¤„ç†å®ƒï¼Œå¦åˆ™å°†è¯·æ±‚è½¬å‘ç»™åç»§è€…ï¼›åœ¨å…·ä½“å¤„ç†è€…ä¸­å¯ä»¥è®¿é—®é“¾ä¸­ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿è¯·æ±‚çš„è½¬å‘ã€‚</p></li></ul><p>çº¯çš„è´£ä»»é“¾æ¨¡å¼ï¼š</p><p>ä¸€ä¸ªå…·ä½“å¤„ç†è€…å¯¹è±¡åªèƒ½åœ¨ä¸¤ä¸ªè¡Œä¸ºä¸­é€‰æ‹©ä¸€ä¸ªï¼šè¦ä¹ˆæ‰¿æ‹…å…¨éƒ¨è´£ä»»ï¼Œè¦ä¹ˆå°†è´£ä»»æ¨ç»™ä¸‹å®¶ï¼Œä¸å…è®¸å‡ºç°æŸä¸€ä¸ªå…·ä½“å¤„ç†è€…å¯¹è±¡åœ¨æ‰¿æ‹…äº†ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨è´£ä»»å<br>åˆå°†è´£ä»»å‘ä¸‹ä¼ é€’çš„æƒ…å†µ<br>ä¸€ä¸ªè¯·æ±‚å¿…é¡»è¢«æŸä¸€ä¸ªå¤„ç†è€…å¯¹è±¡æ‰€æ¥æ”¶ï¼Œä¸èƒ½å‡ºç°æŸä¸ªè¯·æ±‚æœªè¢«ä»»ä½•ä¸€ä¸ªå¤„ç†è€…å¯¹è±¡å¤„ç†çš„æƒ…å†µ</p><p>ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼ï¼š</p><p>å…è®¸æŸä¸ªè¯·æ±‚è¢«ä¸€ä¸ªå…·ä½“å¤„ç†è€…éƒ¨åˆ†å¤„ç†åå†å‘ä¸‹ä¼ é€’<br>æˆ–è€…ä¸€ä¸ªå…·ä½“å¤„ç†è€…å¤„ç†å®ŒæŸè¯·æ±‚åå…¶åç»§å¤„ç†è€…å¯ä»¥ç»§ç»­å¤„ç†è¯¥è¯·æ±‚<br>è€Œä¸”ä¸€ä¸ªè¯·æ±‚å¯ä»¥æœ€ç»ˆä¸è¢«ä»»ä½•å¤„ç†è€…å¯¹è±¡æ‰€æ¥æ”¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span> </span>&#123;</span><br><span class="line">    String type;</span><br><span class="line">    <span class="keyword">int</span> number;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Request</span><span class="params">(String type, <span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Handler</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Manager superior;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuperior</span><span class="params">(Manager superior)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.superior = superior;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestApplications</span><span class="params">(Request request)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteHandler</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonManager</span> <span class="keyword">extends</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CommonManager</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestApplications</span><span class="params">(Request request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (request.type.equals(<span class="string">"è¯·å‡"</span>) &amp;&amp; request.number &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"è¯·æ±‚ï¼š"</span> + request.type + <span class="string">", æ•°é‡ï¼š"</span> + request.number + <span class="string">", è¢«"</span>+name+<span class="string">"æ‰¹å‡†ã€‚"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (superior != <span class="keyword">null</span>) &#123;</span><br><span class="line">                superior.requestApplications(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Director</span> <span class="keyword">extends</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Director</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestApplications</span><span class="params">(Request request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (request.type.equals(<span class="string">"è¯·å‡"</span>) &amp;&amp; request.number &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"è¯·æ±‚ï¼š"</span> + request.type + <span class="string">", æ•°é‡ï¼š"</span> + request.number + <span class="string">", è¢«"</span>+name+<span class="string">"æ‰¹å‡†ã€‚"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (superior != <span class="keyword">null</span>) &#123;</span><br><span class="line">                superior.requestApplications(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GeneralManager</span> <span class="keyword">extends</span> <span class="title">Manager</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GeneralManager</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestApplications</span><span class="params">(Request request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (request.type.equals(<span class="string">"è¯·å‡"</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"è¯·æ±‚ï¼š"</span> + request.type + <span class="string">", æ•°é‡ï¼š"</span> + request.number + <span class="string">", è¢«"</span>+name+<span class="string">"æ‰¹å‡†ã€‚"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (superior != <span class="keyword">null</span>) &#123;</span><br><span class="line">                superior.requestApplications(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Responsibility</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CommonManager commonManager=<span class="keyword">new</span> CommonManager(<span class="string">"commonManager"</span>);</span><br><span class="line">        Director director=<span class="keyword">new</span> Director(<span class="string">"director"</span>);</span><br><span class="line">        GeneralManager generalManager=<span class="keyword">new</span> GeneralManager(<span class="string">"generalManager"</span>);</span><br><span class="line"></span><br><span class="line">        commonManager.setSuperior(director);</span><br><span class="line">        director.setSuperior(generalManager);</span><br><span class="line"></span><br><span class="line">        Request request1=<span class="keyword">new</span> Request(<span class="string">"è¯·å‡"</span>, <span class="number">1</span>);</span><br><span class="line">        Request request2=<span class="keyword">new</span> Request(<span class="string">"è¯·å‡"</span>, <span class="number">4</span>);</span><br><span class="line">        Request request3=<span class="keyword">new</span> Request(<span class="string">"è¯·å‡"</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        commonManager.requestApplications(request1);</span><br><span class="line">        commonManager.requestApplications(request2);</span><br><span class="line">        commonManager.requestApplications(request3);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è´£ä»»é“¾æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><p>å½“å®¢æˆ·æäº¤ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œè¯·æ±‚æ—¶æ²¿é“¾ä¼ é€’ç›´è‡³æœ‰ä¸€ä¸ªConcreteHandlerå¯¹è±¡è´Ÿè´£å¤„ç†å®ƒï¼Œè¿™å°±ä½¿å¾—æ¥æ”¶è€…å’Œå‘é€è€…éƒ½æ²¡æœ‰å¯¹æ–¹çš„æ˜ç¡®ä¿¡æ¯ï¼Œä¸”é“¾ä¸­çš„å¯¹è±¡è‡ªå·±ä¹Ÿä¸çŸ¥é“é“¾çš„ç»“æ„ï¼Œç»“æœæ˜¯è´£ä»»é“¾å¯ä»¥ç®€åŒ–å¯¹è±¡çš„ç›¸äº’è¿æ¥ï¼Œå®ƒä»¬ä»…ä¿æŒä¸€ä¸ªæŒ‡å‘å…¶åç»§è€…çš„å¼•ç”¨ï¼Œè€Œä¸éœ€è¦ä¿æŒå®ƒæ‰€æœ‰å€™é€‰æ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¯ä»¥éšæ—¶åœ°å¢åŠ æˆ–ä¿®æ”¹å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„ç»“æ„ï¼Œå¢å¼ºäº†ç‹¬äº«æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚</p><p>ä½†ä¸€ä¸ªè¯·æ±‚æœ‰å¯èƒ½åˆ°äº†é“¾çš„æœ«ç«¯éƒ½å¾—ä¸åˆ°å¤„ç†ï¼Œæˆ–è€…å› ä¸ºæ²¡æœ‰æ­£ç¡®é…ç½®è€Œå¾—ä¸åˆ°å¤„ç†ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/wwwdc1012/article/details/83592323" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/83592323</a></li><li><a href="https://xuwujing.blog.csdn.net/article/category/7784915" target="_blank" rel="noopener">https://xuwujing.blog.csdn.net/article/category/7784915</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»ˆäºæ¥åˆ°äº†è¡Œä¸ºå‹æ¨¡å¼çš„å­¦ä¹ ï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯æœ€å¤šçš„ï¼Œæ…¢æ…¢å•ƒå§&lt;/p&gt;
&lt;h3 id=&quot;å‘½ä»¤æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å‘½ä»¤æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å‘½ä»¤æ¨¡å¼&quot;&gt;&lt;/a&gt;å‘½ä»¤æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯å–æ¶ˆçš„æ“ä½œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/07/24/command-responsibility/å‘½ä»¤æ¨¡å¼.png&quot; alt=&quot;å‘½ä»¤æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼ã€ç»„åˆæ¨¡å¼å’Œä»£ç†æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/21/flyweight-composite-proxy/"/>
    <id>http://yoursite.com/2019/07/21/flyweight-composite-proxy/</id>
    <published>2019-07-21T10:22:04.924Z</published>
    <updated>2019-07-22T16:43:37.114Z</updated>
    
    <content type="html"><![CDATA[<p>ç»“æ„å‹æ¨¡å¼è¿˜å‰©ä¸‹è¿™ä¸‰ä¸ªï¼Œä¸€èµ·è®°å½•ä¸‹æ¥å§</p><h3 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h3><p><strong>æè¿°ï¼šé€šè¿‡å…±äº«ä»¥ä¾¿æœ‰æ•ˆçš„æ”¯æŒå¤§é‡å°é¢—ç²’å¯¹è±¡ã€‚</strong></p><p><img src="/2019/07/21/flyweight-composite-proxy/äº«å…ƒæ¨¡å¼.png" alt="äº«å…ƒæ¨¡å¼"><br><a id="more"></a><br>äº«å…ƒæ¨¡å¼å¯ä»¥é¿å…å¤§é‡éå¸¸ç›¸ä¼¼ç±»çš„å¼€é”€ï¼Œåœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæœ‰æ—¶éœ€è¦ç”Ÿæˆå¤§é‡ç»†ç²’åº¦çš„ç±»å®ä¾‹æ¥è¡¨ç¤ºæ•°æ®ã€‚å¦‚æœèƒ½å‘ç°è¿™äº›å®ä¾‹é™¤äº†å‡ ä¸ªå‚æ•°å¤–åŸºæœ¬éƒ½æ˜¯ç›¸åŒçš„ï¼Œæœ‰æ—¶å°±èƒ½å¤Ÿå—å¤§å¹…åº¦åœ°å‡å°‘éœ€è¦å®ä¾‹åŒ–çš„ç±»çš„æ•°é‡ã€‚å¦‚æœèƒ½æŠŠé‚£äº›å‚æ•°ç§»åˆ°ç±»å®ä¾‹çš„å¤–é¢ï¼Œåœ¨æ–¹æ³•è°ƒç”¨æ—¶å°†ä»–ä»¬ä¼ é€’è¿›æ¥ï¼Œå°±å¯ä»¥é€šè¿‡å…±äº«å¤§å¹…åº¦å‡å°‘å•ä¸ªå®ä¾‹çš„æ•°ç›®ã€‚</p><p>ä»€ä¹ˆæ—¶å€™ç”¨äº«å…ƒæ¨¡å¼ï¼Ÿ<br>å¦‚æœä¸€ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨äº†å¤§é‡çš„å¯¹è±¡ï¼Œè€Œå¤§é‡çš„è¿™äº›å¯¹è±¡é€ æˆäº†å¾ˆå¤§çš„å­˜å‚¨å¼€é”€æ—¶å°±åº”è¯¥è€ƒè™‘ä½¿ç”¨ï¼›è¿˜æœ‰å°±æ˜¯å¯¹è±¡çš„å¤§å¤šæ•°çŠ¶æ€å¯ä»¥æ˜¯å¤–éƒ¨çŠ¶æ€ï¼Œå¦‚æœåˆ é™¤å¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡å–ä»£å¾ˆå¤šç»„å¯¹è±¡ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨äº«å…ƒæ¨¡å¼ã€‚</p><p>äº«å…ƒæ¨¡å¼çš„4ä¸ªè§’è‰²</p><ul><li><p>Flyweightï¼ˆæŠ½è±¡äº«å…ƒç±»ï¼‰ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œåœ¨æŠ½è±¡äº«å…ƒç±»ä¸­å£°æ˜äº†å…·ä½“äº«å…ƒç±»å…¬å…±çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥å‘å¤–ç•Œæä¾›äº«å…ƒå¯¹è±¡çš„å†…éƒ¨æ•°æ®ï¼ˆå†…éƒ¨çŠ¶æ€ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•æ¥è®¾ç½®å¤–éƒ¨æ•°æ®ï¼ˆå¤–éƒ¨çŠ¶æ€ï¼‰ã€‚</p></li><li><p>ConcreteFlyweightï¼ˆå…·ä½“äº«å…ƒç±»ï¼‰ï¼šå®ƒå®ç°äº†æŠ½è±¡äº«å…ƒç±»ï¼Œå…¶å®ä¾‹ç§°ä¸ºäº«å…ƒå¯¹è±¡ï¼›åœ¨å…·ä½“äº«å…ƒç±»ä¸­ä¸ºå†…éƒ¨çŠ¶æ€æä¾›äº†å­˜å‚¨ç©ºé—´ã€‚é€šå¸¸æˆ‘ä»¬å¯ä»¥ç»“åˆå•ä¾‹æ¨¡å¼æ¥è®¾è®¡å…·ä½“äº«å…ƒç±»ï¼Œä¸ºæ¯ä¸€ä¸ªå…·ä½“äº«å…ƒç±»æä¾›å”¯ä¸€çš„äº«å…ƒå¯¹è±¡ã€‚</p></li><li><p>UnsharedConcreteFlyweightï¼ˆéå…±äº«å…·ä½“äº«å…ƒç±»ï¼‰ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„æŠ½è±¡äº«å…ƒç±»çš„å­ç±»éƒ½éœ€è¦è¢«å…±äº«ï¼Œä¸èƒ½è¢«å…±äº«çš„å­ç±»å¯è®¾è®¡ä¸ºéå…±äº«å…·ä½“äº«å…ƒç±»ï¼›å½“éœ€è¦ä¸€ä¸ªéå…±äº«å…·ä½“äº«å…ƒç±»çš„å¯¹è±¡æ—¶å¯ä»¥ç›´æ¥é€šè¿‡å®ä¾‹åŒ–åˆ›å»ºã€‚</p></li><li><p>FlyweightFactoryï¼ˆäº«å…ƒå·¥å‚ç±»ï¼‰ï¼šäº«å…ƒå·¥å‚ç±»ç”¨äºåˆ›å»ºå¹¶ç®¡ç†äº«å…ƒå¯¹è±¡ï¼Œå®ƒé’ˆå¯¹æŠ½è±¡äº«å…ƒç±»ç¼–ç¨‹ï¼Œå°†å„ç§ç±»å‹çš„å…·ä½“äº«å…ƒå¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ªäº«å…ƒæ± ä¸­ï¼Œäº«å…ƒæ± ä¸€èˆ¬è®¾è®¡ä¸ºä¸€ä¸ªå­˜å‚¨â€œé”®å€¼å¯¹â€çš„é›†åˆï¼ˆä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç±»å‹çš„é›†åˆï¼‰ï¼Œå¯ä»¥ç»“åˆå·¥å‚æ¨¡å¼è¿›è¡Œè®¾è®¡ï¼›å½“ç”¨æˆ·è¯·æ±‚ä¸€ä¸ªå…·ä½“äº«å…ƒå¯¹è±¡æ—¶ï¼Œäº«å…ƒå·¥å‚æä¾›ä¸€ä¸ªå­˜å‚¨åœ¨äº«å…ƒæ± ä¸­å·²åˆ›å»ºçš„å®ä¾‹æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼ˆå¦‚æœä¸å­˜åœ¨çš„è¯ï¼‰ï¼Œè¿”å›æ–°åˆ›å»ºçš„å®ä¾‹å¹¶å°†å…¶å­˜å‚¨åœ¨äº«å…ƒæ± ä¸­ã€‚</p></li></ul><p>ä»¥æ£‹ç±»è¿åŠ¨ä¸ºä¾‹ï¼Œæ£‹å­å¯ä»¥çœ‹ä½œæŠ½è±¡äº«å…ƒç±»ï¼Œå›´æ£‹æ£‹å­ï¼Œäº”å­æ£‹æ£‹å­ï¼Œè±¡æ£‹æ£‹å­è¿™äº›å¯ä»¥çœ‹ä½œæ˜¯å…·ä½“äº«å…ƒç±»ã€‚å„ç±»æ£‹å­é™¤äº†å…·ä½“ä½ç½®(åœ¨æ­¤å¤„ä»¥(x,y)åæ ‡è¡¨ç¤º)è¿™ä¸€å¤–éƒ¨çŠ¶æ€ä¸åŒï¼Œå…¶ä»–å±æ€§éƒ½ç›¸åŒã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼ï¼Œæ¯”å¦‚åœ¨ä¸€å±€å›´æ£‹æ¸¸æˆä¸­ï¼Œåªæœ‰é»‘æ£‹å’Œç™½æ£‹è¿™ä¸¤ç§å…·ä½“äº«å…ƒç±»ï¼Œå¤§å¤§å‡å°‘äº†é‡å¤ç”Ÿæˆæ£‹å­çš„å†…å­˜å¼€é”€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Flyweight</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Piece</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteFlyweight</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoPieces</span> <span class="keyword">extends</span> <span class="title">Piece</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GoPieces</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        System.out.println(type + <span class="string">" ä¸‹åœ¨("</span> + x + <span class="string">","</span> + y + <span class="string">")å¤„ã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//FlyweightFactory</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PieceFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Piece&gt; pieceMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Piece <span class="title">getPiece</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!pieceMap.containsKey(key)) &#123;</span><br><span class="line">            pieceMap.put(key, <span class="keyword">new</span> GoPieces(key));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pieceMap.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumberOfPiecesType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pieceMap.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PieceFactory pieceFactory = <span class="keyword">new</span> PieceFactory();</span><br><span class="line">        Piece black1 = pieceFactory.getPiece(<span class="string">"é»‘æ£‹"</span>);</span><br><span class="line">        black1.setPosition(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        Piece write1 = pieceFactory.getPiece(<span class="string">"ç™½æ£‹"</span>);</span><br><span class="line">        write1.setPosition(<span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        Piece black2 = pieceFactory.getPiece(<span class="string">"é»‘æ£‹"</span>);</span><br><span class="line">        black2.setPosition(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        Piece write2 = pieceFactory.getPiece(<span class="string">"ç™½æ£‹"</span>);</span><br><span class="line">        write2.setPosition(<span class="number">3</span>, <span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">        Piece black3 = pieceFactory.getPiece(<span class="string">"é»‘æ£‹"</span>);</span><br><span class="line">        black3.setPosition(<span class="number">4</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(pieceFactory.getNumberOfPiecesType());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h3><p><strong>æè¿°ï¼šæŠŠå¤šä¸ªå¯¹è±¡ç»„æˆæ ‘çŠ¶ç»“æ„æ¥è¡¨ç¤ºå±€éƒ¨ä¸æ•´ä½“ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥ä¸€æ ·çš„å¯¹å¾…å•ä¸ªå¯¹è±¡å’Œå¯¹è±¡çš„ç»„åˆã€‚</strong></p><p><img src="/2019/07/21/flyweight-composite-proxy/ç»„åˆæ¨¡å¼.png" alt="ç»„åˆæ¨¡å¼"></p><p>ç»„åˆæ¨¡å¼è¦è§£å†³çš„æ˜¯<strong>æ•´ä½“å’Œéƒ¨åˆ†å¯ä»¥è¢«ä¸€è‡´å¯¹å¾…</strong>çš„é—®é¢˜</p><p>ä½•æ—¶ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼Ÿ<br>éœ€æ±‚ä¸­æ˜¯ä½“ç°éƒ¨åˆ†ä¸æ•´ä½“å±‚æ¬¡çš„ç»“æ„æ—¶ï¼Œå¸Œæœ›ç”¨æˆ·å¯ä»¥å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘ç”¨ç»„åˆæ¨¡å¼ã€‚</p><p>ç»„åˆæ¨¡å¼çš„3ä¸ªè§’è‰²</p><ul><li><p>Componentï¼ˆæŠ½è±¡æ„ä»¶ï¼‰ï¼šå®ƒå¯ä»¥æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œä¸ºå¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶å¯¹è±¡å£°æ˜æ¥å£ï¼Œåœ¨è¯¥è§’è‰²ä¸­å¯ä»¥åŒ…å«æ‰€æœ‰å­ç±»å…±æœ‰è¡Œä¸ºçš„å£°æ˜å’Œå®ç°ã€‚åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰äº†è®¿é—®åŠç®¡ç†å®ƒçš„å­æ„ä»¶çš„æ–¹æ³•ï¼Œå¦‚å¢åŠ å­æ„ä»¶ã€åˆ é™¤å­æ„ä»¶ã€è·å–å­æ„ä»¶ç­‰ã€‚</p></li><li><p>Leafï¼ˆå¶å­æ„ä»¶ï¼‰ï¼šå®ƒåœ¨ç»„åˆç»“æ„ä¸­è¡¨ç¤ºå¶å­èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„è¡Œä¸ºã€‚å¯¹äºé‚£äº›è®¿é—®åŠç®¡ç†å­æ„ä»¶çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¼‚å¸¸ç­‰æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p></li><li><p>Compositeï¼ˆå®¹å™¨æ„ä»¶ï¼‰ï¼šå®ƒåœ¨ç»„åˆç»“æ„ä¸­è¡¨ç¤ºå®¹å™¨èŠ‚ç‚¹å¯¹è±¡ï¼Œå®¹å™¨èŠ‚ç‚¹åŒ…å«å­èŠ‚ç‚¹ï¼Œå…¶å­èŠ‚ç‚¹å¯ä»¥æ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯å®¹å™¨èŠ‚ç‚¹ï¼Œå®ƒæä¾›ä¸€ä¸ªé›†åˆç”¨äºå­˜å‚¨å­èŠ‚ç‚¹ï¼Œå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬é‚£äº›è®¿é—®åŠç®¡ç†å­æ„ä»¶çš„æ–¹æ³•ï¼Œåœ¨å…¶ä¸šåŠ¡æ–¹æ³•ä¸­å¯ä»¥é€’å½’è°ƒç”¨å…¶å­èŠ‚ç‚¹çš„ä¸šåŠ¡æ–¹æ³•ã€‚</p></li></ul><p>ç»„åˆæ¨¡å¼çš„å…³é”®æ˜¯å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ„ä»¶ç±»ï¼Œå®ƒæ—¢å¯ä»¥ä»£è¡¨å¶å­ï¼Œåˆå¯ä»¥ä»£è¡¨å®¹å™¨ï¼Œè€Œå®¢æˆ·ç«¯é’ˆå¯¹è¯¥æŠ½è±¡æ„ä»¶ç±»è¿›è¡Œç¼–ç¨‹ï¼Œæ— é¡»çŸ¥é“å®ƒåˆ°åº•è¡¨ç¤ºçš„æ˜¯å¶å­è¿˜æ˜¯å®¹å™¨ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚åŒæ—¶å®¹å™¨å¯¹è±¡ä¸æŠ½è±¡æ„ä»¶ç±»ä¹‹é—´è¿˜å»ºç«‹ä¸€ä¸ªèšåˆå…³è”å…³ç³»ï¼Œåœ¨å®¹å™¨å¯¹è±¡ä¸­æ—¢å¯ä»¥åŒ…å«å¶å­ï¼Œä¹Ÿå¯ä»¥åŒ…å«å®¹å™¨ï¼Œä»¥æ­¤å®ç°é€’å½’ç»„åˆï¼Œå½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚</p><p>é€æ˜æ¨¡å¼ä¸å®‰å…¨æ¨¡å¼</p><ul><li><p>é€æ˜æ¨¡å¼åœ¨Componentä¸­å£°æ˜æ‰€æœ‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¶ç»“ç‚¹å’Œæç»“ç‚¹å¯¹äºå¤–ç•Œæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒä»¬å…·å¤‡å®Œå…¨ä¸€è‡´çš„è¡Œä¸ºæ¥å£ï¼Œä½†Leafæœ¬èº«ä¸å…·å¤‡add()ã€remove()åŠŸèƒ½ï¼Œæ‰€æœ‰å®ç°å®ƒä»¬æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p></li><li><p>å®‰å…¨æ¨¡å¼åœ¨Componentæ¥å£ä¸­ä¸å»å£°æ˜ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»Leafå°±ä¸éœ€è¦å®ç°å®ƒä»¬ï¼Œè€Œæ˜¯åœ¨Compositeä¸­å®ç°ï¼Œä¸è¿‡ç”±äºä¸å¤Ÿé€æ˜ï¼Œå¶ç»“ç‚¹å’Œæç»“ç‚¹æœ‰ä¸åŒçš„æ¥å£ï¼Œå®¢æˆ·ç«¯è°ƒç”¨æ—¶è¦åšç›¸åº”çš„åˆ¤æ–­ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Component</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Company</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Company</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Company company)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Company company)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> depth)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Composite</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteCompany</span> <span class="keyword">extends</span> <span class="title">Company</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Company&gt; companyList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteCompany</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Company company)</span> </span>&#123;</span><br><span class="line">        companyList.add(company);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Company company)</span> </span>&#123;</span><br><span class="line">        companyList.remove(company);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; depth; ++i) &#123;</span><br><span class="line">            System.out.print(<span class="string">'-'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="keyword">for</span> (Company component : companyList) &#123;</span><br><span class="line">            component.display(depth + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Company component : companyList) &#123;</span><br><span class="line">            component.work();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Leaf</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HRDepartment</span> <span class="keyword">extends</span> <span class="title">Company</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HRDepartment</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Company company)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Company company)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; depth; ++i) &#123;</span><br><span class="line">            System.out.print(<span class="string">'-'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">" å‘˜å·¥æ‹›è˜åŸ¹è®­ç®¡ç†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FinanceDepartment</span> <span class="keyword">extends</span> <span class="title">Company</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FinanceDepartment</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Company company)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Company company)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; depth; ++i) &#123;</span><br><span class="line">            System.out.print(<span class="string">'-'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">" å…¬å¸è´¢åŠ¡æ”¶æ”¯ç®¡ç†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Composite</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConcreteCompany root = <span class="keyword">new</span> ConcreteCompany(<span class="string">"åŒ—äº¬æ€»å…¬å¸"</span>);</span><br><span class="line">        root.add(<span class="keyword">new</span> HRDepartment(<span class="string">"æ€»å…¬å¸äººåŠ›èµ„æºéƒ¨"</span>));</span><br><span class="line">        root.add(<span class="keyword">new</span> FinanceDepartment(<span class="string">"æ€»å…¬å¸è´¢åŠ¡éƒ¨"</span>));</span><br><span class="line"></span><br><span class="line">        ConcreteCompany comp = <span class="keyword">new</span> ConcreteCompany(<span class="string">"ä¸Šæµ·åä¸œåˆ†å…¬å¸"</span>);</span><br><span class="line">        comp.add(<span class="keyword">new</span> HRDepartment(<span class="string">"åä¸œåˆ†å…¬å¸äººåŠ›èµ„æºéƒ¨"</span>));</span><br><span class="line">        comp.add(<span class="keyword">new</span> FinanceDepartment(<span class="string">"åä¸œåˆ†å…¬å¸è´¢åŠ¡éƒ¨"</span>));</span><br><span class="line">        root.add(comp);</span><br><span class="line"></span><br><span class="line">        ConcreteCompany comp1 = <span class="keyword">new</span> ConcreteCompany(<span class="string">"å—äº¬åŠäº‹å¤„"</span>);</span><br><span class="line">        comp.add(<span class="keyword">new</span> HRDepartment(<span class="string">"å—äº¬åŠäº‹å¤„äººåŠ›èµ„æºéƒ¨"</span>));</span><br><span class="line">        comp.add(<span class="keyword">new</span> FinanceDepartment(<span class="string">"å—äº¬åŠäº‹å¤„è´¢åŠ¡éƒ¨"</span>));</span><br><span class="line">        comp.add(comp1);</span><br><span class="line"></span><br><span class="line">        root.display(<span class="number">1</span>);</span><br><span class="line">        root.work();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h3><p><strong>æè¿°ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</strong></p><p><img src="/2019/07/21/flyweight-composite-proxy/ä»£ç†æ¨¡å¼.png" alt="ä»£ç†æ¨¡å¼"></p><p>ä»£ç†æ¨¡å¼çš„3ä¸ªè§’è‰²  </p><ul><li><p>Subjectï¼ˆæŠ½è±¡è§’è‰²ï¼‰ï¼šé€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»å£°æ˜çœŸå®è§’è‰²å®ç°çš„ä¸šåŠ¡æ–¹æ³•ã€‚</p></li><li><p>Proxyï¼ˆä»£ç†è§’è‰²ï¼‰ï¼šå®ç°æŠ½è±¡è§’è‰²ï¼Œæ˜¯çœŸå®è§’è‰²çš„ä»£ç†ï¼Œé€šè¿‡çœŸå®è§’è‰²çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•æ¥å®ç°æŠ½è±¡æ–¹æ³•ï¼Œå¹¶å¯ä»¥é™„åŠ è‡ªå·±çš„æ“ä½œã€‚</p></li><li><p>RealSubjectï¼ˆçœŸå®è§’è‰²ï¼‰ï¼šå®ç°æŠ½è±¡è§’è‰²ï¼Œå®šä¹‰çœŸå®è§’è‰²æ‰€è¦å®ç°çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¾›ä»£ç†è§’è‰²è°ƒç”¨ã€‚</p></li></ul><p>ä»£ç†æ¨¡å¼åˆåˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†</p><p>å…ˆæ¥ä¸¾ä¸ªä¾‹å­ï¼Œç”µè„‘å’Œæ‰‹æœºéƒ½å¯ä»¥è”ç½‘ï¼Œç°åœ¨æœ‰ä¸ªä»£ç†VPNä¹Ÿå¯ä»¥è”ç½‘ï¼Œæˆ‘ä»¬ç”¨VPNä»£ç†å®ç°ç¿»å¢™åŠŸèƒ½ï¼Œç”¨ä»£ç å®ç°å°±æ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Subject</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Networking</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">connection</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//RealSubject</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span> <span class="keyword">implements</span> <span class="title">Networking</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Computer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Computer</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">" å·²è”ç½‘ï¼Œä½†è®¿é—®ç½‘ç«™å—é™ã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmartPhone</span> <span class="keyword">implements</span> <span class="title">Networking</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SmartPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SmartPhone</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">" å·²è”ç½‘ï¼Œä½†è®¿é—®ç½‘ç«™å—é™ã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Proxy</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComputerVPNProxy</span> <span class="keyword">implements</span> <span class="title">Networking</span> </span>&#123;</span><br><span class="line">    Computer computer;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ComputerVPNProxy</span><span class="params">(Computer computer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.computer = computer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        computer.connection();</span><br><span class="line">        System.out.println(<span class="string">"å·²ç¿»å¢™ï¼Œå¼€å§‹ç½‘ä¸Šå†²æµªå§ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„ç”¨äº†é™æ€ä»£ç†çš„å®ç°æ–¹å¼ï¼Œå¯ä»¥çœ‹åˆ°å®ç°èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æœ‰ä¸ªç¼ºç‚¹ï¼Œå¦‚æœæˆ‘ä»¬ä¸ç¡®å®šéœ€è¦ä»£ç†æŸä¸ªçœŸå®ç±»çš„æ—¶å€™ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”åœ¨ç±»è¿‡å¤šçš„æ—¶å€™ï¼Œç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦ç»´æŠ¤ï¼Œä¼šä½¿ç³»ç»Ÿå¤æ‚åº¦æå‡ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæ›´åŠ éº»çƒ¦ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åŠ¨æ€ä»£ç†æ¥è¿›è¡Œè§£å†³ã€‚</p><p>è¿™é‡Œè®°å½•ä¸¤ç§åŠ¨æ€ä»£ç†çš„æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDKåŠ¨æ€ä»£ç†</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DynamicVPNProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Networking networking;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DynamicVPNProxy</span><span class="params">(Networking networking)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.networking = networking;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Object result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"connection"</span>.equals(method.getName())) &#123;</span><br><span class="line">            result = method.invoke(networking, args);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"å·²ç¿»å¢™ï¼Œå¼€å§‹ç½‘ä¸Šå†²æµªå§ï¼"</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cglibä»£ç†</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CglibVPNProxy</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object target;<span class="comment">//æ³¨æ„ targetæœ€å¥½å†™ä¸€ä¸ªæ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CglibVPNProxy</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getVPNInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1å·¥å…·ç±»</span></span><br><span class="line">        Enhancer en = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        <span class="comment">//2è®¾ç½®çˆ¶ç±»</span></span><br><span class="line">        en.setSuperclass(target.getClass());</span><br><span class="line">        <span class="comment">//3è®¾ç½®å›è°ƒå‡½æ•°</span></span><br><span class="line">        en.setCallback(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">//4åˆ›å»ºå­ç±»(ä»£ç†å¯¹è±¡)</span></span><br><span class="line">        <span class="keyword">return</span> en.create();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Object result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"connection"</span>.equals(method.getName())) &#123;</span><br><span class="line">            result = method.invoke(target, objects);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"å·²ç¿»å¢™ï¼Œå¼€å§‹ç½‘ä¸Šå†²æµªå§ï¼"</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Computer computer = <span class="keyword">new</span> Computer(<span class="string">"IBN-5100"</span>);</span><br><span class="line">        computer.connection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é™æ€ä»£ç†</span></span><br><span class="line">        Networking computerVPN = <span class="keyword">new</span> ComputerVPNProxy(computer);</span><br><span class="line">        computerVPN.connection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//JDKåŠ¨æ€ä»£ç†</span></span><br><span class="line">        Networking smartPhoneVPN = (Networking) java.lang.reflect.Proxy.newProxyInstance(ClassLoader.getSystemClassLoader(),</span><br><span class="line">                <span class="keyword">new</span> Class[]&#123;Networking.class&#125;, <span class="keyword">new</span> DynamicVPNProxy(<span class="keyword">new</span> SmartPhone(<span class="string">"IPhoneX"</span>)));</span><br><span class="line">        smartPhoneVPN.connection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//CglibåŠ¨æ€ä»£ç†</span></span><br><span class="line">        Networking smartPhoneVPN1 = (Networking) <span class="keyword">new</span> CglibVPNProxy(<span class="keyword">new</span> SmartPhone(<span class="string">"MI6"</span>)).getVPNInstance();</span><br><span class="line">        smartPhoneVPN1.connection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/wwwdc1012/article/category/7152423" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/category/7152423</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»“æ„å‹æ¨¡å¼è¿˜å‰©ä¸‹è¿™ä¸‰ä¸ªï¼Œä¸€èµ·è®°å½•ä¸‹æ¥å§&lt;/p&gt;
&lt;h3 id=&quot;äº«å…ƒæ¨¡å¼&quot;&gt;&lt;a href=&quot;#äº«å…ƒæ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;äº«å…ƒæ¨¡å¼&quot;&gt;&lt;/a&gt;äº«å…ƒæ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šé€šè¿‡å…±äº«ä»¥ä¾¿æœ‰æ•ˆçš„æ”¯æŒå¤§é‡å°é¢—ç²’å¯¹è±¡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/07/21/flyweight-composite-proxy/äº«å…ƒæ¨¡å¼.png&quot; alt=&quot;äº«å…ƒæ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°æ¨¡å¼å’Œå¤–è§‚æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/19/decorator-facade/"/>
    <id>http://yoursite.com/2019/07/19/decorator-facade/</id>
    <published>2019-07-19T06:24:08.650Z</published>
    <updated>2019-07-19T08:36:04.184Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h3><p><strong>æè¿°ï¼šå‘æŸä¸ªå¯¹è±¡åŠ¨æ€åœ°æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ã€‚ä¿®é¥°æ¨¡å¼æ˜¯é™¤ç±»ç»§æ‰¿å¤–å¦ä¸€ç§æ‰©å±•åŠŸèƒ½çš„æ–¹æ³•ã€‚</strong><br><img src="/2019/07/19/decorator-facade/è£…é¥°æ¨¡å¼.png" alt="è£…é¥°æ¨¡å¼"><br><a id="more"></a><br>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è£…é¥°æ¨¡å¼ï¼Ÿ<br>è£…é¥°æ¨¡å¼æ˜¯ä¸ºå·²æœ‰åŠŸèƒ½åŠ¨æ€æ·»åŠ æ›´å¤šåŠŸèƒ½çš„ä¸€ç§æ–¹å¼ï¼Œå½“ç³»ç»Ÿéœ€è¦æ–°åŠŸèƒ½æ—¶ï¼Œæ˜¯å‘æ—§ç±»æ·»åŠ æ–°çš„ä»£ç ã€‚è¿™äº›æ–°åŠ çš„ä»£ç é€šå¸¸è£…é¥°äº†åŸæœ‰ç±»çš„<strong>æ ¸å¿ƒèŒè´£æˆ–ä¸»è¦è¡Œä¸º</strong>ï¼Œåœ¨ä¸»ç±»ä¸­åŠ å…¥äº†æ–°çš„å­—æ®µã€æ–¹æ³•ã€é€»è¾‘ï¼Œä»è€Œå¢åŠ äº†ä¸»ç±»çš„å¤æ‚åº¦ï¼Œè€Œè¿™äº›æ–°åŠ å…¥çš„ä¸œè¥¿ä»…ä»…æ˜¯ä¸ºäº†æ»¡è¶³ä¸€äº›åªåœ¨ç‰¹æ®Šéœ€æ±‚ä¸‹æ‰ä¼šæ‰§è¡Œçš„è¡Œä¸ºã€‚<br>è£…é¥°æ¨¡å¼æä¾›äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒæŠŠæ¯ä¸ªè¦è£…é¥°çš„åŠŸèƒ½æ”¾åœ¨å•ç‹¬çš„ç±»ä¸­ï¼Œå¹¶è®©è¿™ä¸ªç±»åŒ…è£…å®ƒæ‰€è¦è£…é¥°çš„å¯¹è±¡ï¼Œå› æ­¤ï¼Œå½“éœ€è¦æ‰§è¡Œç‰¹æ®Šè¡Œä¸ºæ—¶ï¼Œå®¢æˆ·ç«¯ä»£ç å°±å¯ä»¥æ ¹æ®éœ€è¦æœ‰é€‰æ‹©åœ°ï¼ŒæŒ‰é¡ºåºåœ°åŒ…è£…å¯¹è±¡ã€‚<br>è£…é¥°æ¨¡å¼æœ‰4ä¸ªé‡è¦è§’è‰²</p><ul><li><p>Componentï¼ˆæŠ½è±¡æ„ä»¶ï¼‰ï¼šå®ƒæ˜¯å…·ä½“æ„ä»¶å’ŒæŠ½è±¡è£…é¥°ç±»çš„å…±åŒçˆ¶ç±»ï¼Œå£°æ˜äº†åœ¨å…·ä½“æ„ä»¶ä¸­å®ç°çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå®ƒçš„å¼•å…¥å¯ä»¥ä½¿å®¢æˆ·ç«¯ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†æœªè¢«è£…é¥°çš„å¯¹è±¡ä»¥åŠè£…é¥°ä¹‹åçš„å¯¹è±¡ï¼Œå®ç°å®¢æˆ·ç«¯çš„é€æ˜æ“ä½œã€‚</p></li><li><p>ConcreteComponentï¼ˆå…·ä½“æ„ä»¶ï¼‰ï¼šå®ƒæ˜¯æŠ½è±¡æ„ä»¶ç±»çš„å­ç±»ï¼Œç”¨äºå®šä¹‰å…·ä½“çš„æ„ä»¶å¯¹è±¡ï¼Œå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œè£…é¥°å™¨å¯ä»¥ç»™å®ƒå¢åŠ é¢å¤–çš„èŒè´£ï¼ˆæ–¹æ³•ï¼‰ã€‚</p></li><li><p>Decoratorï¼ˆæŠ½è±¡è£…é¥°ç±»ï¼‰ï¼šå®ƒä¹Ÿæ˜¯æŠ½è±¡æ„ä»¶ç±»çš„å­ç±»ï¼Œç”¨äºç»™å…·ä½“æ„ä»¶å¢åŠ èŒè´£ï¼Œä½†æ˜¯å…·ä½“èŒè´£åœ¨å…¶å­ç±»ä¸­å®ç°ã€‚å®ƒç»´æŠ¤ä¸€ä¸ªæŒ‡å‘æŠ½è±¡æ„ä»¶å¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡è¯¥å¼•ç”¨å¯ä»¥è°ƒç”¨è£…é¥°ä¹‹å‰æ„ä»¶å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡å…¶å­ç±»æ‰©å±•è¯¥æ–¹æ³•ï¼Œä»¥è¾¾åˆ°è£…é¥°çš„ç›®çš„ã€‚</p></li><li><p>ConcreteDecoratorï¼ˆå…·ä½“è£…é¥°ç±»ï¼‰ï¼šå®ƒæ˜¯æŠ½è±¡è£…é¥°ç±»çš„å­ç±»ï¼Œè´Ÿè´£å‘æ„ä»¶æ·»åŠ æ–°çš„èŒè´£ã€‚æ¯ä¸€ä¸ªå…·ä½“è£…é¥°ç±»éƒ½å®šä¹‰äº†ä¸€äº›æ–°çš„è¡Œä¸ºï¼Œå®ƒå¯ä»¥è°ƒç”¨åœ¨æŠ½è±¡è£…é¥°ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå¹¶å¯ä»¥å¢åŠ æ–°çš„æ–¹æ³•ç”¨ä»¥æ‰©å……å¯¹è±¡çš„è¡Œä¸ºã€‚</p></li></ul><p>å¦‚æœåªæœ‰ä¸€ä¸ªConcreteComponentï¼Œæ²¡æœ‰Componentï¼Œé‚£Decoratorå¯ä»¥æ˜¯ConcreteComponentçš„ä¸€ä¸ªå­ç±»ï¼ŒåŒç†ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªConcreteDecoratorï¼Œé‚£å°±æ²¡æœ‰å¿…è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„Decoratorç±»ï¼Œè€Œå¯ä»¥æŠŠDecoratorå’ŒConcreteDecoratoråœ¨è´£ä»»åˆå¹¶æˆä¸€ä¸ªç±»</p><p>ä¸¾ä¸ªèŒ¶é¥®å“çš„ä¾‹å­ï¼ŒèŒ¶é¥®å“å¯ä»¥åˆ†ä¸ºå¥¶èŒ¶å’ŒæœèŒ¶ä¸¤å¤§ä¸»ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç»™é¥®å“åŠ æ–™ï¼Œæ—¢å¯ä»¥ä¸åŠ ï¼Œä¹Ÿå¯ä»¥æ¥ä»½å…¨å®¶ç¦ï¼Œè¿˜å¯ä»¥åªé€‰å…¶ä¸­å‡ ç§åŠ æ–™ã€‚åƒè¿™ç§å¤šå˜çš„éœ€æ±‚ï¼Œå°±å¯ä»¥ç”¨è£…é¥°æ¨¡å¼æ¥è£…é¥°èŒ¶é¥®å“</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Component</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Tea</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> String <span class="title">getType</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">cost</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteComponent</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MilkTea</span> <span class="keyword">extends</span> <span class="title">Tea</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å¥¶èŒ¶"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FruitTea</span> <span class="keyword">extends</span> <span class="title">Tea</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"æœèŒ¶"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Decorator</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AddStuff</span> <span class="keyword">extends</span> <span class="title">Tea</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Tea tea;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AddStuff</span><span class="params">(Tea tea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tea = tea;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tea.getType();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tea.cost();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteDecorator</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pearl</span> <span class="keyword">extends</span> <span class="title">AddStuff</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pearl</span><span class="params">(Tea tea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(tea);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"çç "</span> + <span class="keyword">super</span>.getType();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.cost() + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pudding</span> <span class="keyword">extends</span> <span class="title">AddStuff</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pudding</span><span class="params">(Tea tea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(tea);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å¸ƒä¸"</span> + <span class="keyword">super</span>.getType();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.cost() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»ç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Tea tea1 = <span class="keyword">new</span> Pudding(<span class="keyword">new</span> Pearl(<span class="keyword">new</span> MilkTea()));</span><br><span class="line">        Tea tea2 = <span class="keyword">new</span> Pearl(<span class="keyword">new</span> Pudding(<span class="keyword">new</span> FruitTea()));</span><br><span class="line">        System.out.println(<span class="string">"ç‚¹äº†ä¸€æ¯ "</span> + tea1.getType() + <span class="string">"ï¼Œå”®ä»·"</span> + tea1.cost() + <span class="string">"å…ƒã€‚"</span>);</span><br><span class="line">        System.out.println(<span class="string">"ç‚¹äº†ä¸€æ¯ "</span> + tea2.getType() + <span class="string">"ï¼Œå”®ä»·"</span> + tea2.cost() + <span class="string">"å…ƒã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šè£…é¥°æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯æŠŠç±»ä¸­çš„è£…é¥°åŠŸèƒ½ä»ç±»ä¸­æ¬ç§»å‡ºå»ï¼Œç®€åŒ–åŸæœ‰ç±»ï¼Œæœ‰æ•ˆåœ°æŠŠç±»ä¸­çš„æ ¸å¿ƒèŒè´£å’Œè£…é¥°åŠŸèƒ½åŒºåˆ†å¼€äº†ã€‚</p><h3 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h3><p><strong>æè¿°ï¼šä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œ å¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</strong></p><p><img src="/2019/07/19/decorator-facade/å¤–è§‚æ¨¡å¼.png" alt="å¤–è§‚æ¨¡å¼"></p><p>å¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§ä½¿ç”¨é¢‘ç‡éå¸¸é«˜çš„ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡å¼•å…¥ä¸€ä¸ªå¤–è§‚è§’è‰²æ¥ç®€åŒ–å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿä¹‹é—´çš„äº¤äº’ï¼Œä¸ºå¤æ‚çš„å­ç³»ç»Ÿè°ƒç”¨æä¾›ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ï¼Œé™ä½å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯çš„è€¦åˆåº¦ï¼Œä¸”å®¢æˆ·ç«¯è°ƒç”¨éå¸¸æ–¹ä¾¿ã€‚</p><p>å¤–è§‚æ¨¡å¼åˆç§°ä¸ºé—¨é¢æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚å¤–è§‚æ¨¡å¼æ˜¯è¿ªç±³ç‰¹æ³•åˆ™çš„ä¸€ç§å…·ä½“å®ç°ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªæ–°çš„å¤–è§‚è§’è‰²å¯ä»¥é™ä½åŸæœ‰ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶é™ä½å®¢æˆ·ç±»ä¸å­ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚</p><p>å¤–è§‚æ¨¡å¼åŒ…å«å¦‚ä¸‹2ä¸ªè§’è‰²ï¼š</p><ul><li><p>Facadeï¼ˆå¤–è§‚è§’è‰²ï¼‰ï¼šåœ¨å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨å®ƒçš„æ–¹æ³•ï¼Œåœ¨å¤–è§‚è§’è‰²ä¸­å¯ä»¥çŸ¥é“ç›¸å…³çš„ï¼ˆä¸€ä¸ªæˆ–è€…å¤šä¸ªï¼‰å­ç³»ç»Ÿçš„åŠŸèƒ½å’Œè´£ä»»ï¼›åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®ƒå°†æ‰€æœ‰ä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚å§”æ´¾åˆ°ç›¸åº”çš„å­ç³»ç»Ÿå»ï¼Œä¼ é€’ç»™ç›¸åº”çš„å­ç³»ç»Ÿå¯¹è±¡å¤„ç†ã€‚</p></li><li><p>SubSystemï¼ˆå­ç³»ç»Ÿè§’è‰²ï¼‰ï¼šåœ¨è½¯ä»¶ç³»ç»Ÿä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­ç³»ç»Ÿè§’è‰²ï¼Œæ¯ä¸€ä¸ªå­ç³»ç»Ÿå¯ä»¥ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»çš„é›†åˆï¼Œå®ƒå®ç°å­ç³»ç»Ÿçš„åŠŸèƒ½ï¼›æ¯ä¸€ä¸ªå­ç³»ç»Ÿéƒ½å¯ä»¥è¢«å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨ï¼Œæˆ–è€…è¢«å¤–è§‚è§’è‰²è°ƒç”¨ï¼Œå®ƒå¤„ç†ç”±å¤–è§‚ç±»ä¼ è¿‡æ¥çš„è¯·æ±‚ï¼›å­ç³»ç»Ÿå¹¶ä¸çŸ¥é“å¤–è§‚çš„å­˜åœ¨ï¼Œå¯¹äºå­ç³»ç»Ÿè€Œè¨€ï¼Œå¤–è§‚è§’è‰²ä»…ä»…æ˜¯å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯è€Œå·²ã€‚</p></li></ul><p>å¤–è§‚æ¨¡å¼çš„ç›®çš„ä¸æ˜¯ç»™äºˆå­ç³»ç»Ÿæ·»åŠ æ–°çš„åŠŸèƒ½æ¥å£ï¼Œè€Œæ˜¯ä¸ºäº†è®©å¤–éƒ¨å‡å°‘ä¸å­ç³»ç»Ÿå†…å¤šä¸ªæ¨¡å—çš„äº¤äº’ï¼Œæ¾æ•£è€¦åˆï¼Œä»è€Œè®©å¤–éƒ¨èƒ½å¤Ÿæ›´ç®€å•åœ°ä½¿ç”¨å­ç³»ç»Ÿã€‚</p><p>å¤–è§‚æ¨¡å¼çš„æœ¬è´¨æ˜¯ï¼š<strong>å°è£…äº¤äº’ï¼Œç®€åŒ–è°ƒç”¨</strong>ã€‚</p><p>ä»€ä¹ˆæ—¶å€™ç”¨å¤–è§‚æ¨¡å¼ï¼Ÿ  </p><ul><li><p>åœ¨è®¾è®¡åˆæœŸé˜¶æ®µï¼Œåº”è¯¥æœ‰æ„è¯†çš„å°†ä¸åŒçš„ä¸¤ä¸ªå±‚åˆ†ç¦»ï¼Œæ¯”å¦‚daoå’Œserviceä¹‹é—´åˆ†å±‚ï¼Œserviceå’Œcontrollerä¹‹é—´åˆ†å±‚ã€‚</p></li><li><p>åœ¨å¼€å‘é˜¶æ®µï¼Œå­ç³»ç»Ÿå¾€å¾€å› ä¸ºä¸æ–­çš„é‡æ„æ¼”åŒ–è€Œå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå¢åŠ Facadeå¯ä»¥æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œå‡å°‘å®ƒä»¬ä¹‹é—´çš„ä¾èµ–ã€‚</p></li><li><p>ç»´æŠ¤é—ç•™çš„å¤§å‹ç³»ç»Ÿæ—¶ï¼Œå¯èƒ½è¿™ä¸ªç³»ç»Ÿä»¥åŠå¾ˆéš¾ç»´æŠ¤å’Œæ‰©å±•äº†ï¼Œå¢åŠ Facadeï¼Œæ¥æä¾›è®¾è®¡ç²—ç³™æˆ–é«˜å¤æ‚çš„é—ç•™ä»£ç æ¯”è¾ƒæ¸…æ™°ç®€å•çš„æ¥å£ï¼Œè®©æ–°ç³»ç»Ÿä¸Facadeå¯¹è±¡äº¤äº’ï¼ŒFacadeä¸é—ç•™ä»£ç äº¤äº’æ‰€æœ‰å¤æ‚çš„å·¥ä½œã€‚</p></li></ul><p>å¤–è§‚æ¨¡å¼ååˆ†ç®€å•ï¼Œåˆå¸¸ç”¨ï¼Œæ˜¯å¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ã€‚å› æ­¤ç›´æ¥ä¸Šä»£ç ï¼Œä¸å¤šBB</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Fund fund = <span class="keyword">new</span> Fund();</span><br><span class="line">        fund.buyFund();</span><br><span class="line">        fund.sellFund();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Facade</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fund</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Stock stock;</span><br><span class="line">    <span class="keyword">private</span> NationalDebt nationalDebt;</span><br><span class="line">    <span class="keyword">private</span> Realty realty;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fund</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stock = <span class="keyword">new</span> Stock();</span><br><span class="line">        nationalDebt = <span class="keyword">new</span> NationalDebt();</span><br><span class="line">        realty = <span class="keyword">new</span> Realty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buyFund</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stock.buy();</span><br><span class="line">        nationalDebt.buy();</span><br><span class="line">        realty.buy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sellFund</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stock.sell();</span><br><span class="line">        nationalDebt.sell();</span><br><span class="line">        realty.sell();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SubSystem</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å–è‚¡ç¥¨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¹°è‚¡ç¥¨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NationalDebt</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å–å›½å€º"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¹°å›½å€º"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Realty</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å–æˆ¿äº§"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¹°æˆ¿äº§"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/wwwdc1012/article/details/82764333" target="_blank" rel="noopener">https://blog.csdn.net/wwwdc1012/article/details/82764333</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;è£…é¥°æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è£…é¥°æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è£…é¥°æ¨¡å¼&quot;&gt;&lt;/a&gt;è£…é¥°æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šå‘æŸä¸ªå¯¹è±¡åŠ¨æ€åœ°æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ã€‚ä¿®é¥°æ¨¡å¼æ˜¯é™¤ç±»ç»§æ‰¿å¤–å¦ä¸€ç§æ‰©å±•åŠŸèƒ½çš„æ–¹æ³•ã€‚&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/2019/07/19/decorator-facade/è£…é¥°æ¨¡å¼.png&quot; alt=&quot;è£…é¥°æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼å’Œæ¡¥æ¥æ¨¡å¼</title>
    <link href="http://yoursite.com/2019/07/17/adapter-bridge/"/>
    <id>http://yoursite.com/2019/07/17/adapter-bridge/</id>
    <published>2019-07-17T11:35:00.693Z</published>
    <updated>2019-07-17T13:23:49.225Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦å®Œäº†åˆ›å»ºå‹æ¨¡å¼ï¼Œè¯¥å­¦ç»“æ„å‹æ¨¡å¼äº†ã€‚</p><h3 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h3><p><strong>æè¿°ï¼šå°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£è¡¨ç¤ºã€‚é€‚é…å™¨æ¨¡å¼å¯ä»¥æ¶ˆé™¤ç”±äºæ¥å£ä¸åŒ¹é…æ‰€é€ æˆçš„ç±»å…¼å®¹æ€§é—®é¢˜ã€‚</strong><br><img src="/2019/07/17/adapter-bridge/é€‚é…å™¨æ¨¡å¼.jpg" alt="é€‚é…å™¨æ¨¡å¼"><br><a id="more"></a></p><ul><li>è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ<br>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œç³»ç»Ÿçš„æ•°æ®å’Œè¡Œä¸ºéƒ½æ­£ç¡®ï¼Œä½†æ¥å£ä¸ç¬¦ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘ç”¨é€‚é…å™¨ï¼Œç›®çš„æ˜¯ä½¿æ§åˆ¶èŒƒå›´ä¹‹å¤–çš„ä¸€ä¸ªåŸæœ‰å¯¹è±¡ä¸æŸä¸ªæ¥å£åŒ¹é…ã€‚é€‚é…å™¨æ¨¡å¼ä¸»è¦åº”ç”¨äºå¸Œæœ›å¤ç”¨ä¸€äº›ç°å­˜çš„ç±»ï¼Œä½†æ˜¯æ¥å£åˆä¸å¤ç”¨ç¯å¢ƒè¦æ±‚ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæ¯”å¦‚åœ¨éœ€è¦å¯¹æ—©æœŸä»£ç å¤ç”¨ä¸€äº›åŠŸèƒ½ç­‰åº”ç”¨ä¸Šå¾ˆæœ‰å®é™…ä»·å€¼ã€‚</li><li>ä½•æ—¶ä½¿ç”¨é€‚é…å™¨ï¼Ÿ<br>åœ¨ä½ æƒ³ä½¿ç”¨ä¸€äº›å·²ç»å­˜åœ¨çš„ç±»ï¼Œè¿™äº›ç±»çš„ä½œç”¨å’Œå¤ç”¨ç¯å¢ƒé‡Œå…¶ä»–çš„ç±»åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†å®ƒä»¬çš„æ¥å£ä¸åŒæ—¶ï¼Œè€ƒè™‘ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚å®¢æˆ·ç«¯ä»£ç å¯ä»¥ç»Ÿä¸€è°ƒç”¨åŒä¸€æ¥å£ï¼Œè¿™æ ·æ›´ç®€å•ã€ç›´æ¥ã€ç´§å‡‘ã€‚</li><li>æ³¨æ„äº‹é¡¹ï¼š<br>å…¶å®ä½¿ç”¨é€‚é…å™¨æ¨¡å¼æ˜¯æ— å¥ˆä¹‹ä¸¾ï¼Œæœ‰ç‚¹â€œäº¡ç¾Šè¡¥ç‰¢â€çš„æ„Ÿè§‰ã€‚æˆ‘ä»¬ä¸åº”è¯¥åœ¨è®¾è®¡é˜¶æ®µä½¿ç”¨å®ƒï¼Œå› ä¸ºåœ¨åˆæœŸï¼Œæ²¡æœ‰å¿…è¦æŠŠåŠŸèƒ½ç›¸ä¼¼çš„ç±»çš„æ¥å£è®¾è®¡å¾—ä¸åŒï¼Œå°±ç®—å‘ç°æœ‰è®¾è®¡ä¸åŒçš„åœ°æ–¹ï¼Œä¹Ÿåº”è¯¥åŠæ—¶é‡æ„ç»Ÿä¸€æ¥å£ã€‚å½“æˆ‘ä»¬å› ä¸åŒå¼€å‘äººå‘˜ã€äº§å“ã€å‚å®¶è€Œé€ æˆåŠŸèƒ½ç±»ä¼¼è€Œæ¥å£ä¸åŒçš„æƒ…å†µï¼Œ<strong>åŒæ–¹éƒ½ä¸å¤ªå®¹æ˜“ä¿®æ”¹è‡ªå·±çš„æ¥å£æ—¶</strong>ï¼Œæ‰æ˜¯é€‚é…å™¨æ¨¡å¼å¤§å±•æ‹³è„šçš„æ—¶å€™ã€‚</li></ul><p>ä¸¾ä¸ªç¿»è¯‘å™¨çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç”¨ä¸¤ç§è¯­è¨€è¯´åŒä¸€å¥è¯æ—¶ï¼Œæ„æ€æ˜¯ä¸€æ ·çš„ï¼Œä½†è¯´å‡ºæ¥ï¼Œå‘å‡ºçš„å£°éŸ³è‚¯å®šæœ‰å¾ˆå¤§åŒºåˆ«ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™å¥è¯çš„æ„æ€çœ‹ä½œæ˜¯â€œåŠŸèƒ½ç±»ä¼¼â€ï¼Œè€Œè¯´å‡ºçš„è¯è¯­çœ‹ä½œæ˜¯â€œæ¥å£ä¸åŒâ€ï¼Œæˆ‘ä»¬å‡è®¾åŒæ–¹éƒ½ä¸èƒ½å¬æ‡‚å¯¹æ–¹çš„è¯­è¨€ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªç¿»è¯‘å™¨äº†ï¼Œå®ƒå……å½“é€‚é…å™¨çš„è§’è‰²ã€‚<br>ç”¨ä»£ç è¡¨ç¤ºå¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Target</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Chinese</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">speakChinese</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteTarget</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChineseSpeaker</span> <span class="keyword">implements</span> <span class="title">Chinese</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speakChinese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä½ åƒåˆé¥­äº†å—"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Adaptee</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JapaneseSpeaker</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speakJapanese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ˜¼é£Ÿã¯ã‚‚ã†é£Ÿã¹ã¾ã—ãŸã‹"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨è¿™ä¸ªä¸­å›½äººæƒ³å¬æ‡‚æ—¥æœ¬äººè¯´çš„è¯ï¼Œéœ€è¦ä¸€ä¸ªç¿»è¯‘å™¨(Adapter),å®ƒæœ‰ä¸¤ç§å®ç°æ–¹å¼</p><h4 id="ç±»é€‚é…å™¨"><a href="#ç±»é€‚é…å™¨" class="headerlink" title="ç±»é€‚é…å™¨"></a>ç±»é€‚é…å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Adapter by class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JapaneseToChineseTranslatorByClass</span> <span class="keyword">extends</span> <span class="title">JapaneseSpeaker</span> <span class="keyword">implements</span> <span class="title">Chinese</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speakChinese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.speakJapanese();</span><br><span class="line">        System.out.println(<span class="string">"ç»è¿‡ç¿»è¯‘ï¼Œä¸­å›½äººå¬å¾—æ‡‚ï¼Œè¡¨è¾¾çš„æ„æ€ä¸€æ ·"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¥å£é€‚é…å™¨"><a href="#æ¥å£é€‚é…å™¨" class="headerlink" title="æ¥å£é€‚é…å™¨"></a>æ¥å£é€‚é…å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Adapter by interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JapaneseToChineseTranslatorByInterface</span> <span class="keyword">implements</span> <span class="title">Chinese</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JapaneseSpeaker japaneseSpeaker;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JapaneseToChineseTranslatorByInterface</span><span class="params">(JapaneseSpeaker japaneseSpeaker)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.japaneseSpeaker = japaneseSpeaker;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speakChinese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        japaneseSpeaker.speakJapanese();</span><br><span class="line">        System.out.println(<span class="string">"ç»è¿‡ç¿»è¯‘ï¼Œä¸­å›½äººå¬å¾—æ‡‚ï¼Œè¡¨è¾¾çš„æ„æ€ä¸€æ ·"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»–ä»¬çš„è°ƒç”¨æ˜¯è¿™æ ·å­çš„<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Chinese chinese = <span class="keyword">new</span> ChineseSpeaker();</span><br><span class="line">        chinese.speakChinese();</span><br><span class="line"></span><br><span class="line">        Chinese chinese1 = <span class="keyword">new</span> JapaneseToChineseTranslatorByInterface(<span class="keyword">new</span> JapaneseSpeaker());</span><br><span class="line">        chinese1.speakChinese();</span><br><span class="line"></span><br><span class="line">        Chinese chinese2 = <span class="keyword">new</span> JapaneseToChineseTranslatorByClass();</span><br><span class="line">        chinese2.speakChinese();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯çœ‹åˆ°çš„éƒ½æ˜¯Chineseç±»å‹çš„å¼•ç”¨ï¼Œéƒ½è°ƒç”¨äº†ç»Ÿä¸€çš„speakChinese()æ¥å£ã€‚<br>æ€»ç»“ï¼šå¦‚æœèƒ½äº‹å…ˆé¢„é˜²æ¥å£ä¸åŒé—®é¢˜ï¼Œä¸åŒ¹é…çš„é—®é¢˜å°±ä¸ä¼šå‘ç”Ÿï¼Œå°æ¥å£ä¸ç»Ÿä¸€ï¼ŒåŠæ—¶é‡æ„é—®é¢˜ä¸è‡³äºæ‰©å¤§ï¼Œåªæœ‰ç¢°åˆ°æ— æ³•æ”¹å˜åŸæœ‰è®¾è®¡å’Œä»£ç çš„æƒ…å†µæ—¶ï¼Œæ‰è€ƒè™‘ç”¨é€‚é…å™¨ï¼Œå¦‚æœæ— è§†åœºåˆç›²ç›®ä½¿ç”¨ï¼Œå…¶å®æ˜¯æœ¬æœ«å€’ç½®äº†ã€‚</p><h3 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h3><p><strong>æè¿°ï¼šå°†ä¸€ä¸ªæŠ½è±¡ä¸å®ç°è§£è€¦ï¼Œä»¥ä¾¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚</strong><br><img src="/2019/07/17/adapter-bridge/æ¡¥æ¥æ¨¡å¼.png" alt="æ¡¥æ¥æ¨¡å¼"><br>å­—é¢çš„æ„æ€è§£è¯»å°±æ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´çš„æ¡¥æ¢å¯¹ä¸¤è¾¹çš„ä¸œè¥¿è¿›è¡Œå…³è”èµ·æ¥ï¼Œä½†æ˜¯å…³è”çš„ä¸¤è€…ä¹‹é—´åˆä¸ç›¸äº’å½±å“ã€‚<br>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹åœ¨è®²åˆ°æ­¤èŠ‚æ—¶æåˆ°äº†åˆæˆ/å¤ç”¨åŸåˆ™</p><blockquote><p>åˆæˆ/å¤ç”¨åŸåˆ™ï¼šä¼˜å…ˆä½¿ç”¨å¯¹è±¡çš„åˆæˆæˆ–èšåˆï¼Œè€Œä¸æ˜¯ç±»ç»§æ‰¿ã€‚</p></blockquote><p>åˆæˆå’Œèšåˆéƒ½æ˜¯å…³è”çš„ç‰¹æ®Šç§ç±»</p><blockquote><p>åˆæˆï¼šè¡¨ç¤ºä¸€ç§å¼ºçš„â€œæ‹¥æœ‰â€å…³ç³»ï¼Œä½“ç°äº†ä¸¥æ ¼çš„éƒ¨åˆ†å’Œæ•´ä½“å…³ç³»ï¼Œéƒ¨åˆ†å’Œæ•´ä½“çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·ã€‚</p></blockquote><blockquote><p>èšåˆï¼šè¡¨ç¤ºä¸€ç§å¼±çš„â€œæ‹¥æœ‰â€å…³ç³»ï¼Œä½“ç°çš„æ˜¯Aå¯¹è±¡å¯ä»¥åŒ…å«Bå¯¹è±¡ï¼Œä½†Bå¯¹è±¡ä¸æ˜¯Aå¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚</p></blockquote><p>å¦‚ä¸‹å›¾æ‰€ç¤º<br><img src="/2019/07/17/adapter-bridge/åˆæˆèšåˆ.jpg" alt="åˆæˆèšåˆ"><br>ç›²ç›®åœ°ä½¿ç”¨ç»§æ‰¿ä¼šé€ æˆéº»çƒ¦ï¼Œå…¶æœ¬è´¨æ˜¯ï¼Œç»§æ‰¿æ˜¯ä¸€ç§å¼ºè€¦åˆç»“æ„ï¼Œçˆ¶ç±»å˜ï¼Œå­ç±»å¿…é¡»å˜ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ç”¨ç»§æ‰¿æ—¶ï¼Œä¸€å®šè¦åœ¨æ˜¯â€œis-aâ€çš„å…³ç³»å†è€ƒè™‘ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ä»»ä½•æ—¶å€™éƒ½å»ä½¿ç”¨ã€‚<br>ç”¨æ›´è¯¦ç»†çš„è¯­è¨€è§£é‡Šæ˜¯ï¼š<br><strong>å¯¹è±¡çš„ç»§æ‰¿å…³ç³»æ˜¯åœ¨ç¼–è¯‘æ—¶å°±å®šå¥½äº†ï¼Œæ‰€ä»¥æ— æ³•åœ¨è¿è¡Œæ—¶æ”¹å˜ä»çˆ¶ç±»ç»§æ‰¿çš„å®ç°ã€‚å­ç±»çš„å®ç°ä¸å®ƒçš„çˆ¶ç±»æœ‰éå¸¸ç´§å¯†çš„ä¾èµ–å…³ç³»ï¼Œä»¥è‡³äºçˆ¶ç±»å®ç°ä¸­çš„ä»»ä½•å˜åŒ–å¿…ç„¶ä¼šå¯¼è‡´å­ç±»çš„å˜åŒ–ã€‚å½“éœ€è¦å¤ç”¨å­ç±»æ—¶ï¼Œå¦‚æœç»§æ‰¿ä¸‹æ¥çš„å®ç°ä¸é€‚åˆæ–°çš„éœ€æ±‚ï¼Œåˆ™çˆ¶ç±»å¿…é¡»é‡å†™æˆ–è¢«å…¶ä»–æ›´é€‚åˆçš„ç±»æ›¿æ¢ã€‚è¿™ç§ä¾èµ–å…³ç³»é™åˆ¶äº†çµæ´»æ€§å¹¶æœ€ç»ˆé™åˆ¶äº†å¤ç”¨æ€§</strong></p><p>ä¸¾ä¸ªæ¸¸æˆä¸­çš„ä¾‹å­ï¼ŒDNFä¸­é¬¼å‰‘å£«çš„æ­¦å™¨æ˜¯å‰‘ç±»ã€‚é¬¼å‰‘å£«å¯ä»¥è½¬èŒæˆ4ä¸ªèŒä¸šï¼šå‰‘é­‚ï¼Œç‹‚æˆ˜å£«ï¼Œé˜¿ä¿®ç½—ï¼Œé¬¼æ³£ã€‚å‰‘ç±»ä¹Ÿæœ‰å·¨å‰‘ï¼Œå¤ªåˆ€ï¼Œé’å™¨ï¼ŒçŸ­å‰‘ä¹‹åˆ†ã€‚è¿™æ—¶å€™å°±å¯ä»¥æŠŠé¬¼å‰‘å£«å’Œå‰‘ç±»å½“åšæŠ½è±¡ç±»(è™½ç„¶é¬¼å‰‘å£«ä¸è½¬èŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå…·ä½“çš„è§’è‰²ï¼Œä½†åœ¨è¿™ä¸ªè¯­å¢ƒä¸­æˆ‘ä»¬å§‘ä¸”å½“ä»–æ˜¯æŠ½è±¡ç±»)ï¼Œä¸åŒçš„èŒä¸šå¯ä»¥ä½¿ç”¨ä¸åŒçš„å‰‘ï¼Œä¸åŒçš„å‰‘ä¹Ÿå¯ä»¥è¢«ä¸åŒçš„èŒä¸šä½¿ç”¨ã€‚è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æ¡¥æ¥æ¨¡å¼æŠŠè§’è‰²å’Œæ­¦å™¨ä»»æ„ç»„åˆäº†ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Implementor</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Sword</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConcreteImplementor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GreatSword</span> <span class="keyword">implements</span> <span class="title">Sword</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä½¿ç”¨å·¨å‰‘æŒ¥ç "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TooKnife</span> <span class="keyword">implements</span> <span class="title">Sword</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä½¿ç”¨å¤ªåˆ€çªåˆº"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Abstraction</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Slayer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Sword sword;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSword</span><span class="params">(Sword sword)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sword = sword;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//RefinedAbstraction</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BladeMaster</span> <span class="keyword">extends</span> <span class="title">Slayer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"å‰‘é­‚"</span>);</span><br><span class="line">        sword.attack();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Berserker</span> <span class="keyword">extends</span> <span class="title">Slayer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"ç‹‚æˆ˜å£«"</span>);</span><br><span class="line">        sword.attack();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸»ç¨‹åº<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bridge</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Slayer bladeMaster = <span class="keyword">new</span> BladeMaster();</span><br><span class="line">        bladeMaster.setSword(<span class="keyword">new</span> TooKnife());</span><br><span class="line">        bladeMaster.attack();</span><br><span class="line"></span><br><span class="line">        Slayer berserker = <span class="keyword">new</span> Berserker();</span><br><span class="line">        berserker.setSword(<span class="keyword">new</span> GreatSword());</span><br><span class="line">        berserker.attack();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åšä¸ªæ€»ç»“ï¼šå¯¹äºæ¡¥æ¥æ¨¡å¼ï¼Œé€šä¿—çš„ç†è§£å°±æ˜¯ï¼šå®ç°ç³»ç»Ÿå¯èƒ½æœ‰å¤šä¸ªè§’åº¦åˆ†ç±»ï¼Œæ¯ä¸€ç§åˆ†ç±»éƒ½å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ç§å¤šè§’åº¦åˆ†ç¦»å‡ºæ¥è®©å®ƒä»¬ç‹¬ç«‹å˜åŒ–ï¼Œå‡å°‘å®ƒä»¬ä¹‹é—´çš„è€¦åˆã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/qazwsxpcm/article/details/81948697" target="_blank" rel="noopener">https://blog.csdn.net/qazwsxpcm/article/details/81948697</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦å®Œäº†åˆ›å»ºå‹æ¨¡å¼ï¼Œè¯¥å­¦ç»“æ„å‹æ¨¡å¼äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é€‚é…å™¨æ¨¡å¼&quot;&gt;&lt;a href=&quot;#é€‚é…å™¨æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;é€‚é…å™¨æ¨¡å¼&quot;&gt;&lt;/a&gt;é€‚é…å™¨æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šå°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£è¡¨ç¤ºã€‚é€‚é…å™¨æ¨¡å¼å¯ä»¥æ¶ˆé™¤ç”±äºæ¥å£ä¸åŒ¹é…æ‰€é€ æˆçš„ç±»å…¼å®¹æ€§é—®é¢˜ã€‚&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/2019/07/17/adapter-bridge/é€‚é…å™¨æ¨¡å¼.jpg&quot; alt=&quot;é€‚é…å™¨æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼å’ŒåŸå‹æ¨¡å¼(æ·±/æµ…å¤åˆ¶é—®é¢˜)</title>
    <link href="http://yoursite.com/2019/07/15/builder-deep_clone/"/>
    <id>http://yoursite.com/2019/07/15/builder-deep_clone/</id>
    <published>2019-07-15T08:27:04.310Z</published>
    <updated>2019-07-22T16:44:11.940Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å»ºé€ è€…æ¨¡å¼å’ŒåŸå‹æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä»–ä»¬éƒ½å¯ä»¥åŠ¨æ€è·å¾—ä¸åŒäº§å“çš„ç±»å‹ï¼Œè¿™äº›å…·ä½“äº§å“éƒ½æ¥æºäºä¸€ä¸ªäº§å“çˆ¶ç±»ï¼Œè€Œå»ºé€ è€…æ¨¡å¼æ›´åŠ æ³¨é‡äº§å“å†…éƒ¨ç»„ä»¶çš„è£…é…è¿‡ç¨‹ã€‚åŸå‹æ¨¡å¼åˆ™æ¶‰åŠåˆ°å¯¹è±¡çš„æ·±å¤åˆ¶å’Œæµ…å¤åˆ¶çš„é—®é¢˜ã€‚</p><h3 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h3><p><strong>æè¿°ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</strong><br><img src="/2019/07/15/builder-deep_clone/å»ºé€ è€…æ¨¡å¼.png" alt="å»ºé€ è€…æ¨¡å¼"><br><a id="more"></a><br>å»ºé€ è€…æ¨¡å¼åˆç§°ç”Ÿæˆå™¨æ¨¡å¼ï¼Œå¯ä»¥å°†ä¸€ä¸ªäº§å“çš„å†…éƒ¨è¡¨è±¡ä¸äº§å“çš„ç”Ÿæˆè¿‡ç¨‹åˆ†å‰²å¼€æ¥ï¼Œä»è€Œä½¿ä¸€ä¸ªå»ºé€ è¿‡ç¨‹ç”Ÿæˆå…·æœ‰ä¸åŒå†…éƒ¨è¡¨è±¡çš„äº§å“å¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬ç”¨äº†å»ºé€ è€…æ¨¡å¼ï¼Œé‚£ä¹ˆç”¨æˆ·åªéœ€æŒ‡å®šå»ºé€ çš„ç±»å‹å°±å¯ä»¥å¾—åˆ°å®ƒä»¬ï¼Œè€Œå…·ä½“çš„å»ºé€ ç»†èŠ‚å°±ä¸éœ€è¦çŸ¥é“äº†ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œç©RPGæ¸¸æˆæ—¶è¦åˆ›å»ºä¸€ä¸ªè§’è‰²ç„¶åå¼€å§‹æ¢é™©ã€‚è§’è‰²æœ‰å¾ˆå¤šç±»å‹ï¼šæˆ˜å£«ï¼Œå°„æ‰‹ï¼Œæ³•å¸ˆï¼Œåˆºå®¢ç­‰ç­‰ã€‚ä»–ä»¬éƒ½æœ‰ä¸€äº›ç›¸ä¼¼çš„å…±æœ‰å±æ€§ï¼Œæ¯”å¦‚ï¼Œç”¨ä»€ä¹ˆæ­¦å™¨ï¼Œåº”è¯¥ç©¿ä»€ä¹ˆé˜²å…·ï¼Œåˆå§‹è¡€é‡ã€æ³•åŠ›å€¼ç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œ<strong>åˆ›å»ºè¿™äº›è§’è‰²çš„è¿‡ç¨‹éƒ½å¤§ä½“ç›¸ä¼¼</strong>ï¼Œä¾æ¬¡è®¾ç½®è¿™äº›å…±æœ‰å±æ€§çš„å€¼ã€‚å¯¹äºç©å®¶è€Œè¨€ï¼Œä»–ä»¬åªéœ€è¦åœ¨åˆ›å»ºè§’è‰²é¡µé¢é€‰æ‹©è‡ªå·±è¦ç©çš„è§’è‰²ï¼Œå¹¶ä¸å…³å¿ƒåå°æ˜¯å¦‚ä½•ç”Ÿæˆè¿™äº›è§’è‰²çš„ã€‚</p><p>å®šä¹‰ä¸€ä¸ªè§’è‰²ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Character</span> </span>&#123;</span><br><span class="line">    String weapon;</span><br><span class="line">    String guard;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWeapon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> weapon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWeapon</span><span class="params">(String weapon)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.weapon = weapon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getGuard</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> guard;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGuard</span><span class="params">(String guard)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.guard = guard;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¿™ä¸ªè§’è‰²çš„æ­¦å™¨æ˜¯ï¼š"</span> + weapon + <span class="string">"ï¼Œé˜²å…·ç²¾é€šï¼š"</span> + guard);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è§’è‰²å»ºé€ å™¨æ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">CharacterBuilder</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildWeapon</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildGuard</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Character <span class="title">createCharacter</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªæ¥å£è§„å®šäº†å»ºé€ å™¨éœ€è¦è®¾ç½®è§’è‰²çš„æ­¦å™¨å’Œé˜²å…·ï¼Œå…·ä½“æ€ä¹ˆè®¾ç½®ï¼Œåˆ™äº¤ç»™å­ç±»å…·ä½“çš„å»ºé€ å™¨ã€‚</p><p>å…·ä½“è§’è‰²çš„å»ºé€ å™¨<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SwordsmanBuilder</span> <span class="keyword">implements</span> <span class="title">CharacterBuilder</span> </span>&#123;</span><br><span class="line">    Character character = <span class="keyword">new</span> Character();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildWeapon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        character.setWeapon(<span class="string">"æ®‹ç ´çš„å‰‘"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildGuard</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        character.setGuard(<span class="string">"é‡ç”²"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Character <span class="title">createCharacter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> character;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GunnerBuilder</span> <span class="keyword">implements</span> <span class="title">CharacterBuilder</span> </span>&#123;</span><br><span class="line">    Character character = <span class="keyword">new</span> Character();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildWeapon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        character.setWeapon(<span class="string">"æ²¡å­å¼¹çš„æª"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildGuard</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        character.setGuard(<span class="string">"çš®ç”²"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Character <span class="title">createCharacter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> character;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿˜æœ‰ä¸€ä¸ªå»ºé€ è€…æ¨¡å¼æ ¸å¿ƒçš„ç±»ï¼ŒDirectorã€‚ç”¨æ¥æŒ‡æŒ¥å…·ä½“çš„å»ºé€ è¿‡ç¨‹ï¼Œè‡³äºå»ºé€ çš„æ˜¯ä»€ä¹ˆè§’è‰²ï¼Œå®ƒä¸ç”¨å…³å¿ƒï¼Œç”±è°ƒç”¨è€…å†³å®šã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CharacterPanel</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Character <span class="title">createCharacter</span><span class="params">(CharacterBuilder characterBuilder)</span> </span>&#123;</span><br><span class="line">        characterBuilder.buildWeapon();</span><br><span class="line">        characterBuilder.buildGuard();</span><br><span class="line">        <span class="keyword">return</span> characterBuilder.createCharacter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸»ç¨‹åº<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CharacterPanel characterPanel = <span class="keyword">new</span> CharacterPanel();</span><br><span class="line">        Character swordsman = characterPanel.createCharacter(<span class="keyword">new</span> SwordsmanBuilder());</span><br><span class="line">        Character gunner = characterPanel.createCharacter(<span class="keyword">new</span> GunnerBuilder());</span><br><span class="line">        swordsman.show();</span><br><span class="line">        gunner.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç®€å•çš„ä»‹ç»äº†ä¸‹å»ºé€ è€…æ¨¡å¼çš„è¿ä½œåŸç†ï¼Œå¯ä»¥æ¦‚å†µä¸ºè¿™4ç‚¹:</p><ul><li><p>Builderï¼šæŒ‡å®šä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œè§„å®šè¯¥äº§å“æ‰€éœ€å®ç°éƒ¨ä»¶çš„åˆ›å»ºï¼Œå¹¶ä¸æ¶‰åŠå…·ä½“çš„å¯¹è±¡éƒ¨ä»¶çš„åˆ›å»ºã€‚</p></li><li><p>ConcreteBuilderï¼šéœ€å®ç°Builderæ¥å£ï¼Œå¹¶ä¸”é’ˆå¯¹ä¸åŒçš„é€»è¾‘ï¼Œè¿›è¡Œä¸åŒæ–¹æ³•çš„åˆ›å»ºï¼Œæœ€ç»ˆæä¾›è¯¥äº§å“çš„å®ä¾‹ã€‚</p></li><li><p>Directorï¼šç”¨æ¥åˆ›å»ºå¤æ‚å¯¹è±¡çš„éƒ¨åˆ†ï¼Œå¯¹è¯¥éƒ¨åˆ†è¿›è¡Œå®Œæ•´çš„åˆ›å»ºæˆ–è€…æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œåˆ›å»ºã€‚</p></li><li><p>Productï¼šç¤ºè¢«æ„é€ çš„å¤æ‚å¯¹è±¡ã€‚</p></li></ul><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å»ºé€ è€…æ¨¡å¼?<br>å½“è¦åˆ›å»ºä¸€äº›å¤æ‚çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å†…éƒ¨æ„å»ºé—´çš„å»ºé€ é¡ºåºé€šå¸¸æ˜¯ç¨³å®šçš„ï¼Œä½†å¯¹è±¡å†…éƒ¨çš„æ„å»ºé€šå¸¸é¢ä¸´ç€å¤æ‚çš„å˜åŒ–æ—¶ã€‚</p><p>ä¼˜ç‚¹ï¼š<br>ä½¿å¾—å»ºé€ ä»£ç ä¸è¡¨ç¤ºä»£ç åˆ†ç¦»ï¼Œç”±äºå»ºé€ è€…éšè—äº†è¯¥äº§å“æ˜¯å¦‚ä½•ç»„è£…çš„ï¼Œæ‰€ä»¥è‹¥éœ€è¦æ”¹å˜ä¸€ä¸ªäº§å“çš„å†…éƒ¨è¡¨ç¤ºï¼Œåªéœ€è¦å†å®šä¹‰ä¸€ä¸ªå…·ä½“çš„å»ºé€ è€…ConcreteBuilderå°±å¯ä»¥äº†ã€‚</p><h3 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h3><p><strong>æè¿°ï¼šç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹,åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</strong><br><img src="/2019/07/15/builder-deep_clone/åŸå‹æ¨¡å¼.png" alt="åŸå‹æ¨¡å¼"><br>åŸå‹æ¨¡å¼æ˜¯ä»ä¸€ä¸ªå¯¹è±¡å†åˆ›å»ºå¦å¤–ä¸€ä¸ªå¯å®šåˆ¶çš„å¯¹è±¡ï¼Œè€Œä¸”ä¸éœ€è¦çŸ¥é“ä»»ä½•åˆ›å»ºçš„ç»†èŠ‚ã€‚<br>ä¸¾ä¸ªç®€å†çš„ä¾‹å­ï¼šç®€å†ä¸Šæœ‰å„è‡ªä¸ªäººä¿¡æ¯ï¼Œå…¶ä¸­å·¥ä½œç»å†è¿™ä¸ªä¿¡æ¯åˆå¯ä»¥åŒ…å«æ›´å…·ä½“çš„ä¿¡æ¯ï¼Œå¦‚å·¥ä½œæ—¶é—´ï¼Œå·¥ä½œåœ°ç‚¹ç­‰ï¼Œå› æ­¤å¯ä»¥å°è£…æˆä¸€ä¸ªç±»ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Resume</span> <span class="keyword">implements</span> <span class="title">Serializable</span>, <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    String sex;</span><br><span class="line">    String age;</span><br><span class="line">    WorkExperience workExperience;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Resume</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        workExperience = <span class="keyword">new</span> WorkExperience();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPersonalInfo</span><span class="params">(String sex, String age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWorkExperience</span><span class="params">(String workDate, String company)</span> </span>&#123;</span><br><span class="line">        workExperience.workDate = workDate;</span><br><span class="line">        workExperience.company = company;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Resume&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", sex='"</span> + sex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age='"</span> + age + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", workExperience="</span> + workExperience +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        Resume resume = (Resume) <span class="keyword">super</span>.clone();</span><br><span class="line">        <span class="keyword">if</span> (workExperience != <span class="keyword">null</span>) &#123;</span><br><span class="line">            resume.workExperience = (WorkExperience) workExperience.clone();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resume;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorkExperience</span> <span class="keyword">implements</span> <span class="title">Serializable</span>, <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    String workDate;</span><br><span class="line">    String company;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"WorkExperience&#123;"</span> +</span><br><span class="line">                <span class="string">"workDate='"</span> + workDate + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", company='"</span> + company + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœç°åœ¨æˆ‘æƒ³è¦å¾ˆå¤šä»½ç®€å†ï¼Œè¿™äº›ç®€å†é™¤äº†å·¥ä½œç»å†å±æ€§å¯ä»¥å› æŠ•é€’å…¬å¸çš„ä¸åŒè€Œæœ‰è¯¦æœ‰ç•¥å¤–ï¼Œå…¶ä»–ä¿¡æ¯éƒ½ä¸€æ ·ã€‚å¦‚æœæ¯åˆ›å»ºä¸€ä»½ç®€å†éƒ½è¦newä¸€æ¬¡ï¼Œéƒ½è¦æ‰§è¡Œä¸€æ¬¡æ„é€ å‡½æ•°ï¼Œå‡å¦‚æ„é€ å‡½æ•°çš„æ‰§è¡Œæ—¶é—´å¾ˆé•¿ï¼Œé‚£ä¹ˆå¤šæ¬¡æ‰§è¡Œæ„é€ å‡½æ•°è¿™ä¸ªåˆå§‹åŒ–æ“ä½œçš„æ•ˆç‡å°±å¾ˆä½äº†ã€‚  è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œå®é™…ä¸Šjavaæœ‰ä¸ªCloneableæ¥å£ï¼Œé‡å†™clone()æ–¹æ³•å³å¯å®ç°åŸå‹æ¨¡å¼ã€‚åŸå‹æ¨¡å¼çš„åŸºç¡€å®ç°å¯è‡ªè¡Œäº†è§£ã€‚  </p><p>ä¸»ç¨‹åºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Resume resume1 = <span class="keyword">new</span> Resume(<span class="string">"bxy"</span>);</span><br><span class="line">        resume1.setPersonalInfo(<span class="string">"male"</span>, <span class="string">"21"</span>);</span><br><span class="line">        resume1.setWorkExperience(<span class="string">"2017-2021"</span>, <span class="string">"NUIST"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(resume1.toString());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Resume resume2 = (Resume) resume1.clone();</span><br><span class="line">            resume2.setWorkExperience(<span class="string">"2017-2019"</span>,<span class="string">"Aå…¬å¸"</span>);</span><br><span class="line"></span><br><span class="line">            Resume resume3 = (Resume) resume1.clone();</span><br><span class="line">            resume3.setWorkExperience(<span class="string">"2017-2018"</span>,<span class="string">"Bå…¬å¸"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨åœºæ™¯ï¼š<br>å½“éœ€è¦åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œè€Œè¿™äº›å¯¹è±¡æœ‰å¾ˆå¤šåˆå§‹åŒ–ä¿¡æ¯éƒ½ä¸å˜ã€‚<br>åŸå‹æ¨¡å¼çš„å¥½å¤„æ˜¯ä¸ç”¨é‡æ–°åˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œæ˜¯åŠ¨æ€åœ°è·å¾—å¯¹è±¡è¿è¡Œæ—¶çš„çŠ¶æ€ã€‚</p><p>æ—¢ç„¶åŸå‹æ¨¡å¼æ˜¯ä¸ºäº†å…‹éš†å¯¹è±¡è€Œç”Ÿçš„ï¼Œä¸€ä¸ªå¯¹è±¡çš„å±æ€§æœ‰åŸºæœ¬ç±»å‹(å€¼ç±»å‹)å’ŒéåŸºæœ¬ç±»å‹(å¼•ç”¨ç±»å‹)ã€‚å¯¹äºéåŸºæœ¬ç±»å‹å±æ€§çš„å¤åˆ¶å°±å¼•å‡ºäº†æ·±å¤åˆ¶å’Œæµ…å¤åˆ¶çš„é—®é¢˜ã€‚</p><h4 id="æµ…å¤åˆ¶"><a href="#æµ…å¤åˆ¶" class="headerlink" title="æµ…å¤åˆ¶"></a>æµ…å¤åˆ¶</h4><blockquote><p>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</p></blockquote><p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒWorkExperienceæ˜¯éåŸºæœ¬å±æ€§ï¼Œåœ¨Resumeå¯¹è±¡ä¸­å­˜çš„æ˜¯å¼•ç”¨ã€‚æµ…å¤åˆ¶çš„Resume2å’ŒåŸæ¥çš„Resume1ä¸­çš„WorkExperienceéƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><h4 id="æ·±å¤åˆ¶"><a href="#æ·±å¤åˆ¶" class="headerlink" title="æ·±å¤åˆ¶"></a>æ·±å¤åˆ¶</h4><blockquote><p>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚</p></blockquote><p>åœ¨ä¸€äº›ç‰¹å®šçš„åœºåˆï¼Œæˆ‘ä»¬ä¼šéœ€è¦æ·±å¤åˆ¶ã€‚å³å¸Œæœ›Resume2å’ŒResume1ä¸­çš„WorkExperienceæŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œå¯ä»¥è®©å¾…å¤åˆ¶å¯¹è±¡çš„éåŸºæœ¬ç±»å‹çš„å¯¹è±¡ä¹Ÿå®ç°Cloneableæ¥å£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡æµå°†å¯¹è±¡å†™å‡ºæµå†è¯»å‡ºã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·±å¤åˆ¶å®ç°1</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">    Resume resume = (Resume) <span class="keyword">super</span>.clone();</span><br><span class="line">    <span class="keyword">if</span> (workExperience != <span class="keyword">null</span>) &#123;</span><br><span class="line">        resume.workExperience = (WorkExperience) workExperience.clone();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resume;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·±å¤åˆ¶å®ç°2</span></span><br><span class="line">ByteArrayOutputStream byteOut=<span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">ObjectOutputStream objOut=<span class="keyword">new</span> ObjectOutputStream(byteOut);</span><br><span class="line">objOut.writeObject(resume1);</span><br><span class="line"></span><br><span class="line">ByteArrayInputStream byteIn=<span class="keyword">new</span> ByteArrayInputStream(byteOut.toByteArray());</span><br><span class="line">ObjectInputStream objIn=<span class="keyword">new</span> ObjectInputStream(byteIn);</span><br><span class="line">Resume resume3=(Resume)objIn.readObject();</span><br><span class="line">System.out.println(resume1.workExperience == resume3.workExperience);</span><br></pre></td></tr></table></figure></p><p>åœ¨é€‰æ‹©æ·±å¤åˆ¶æ–¹æ³•æ—¶ï¼Œåº”æ ¹æ®å¯¹è±¡çš„å¤æ‚ç¨‹åº¦ï¼Œå¦‚å¼•ç”¨ç±»å‹å±æ€§æ˜¯å¦æœ‰å¤šå±‚å¼•ç”¨ç±»å‹å±æ€§å…³ç³»ã€‚å¦‚æœå¯¹è±¡åªæœ‰ä¸€å±‚æˆ–è€…ä¸¤å±‚å¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œè®©å¼•ç”¨ç±»å‹çš„å¯¹è±¡ä¹Ÿå®ç°Cloneableæ¥å£è¾ƒä¸ºæ–¹ä¾¿ï¼Œåä¹‹åˆ™ä½¿ç”¨å¯¹è±¡æµã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/qazwsxpcm/article/details/81292529" target="_blank" rel="noopener">https://blog.csdn.net/qazwsxpcm/article/details/81292529</a></li><li><a href="https://www.cnblogs.com/liqiangchn/p/9465186.html" target="_blank" rel="noopener">https://www.cnblogs.com/liqiangchn/p/9465186.html</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;å»ºé€ è€…æ¨¡å¼å’ŒåŸå‹æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä»–ä»¬éƒ½å¯ä»¥åŠ¨æ€è·å¾—ä¸åŒäº§å“çš„ç±»å‹ï¼Œè¿™äº›å…·ä½“äº§å“éƒ½æ¥æºäºä¸€ä¸ªäº§å“çˆ¶ç±»ï¼Œè€Œå»ºé€ è€…æ¨¡å¼æ›´åŠ æ³¨é‡äº§å“å†…éƒ¨ç»„ä»¶çš„è£…é…è¿‡ç¨‹ã€‚åŸå‹æ¨¡å¼åˆ™æ¶‰åŠåˆ°å¯¹è±¡çš„æ·±å¤åˆ¶å’Œæµ…å¤åˆ¶çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å»ºé€ è€…æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å»ºé€ è€…æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å»ºé€ è€…æ¨¡å¼&quot;&gt;&lt;/a&gt;å»ºé€ è€…æ¨¡å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æè¿°ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/2019/07/15/builder-deep_clone/å»ºé€ è€…æ¨¡å¼.png&quot; alt=&quot;å»ºé€ è€…æ¨¡å¼&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼ï¼šç®€å•å·¥å‚&amp;å·¥å‚æ–¹æ³•&amp;æŠ½è±¡å·¥å‚</title>
    <link href="http://yoursite.com/2019/07/14/factory/"/>
    <id>http://yoursite.com/2019/07/14/factory/</id>
    <published>2019-07-14T08:16:47.293Z</published>
    <updated>2019-07-14T08:25:24.819Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>è®¾è®¡æ¨¡å¼æœ‰3å¤§ç±»ï¼Œåˆ†ä¸ºï¼š<strong>åˆ›å»ºå‹æ¨¡å¼</strong>ã€<strong>ç»“æ„å‹æ¨¡å¼</strong>å’Œ<strong>è¡Œä¸ºå‹æ¨¡å¼</strong>ã€‚å·¥å‚æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ newè¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚è¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»ã€‚<br><a id="more"></a></p><h3 id="ç®€å•å·¥å‚"><a href="#ç®€å•å·¥å‚" class="headerlink" title="ç®€å•å·¥å‚"></a>ç®€å•å·¥å‚</h3><p><strong>æè¿°ï¼šå®šä¹‰ä¸€ä¸ªç±»ç”¨äºåˆ›å»ºçˆ¶ç±»ç›¸åŒçš„å­ç±»å¯¹è±¡ï¼Œç”±ä¼ å…¥å‚æ•°å†³å®šåˆ›å»ºå“ªä¸ªå­ç±»ã€‚</strong><br><img src="/2019/07/14/factory/ç®€å•å·¥å‚.jpg" alt="ç®€å•å·¥å‚"><br>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘å–œæ¬¢ç©æ¸¸æˆã€‚å®šä¹‰ä¸€ä¸ªGameæ¥å£ï¼Œè®©å…·ä½“çš„æ¸¸æˆå»å®ç°è¿™ä¸ªæ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeartStone</span> <span class="keyword">implements</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç‚‰çŸ³ä¼ è¯´ï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gwent</span> <span class="keyword">implements</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ˜†ç‰¹ç‰Œï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æˆ‘ä»¬è¦å¼€å§‹ç©äº†<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Game game = <span class="keyword">new</span> HeartStone();</span><br><span class="line">        game.play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å‡è®¾æˆ‘ä»¬çš„ç¨‹åºæ˜¯ä¸ªå¤§å‹ç³»ç»Ÿï¼Œæä¾›æ¸¸æˆå¯åŠ¨çš„ä»£ç†åŠŸèƒ½ï¼Œä¸€å¼€å§‹æˆ‘ä»¬ç©çš„æ˜¯ç‚‰çŸ³ä¼ è¯´ï¼Œå› æ­¤é¡¹ç›®ä¸­æœ‰å¾ˆå¤šåœ°æ–¹çš„ä»£ç éƒ½ä½¿ç”¨ Game game = new HeartStone(); è¿™æ ·çš„è¯­å¥æ¥å¯åŠ¨æ¸¸æˆã€‚<br>æŸå¤©ï¼Œæˆ‘è§‰å¾—ç‚‰çŸ³ä¼ è¯´éšæœºæ€§å¤ªå¤§äº†ï¼Œè¾£é¸¡ç‚‰çŸ³ï¼å’±ä»¬å»ç©æ˜†ç‰¹ç‰Œå§ï¼é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæƒ³æ›´æ¢å¯åŠ¨çš„æ¸¸æˆï¼Œæˆ‘å°±å¾—å°†æ•´ä¸ªç³»ç»Ÿçš„æ¯ä¸€å¤„Game game = new HeartStone(); æ”¹æˆ Game game = new Gwent(); å¯è§å·¥ä½œé‡æ˜¯ååˆ†åºå¤§çš„ã€‚<br>ç®€å•å·¥å‚æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç±»é—®é¢˜çš„ï¼šå…·ä½“ç©ä»€ä¹ˆæ¸¸æˆåº”è¯¥æ˜¯éšæ—¶å˜åŠ¨çš„éœ€æ±‚ï¼Œä¸åº”è¯¥åœ¨ç¨‹åºä¸­å†™æ­»å…·ä½“å®ä¾‹åŒ–å“ªä¸ªæ¸¸æˆå­ç±»ã€‚<br>ç°åœ¨æ·»åŠ ä¸€ä¸ªæ¸¸æˆå·¥å‚ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String HeartStone = <span class="string">"HeartStone"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String Gwent = <span class="string">"Gwent"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Game <span class="title">playGame</span><span class="params">(String game)</span> </span>&#123;</span><br><span class="line">        Game myGame = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (game) &#123;</span><br><span class="line">            <span class="keyword">case</span> HeartStone:</span><br><span class="line">                myGame = <span class="keyword">new</span> HeartStone();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Gwent:</span><br><span class="line">                myGame = <span class="keyword">new</span> Gwent();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> myGame;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸»ç¨‹åºæ”¹ä¸º<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Game game = GameFactory.playGame(<span class="string">"Gwent"</span>);</span><br><span class="line">        game.play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³å¯åŠ¨ä»€ä¹ˆæ¸¸æˆï¼Œåªéœ€è¦æ”¹åŠ¨playGameä¸­çš„å‚æ•°ï¼Œè€Œè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œè¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»¥é…ç½®æ–‡ä»¶çš„æ–¹å¼ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²å˜é‡èµ‹å€¼ï¼Œæœ€ç»ˆåšåˆ°ï¼Œä¸æ”¹åŠ¨ä»»ä½•ä¸€å¤„ä»£ç ï¼Œåªä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æ¸¸æˆä¿¡æ¯ï¼Œå°±å¯ä»¥åˆ‡æ¢å…·ä½“å®ä¾‹åŒ–å“ªä¸ªæ¸¸æˆã€‚</p><p>ç®€å•å·¥å‚æ¨¡å¼çš„æœ€å¤§ä¼˜ç‚¹åœ¨äºå·¥å‚ç±»ä¸­åŒ…å«äº†å¿…è¦çš„é€»è¾‘åˆ¤æ–­(switch)ï¼Œæ ¹æ®å®¢æˆ·ç«¯çš„é€‰æ‹©åŠ¨æ€å®ä¾‹åŒ–ç›¸å…³çš„ ç±»ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå»é™¤äº†ä¸å…·ä½“äº§å“çš„ä¾èµ–ã€‚</p><h3 id="å·¥å‚æ–¹æ³•"><a href="#å·¥å‚æ–¹æ³•" class="headerlink" title="å·¥å‚æ–¹æ³•"></a>å·¥å‚æ–¹æ³•</h3><p><strong>æè¿°ï¼šå®šä¹‰ä¸€ä¸ªæ¥å£ç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯è®©å­ç±»å†³å®šåˆå§‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æŠŠä¸€ä¸ªç±»çš„åˆå§‹åŒ–ä¸‹æ”¾åˆ°å­ç±»ã€‚</strong><br><img src="/2019/07/14/factory/å·¥å‚æ–¹æ³•.jpg" alt="å·¥å‚æ–¹æ³•"><br>åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å‘ç°åœ¨æ·»åŠ å­ç±»çš„æ—¶å€™ï¼Œç›¸åº”çš„ä¹Ÿéœ€è¦åœ¨å·¥å‚ç±»ä¸­æ·»åŠ ä¸€ä¸ªåˆ¤æ–­åˆ†æ”¯(å¤šåŠ ä¸€ä¸ªcase)ï¼Œæ˜¯è¿èƒŒäº†å¼€æ”¾-å°é—­åŸåˆ™çš„ã€‚è€Œå·¥å‚æ–¹æ³•æ¨¡å¼å°±æ˜¯ä¸»è¦è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p><blockquote><p>å¼€æ”¾-å°é—­åŸåˆ™ï¼šè½¯ä»¶å®ä½“(ç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰)åº”è¯¥å¯ä»¥æ‰©å±•ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ã€‚</p></blockquote><p>å›åˆ°ç©æ¸¸æˆçš„ä¾‹å­ï¼Œç°åœ¨æˆ‘åˆæƒ³ç©LOLäº†ï¼Œç°åœ¨æˆ‘éœ€è¦æ·»åŠ ä¸€ä¸ªLOLç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LOL</span> <span class="keyword">implements</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è‹±é›„è”ç›Ÿï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸‹ï¼Œè¿˜éœ€è¦æ”¹åŠ¨GameFactoryçš„ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ªCase,è¿™æ ·ä¿®æ”¹äº†æºä»£ç ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚ç°åœ¨å°†ç®€å•å·¥å‚æ¨¡å¼æ”¹æˆå·¥å‚æ–¹æ³•æ¨¡å¼ï¼ŒæŠŠGameFactoryæ”¹æˆæ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">Game <span class="title">playGame</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeartStoneFactory</span> <span class="keyword">implements</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Game <span class="title">playGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HeartStone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GwentFactory</span> <span class="keyword">implements</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Game <span class="title">playGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Gwent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ï¼Œæƒ³æ·»åŠ LOLè¿™ä¸ªæ¸¸æˆï¼Œåªéœ€è¦å†æ·»åŠ ä¸€ä¸ªå·¥å‚ç±»å³å¯ï¼Œä¸ç”¨<strong>ä¿®æ”¹</strong>ä»£ç ï¼Œè€Œæ˜¯<strong>æ‰©å±•</strong>ä»£ç ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LOLFactory</span> <span class="keyword">implements</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Game <span class="title">playGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LOL();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸»ç¨‹åºä¸º<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GameFactory gameFactory = <span class="keyword">new</span> LOLFactory();</span><br><span class="line">        Game game = gameFactory.playGame();</span><br><span class="line">        game.play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¹‹åï¼Œæ‰©å±•æ€§å˜é«˜äº†ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªæ¸¸æˆï¼Œåªè¦æ‰©å±•ä¸€ä¸ªæ¸¸æˆå·¥å‚ç±»å°±å¯ä»¥ã€‚ä½†æ˜¯éšä¹‹è€Œæ¥çš„æ˜¯åœ¨ç³»ç»Ÿä¸­å¢åŠ äº†å¤æ‚åº¦ï¼Œæ¯å¢åŠ ä¸€ä¸ªæ¸¸æˆæ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªæ¸¸æˆç±»å’Œå·¥å‚ç±»ã€‚</p><h3 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="headerlink" title="æŠ½è±¡å·¥å‚"></a>æŠ½è±¡å·¥å‚</h3><p><strong>æè¿°ï¼šä¸ºä¸€ä¸ªäº§å“æ—æä¾›äº†ç»Ÿä¸€çš„åˆ›å»ºæ¥å£ã€‚å½“éœ€è¦è¿™ä¸ªäº§å“æ—çš„æŸä¸€ç³»åˆ—çš„æ—¶å€™ï¼Œå¯ä»¥ä»æŠ½è±¡å·¥å‚ä¸­é€‰å‡ºç›¸åº”çš„ç³»åˆ—åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å·¥å‚ç±»ã€‚</strong><br><img src="/2019/07/14/factory/æŠ½è±¡å·¥å‚.png" alt="æŠ½è±¡å·¥å‚"><br>æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚åœ¨ä¸Šé¢çš„ç©æ¸¸æˆä¾‹å­ä¸­ï¼Œæ¸¸æˆå·¥å‚æ¥å£(GameFactory)çš„å­ç±»ï¼Œåªå®ä¾‹åŒ–ä¸€ç§æ¸¸æˆçˆ¶ç±»(Game)ã€‚è¿™æ—¶å·¥å‚æ–¹æ³•æ¨¡å¼å°±å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚ä½†æˆ‘ä»¬çŸ¥é“ï¼Œæ¸¸æˆæ˜¯åˆ†ä¸ºå¾ˆå¤šç§ç±»å‹çš„ï¼Œå¦‚MOBAã€RPGã€TCGç­‰ç­‰ã€‚<br>ç°åœ¨æˆ‘ä»¬æŠŠGameæ¥å£æ‹†åˆ†æˆRPGGameæ¥å£å’ŒCardGameæ¥å£ï¼Œéœ€æ±‚å˜ä¸ºï¼šGameFactoryçš„å­ç±»å¯ä»¥å®ä¾‹åŒ–å¤šç§æ¸¸æˆçˆ¶ç±»äº†(RPGGameã€CardGame)ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ°æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p><p>åŸå…ˆæˆ‘ä»¬è®¨è®ºæ¸¸æˆæ—¶ï¼Œè¯´çš„æ˜¯ä¸€ä¸ªå¾ˆå®½æ³›çš„æ¦‚å¿µï¼Œæˆ‘åªçŸ¥é“ä½ æƒ³ç©æ¸¸æˆï¼Œä¸çŸ¥é“ä½ æƒ³ç©ä»€ä¹ˆç±»å‹çš„æ¸¸æˆã€‚ç°åœ¨ç»™ä½ ä¸¤ä¸ªé€‰é¡¹ï¼šè§’è‰²æ‰®æ¼”æ¸¸æˆå’Œå¡ç‰Œæ¸¸æˆã€‚æœ‰ä¸¤å®¶çŸ¥åæ¸¸æˆå‚å•†ï¼Œæ³¢å…°è ¢é©´å’Œæš´é›ªï¼Œä»–ä»¬éƒ½æœ‰è§’è‰²æ‰®æ¼”ç±»æ¸¸æˆå’Œå¡ç‰Œç±»æ¸¸æˆã€‚<br>é‚£ä¹ˆä¼—æ‰€å‘¨çŸ¥ï¼Œè ¢é©´çš„RPGæ¸¸æˆæœ‰å·«å¸ˆç³»åˆ—ï¼Œå¡ç‰Œæ¸¸æˆæ˜¯æ˜†ç‰¹ç‰Œï¼Œæš´é›ªçš„RPGæ¸¸æˆæœ‰é­”å…½ä¸–ç•Œï¼Œå¡ç‰Œæ¸¸æˆæœ‰ç‚‰çŸ³ä¼ è¯´ã€‚è¿™äº›å…·ä½“çš„æ¸¸æˆéƒ½å«åš<strong>äº§å“</strong> è€Œæ¸¸æˆè¿™ä¸ªå¤§ç±»åˆ™æ˜¯<strong>äº§å“æ—</strong>ï¼Œå·«å¸ˆå’Œæ˜†ç‰¹ç‰Œæ˜¯è ¢é©´çš„äº§å“æ—ï¼›é­”å…½ä¸–ç•Œå’Œç‚‰çŸ³ä¼ è¯´æ˜¯æš´é›ªçš„äº§å“æ—ã€‚<br>æŠ½è±¡å·¥å‚æ¨¡å¼å°±æ˜¯æè¿°å®ƒä»¬ä¹‹é—´çš„å…³ç³»çš„ï¼šå°†åŒä¸€ç±»çš„äº§å“å­ç±»å½’ä¸ºä¸€ç±»ï¼Œè®©ä»–ä»¬ç»§æ‰¿åŒä¸€ä¸ªæ¥å£ï¼Œ(å·«å¸ˆå’Œé­”å…½ä¸–ç•Œéƒ½æ˜¯RPGï¼Œè®©å®ƒä»¬éƒ½ç»§æ‰¿RPGæ¥å£)ï¼Œç„¶åå°†ä¸åŒç±»çš„äº§å“å½’ä¸ºä¸€æ—ï¼Œè®©ä¸åŒç±»çš„äº§å“éƒ½å¯ä»¥è¢«ä¸€ä¸ªå·¥å‚å­ç±»å®ä¾‹åŒ–(é­”å…½ä¸–ç•Œå’Œç‚‰çŸ³ä¼ è¯´æ˜¯ä¸åŒç±»çš„æ¸¸æˆï¼Œä½†éƒ½å¯ä»¥è¢«æš´é›ªå…¬å¸å®ä¾‹åŒ–)ã€‚<br>é€šè¿‡ä»£ç ç›´è§‚å±•ç¤ºï¼š<br>æ¸¸æˆç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">RPGGame</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">CardGame</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeartStone</span> <span class="keyword">implements</span> <span class="title">CardGame</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç‚‰çŸ³ä¼ è¯´ï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gwent</span> <span class="keyword">implements</span> <span class="title">CardGame</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ˜†ç‰¹ç‰Œï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WOW</span> <span class="keyword">implements</span> <span class="title">RPGGame</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é­”å…½ä¸–ç•Œï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Witcher</span> <span class="keyword">implements</span> <span class="title">RPGGame</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å·«å¸ˆï¼Œå¯åŠ¨ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¸¸æˆå·¥å‚ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">RPGGame <span class="title">playRPGGame</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">CardGame <span class="title">playCardGame</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CDProjektRed</span> <span class="keyword">implements</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RPGGame <span class="title">playRPGGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Witcher();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CardGame <span class="title">playCardGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Gwent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Blizzard</span> <span class="keyword">implements</span> <span class="title">GameFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RPGGame <span class="title">playRPGGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WOW();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CardGame <span class="title">playCardGame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HeartStone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸»ç¨‹åº<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        GameFactory gameFactory1 = <span class="keyword">new</span> CDProjektRed();</span><br><span class="line">        GameFactory gameFactory2 = <span class="keyword">new</span> Blizzard();</span><br><span class="line">        RPGGame game1 = gameFactory1.playRPGGame();</span><br><span class="line">        CardGame game2 = gameFactory1.playCardGame();</span><br><span class="line">        RPGGame game3 = gameFactory2.playRPGGame();</span><br><span class="line">        CardGame game4 = gameFactory2.playCardGame();</span><br><span class="line">        game1.play();</span><br><span class="line">        game2.play();</span><br><span class="line">        game3.play();</span><br><span class="line">        game4.play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„æ¸¸æˆå¯åŠ¨ä»£ç†ç³»ç»Ÿçš„åŠŸèƒ½å°±è¢«è¿›ä¸€æ­¥å®Œå–„äº†ï¼Œå¦‚æœä½ æ˜¯è ¢é©´çš„èˆ”ç‹—ï¼Œä½ åªæƒ³ä»£ç†å¯åŠ¨è ¢é©´çš„æ¸¸æˆï¼Œåªéœ€è¦ä¿®æ”¹ä¸€å¤„ä»£ç GameFactory gameFactory = new CDProjektRed(); å°±å¯ä»¥ä¸€é”®è®¾ç½®ä¸ºè ¢é©´æ¸¸æˆå…¨å®¶æ¡¶ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒä»¬å¹¶ä¸çŸ¥é“è‡ªå·±ä¼šå¯åŠ¨å“ªä¸ªå‚å•†çš„æ¸¸æˆï¼Œå› ä¸ºè¿™å¯¹å®ƒä»¬æ˜¯é€æ˜çš„ï¼Œå®¢æˆ·ç«¯åªçŸ¥é“è‡ªå·±å¯åŠ¨äº†RPGGameå’ŒCardGame. å¦‚æœå“ªå¤©ä½ åˆå˜æˆæš´é›ªèˆ”ç‹—äº†ï¼Œä¹Ÿåªéœ€è¦æ”¹åŠ¨ä¸€å¤„ä»£ç ï¼Œå®¢æˆ·ç«¯å°±ä¼šå¯åŠ¨æš´é›ªçš„æ¸¸æˆæ—ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/qazwsxpcm/article/details/81141325" target="_blank" rel="noopener">https://blog.csdn.net/qazwsxpcm/article/details/81141325</a></li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;è®¾è®¡æ¨¡å¼æœ‰3å¤§ç±»ï¼Œåˆ†ä¸ºï¼š&lt;strong&gt;åˆ›å»ºå‹æ¨¡å¼&lt;/strong&gt;ã€&lt;strong&gt;ç»“æ„å‹æ¨¡å¼&lt;/strong&gt;å’Œ&lt;strong&gt;è¡Œä¸ºå‹æ¨¡å¼&lt;/strong&gt;ã€‚å·¥å‚æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ newè¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚è¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="DesignPatterns" scheme="http://yoursite.com/tags/DesignPatterns/"/>
    
  </entry>
  
  <entry>
    <title>åˆå§‹Netty â€”â€” å®ç°ç®€å•çš„C/Sé€šä¿¡</title>
    <link href="http://yoursite.com/2019/04/28/first_Netty/"/>
    <id>http://yoursite.com/2019/04/28/first_Netty/</id>
    <published>2019-04-28T12:08:33.730Z</published>
    <updated>2019-04-29T11:02:27.785Z</updated>
    
    <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼š<br>Nettyæ˜¯Javaçš„ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œæ—¢ç„¶æ˜¯æ¡†æ¶çš„å­¦ä¹ ï¼Œä¸å…ä¼šç¢°åˆ°å¾ˆå¤šåˆ†æ”¯çš„çŸ¥è¯†å’Œä¸ç†Ÿæ‚‰çš„åè¯ã€‚è¿™å°±éœ€è¦ä¸æ–­çš„åšâ€œä¸‹æ½œâ€ï¼Œè€å¿ƒæœç´¢ï¼Œä¸æ±‚ç”šè§£ï¼Œç­‰åˆ°å¤§è‡´ç†Ÿæ‚‰ä¹‹åå†å»é€ä¸€æ·±ç©¶ã€‚å› æ­¤æœ‰äº›æ¦‚å¿µä½œè€…ä¹Ÿä¸èƒ½åšå‡ºè¯¦ç»†è§£é‡Šï¼Œè¯·å‚è€ƒè´´å‡ºçš„ç›¸å…³æ–‡ç« æˆ–è‡ªè¡Œæœç´¢ä»¥è§£å†³ç–‘æƒ‘ã€‚<br><a id="more"></a></p><h3 id="ä»€ä¹ˆæ˜¯Netty"><a href="#ä»€ä¹ˆæ˜¯Netty" class="headerlink" title="ä»€ä¹ˆæ˜¯Netty"></a>ä»€ä¹ˆæ˜¯Netty</h3><p>ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æœ‰ä½œè§£é‡Šã€‚ä»¥ä½œè€…çš„ä½¿ç”¨ä½“éªŒæ¥è¯´ï¼ŒNettyæ˜¯å°è£…äº† Java socket nio æ¥è¿›è¡Œç½‘ç»œç¼–ç¨‹çš„å·¥å…·ã€‚è¯´åˆ°ç½‘ç»œç¼–ç¨‹ï¼Œå¤§äºŒè½¯å·¥çš„è½¯ä»¶å·¥ç¨‹å®è®­å°±æœ‰è¿™ä¸ªå°è¯¾é¢˜ï¼Œå½“æ—¶ä½œè€…æ˜¯ç”¨Java socket ioæ¥å†™ï¼Œè¿˜æ²¡ç”¨åˆ°nioå‘¢ï¼Œå°±æ˜¯å‚ç…§ç½‘ä¸Šçš„ä¾‹å­æ‰‹åŠ¨æ¨¡æ‹Ÿé€šä¿¡è¿‡ç¨‹ï¼Œè‡ªå·±ç”¨æœ€ç®€å•çš„ <strong>é˜»å¡I/O</strong> çš„æ¨¡å¼å†™äº†ä¸€ä¸ªThreadç±»æ¥å¤„ç†æ‰€æœ‰ä¸åŒç§ç±»çš„è¯·æ±‚ï¼Œç”±äºéœ€æ±‚ç®€å•ï¼Œå°šèƒ½å®Œæˆã€‚ æƒ³è¦æ¨¡æ‹Ÿæ•ˆæœæ›´è‡ªç„¶ä¸€ç‚¹å°±è¦ç”¨ <strong>éé˜»å¡I/O</strong> æ¨¡å¼ï¼Œè€Œnioå°±æ˜¯ç”¨æ¥å†™éé˜»å¡I/Oçš„apiã€‚ä½†æ˜¯nioçš„ç¼–å†™å¯¹javaç¨‹åºå‘˜æ˜¯æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚çš„ã€‚Nettyå°±å¯ä»¥ç®€åŒ–è¿™ä¸€ç³»åˆ—æ“ä½œã€‚<br><!--more--></p><h3 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h3><p>è´´å‡ ä¸ªæ¯”è¾ƒé è°±çš„åšå®¢ï¼Œä¸æ±‚ç”šè§£ï¼Œå¤§è‡´äº†è§£ä¸€ä¸‹å°±å¥½ã€‚<br>å…³äºNIOï¼š<br><a href="https://www.jianshu.com/p/3cec590a122f" target="_blank" rel="noopener">https://www.jianshu.com/p/3cec590a122f</a>  (æ¨èï¼Œä¹ŸåŒ…æ‹¬I/Oæ¨¡å‹)<br><a href="https://my.oschina.net/andylucc/blog/614295" target="_blank" rel="noopener">https://my.oschina.net/andylucc/blog/614295</a><br>å…³äºI/Oæ¨¡å‹ï¼š<br><a href="https://segmentfault.com/a/1190000003063859" target="_blank" rel="noopener">https://segmentfault.com/a/1190000003063859</a></p><h3 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h3><p>java JDK1.8 + IDEA + maven + Netty 4.1.6<br>mavenä¾èµ–ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;io.netty&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;netty-all&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;4.1.6.Final&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p><h3 id="å®ç°åŠŸèƒ½"><a href="#å®ç°åŠŸèƒ½" class="headerlink" title="å®ç°åŠŸèƒ½"></a>å®ç°åŠŸèƒ½</h3><p>C/Sé€šä¿¡ï¼šCæ˜¯å®¢æˆ·ç«¯ï¼ŒSæ˜¯æœåŠ¡ç«¯ã€‚åœ¨IDEAæ§åˆ¶å°å¼€å¯æœåŠ¡ç«¯æ¥æ”¶å®¢æˆ·ç«¯çš„ä¿¡æ¯String, å¹¶è¿”å›ä¸€ä¸ªâ€œhi!â€+Stringï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„ä¿¡æ¯ååœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºã€‚</p><h3 id="ä»£ç è®²è§£"><a href="#ä»£ç è®²è§£" class="headerlink" title="ä»£ç è®²è§£"></a>ä»£ç è®²è§£</h3><p>åˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤éƒ¨åˆ†ï¼Œå„è‡ªåˆæœ‰ä¸€ä¸ªå¤„ç†è¿æ¥é€»è¾‘çš„ä»£ç </p><h4 id="æœåŠ¡ç«¯ä»£ç "><a href="#æœåŠ¡ç«¯ä»£ç " class="headerlink" title="æœåŠ¡ç«¯ä»£ç "></a>æœåŠ¡ç«¯ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.netty.bootstrap.ServerBootstrap;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelFuture;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelInitializer;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelPipeline;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.EventLoopGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.SocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.nio.NioServerSocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.DelimiterBasedFrameDecoder;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.Delimiters;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.string.StringDecoder;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.string.StringEncoder;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoServer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> port;  <span class="comment">//1.è®¾ç½®æœåŠ¡ç«¯ç«¯å£</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EchoServer</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        EventLoopGroup group = <span class="keyword">new</span> NioEventLoopGroup();  <span class="comment">//2.åˆ›å»º EventLoopGroup</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * å®¢æˆ·ç«¯çš„æ˜¯Bootstrapï¼ŒæœåŠ¡ç«¯çš„åˆ™æ˜¯    ServerBootstrapã€‚</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">            ServerBootstrap sbs = <span class="keyword">new</span> ServerBootstrap();  <span class="comment">//3.åˆ›å»º ServerBootstrap</span></span><br><span class="line">            sbs.group(group)</span><br><span class="line">                    .channel(NioServerSocketChannel.class)  <span class="comment">//4.æŒ‡å®šä½¿ç”¨ NIO çš„ä¼ è¾“ Channel</span></span><br><span class="line">                    .childHandler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                            ChannelPipeline ph = ch.pipeline();</span><br><span class="line">                            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                            * Nettyä¸­çš„ç¼–ç /è§£ç å™¨ï¼Œé€šè¿‡ä»–ä½ èƒ½å®Œæˆå­—èŠ‚ä¸pojoã€pojoä¸pojoçš„ç›¸äº’è½¬æ¢ï¼Œ</span></span><br><span class="line"><span class="comment">                            * ä»è€Œè¾¾åˆ°è‡ªå®šä¹‰åè®®çš„ç›®çš„ã€‚</span></span><br><span class="line"><span class="comment">                            * ä¸‹é¢æ˜¯ä»¥("\n")ä¸ºç»“å°¾åˆ†å‰²çš„ è§£ç å™¨</span></span><br><span class="line"><span class="comment">                            * */</span></span><br><span class="line">                            ph.addLast(<span class="string">"framer"</span>, <span class="keyword">new</span> DelimiterBasedFrameDecoder(<span class="number">8192</span>, Delimiters.lineDelimiter()))</span><br><span class="line">                                    .addLast(<span class="string">"decoder"</span>, <span class="keyword">new</span> StringDecoder())</span><br><span class="line">                                    .addLast(<span class="string">"encoder"</span>, <span class="keyword">new</span> StringEncoder())  <span class="comment">//è§£ç å’Œç¼–ç ï¼Œåº”å’Œå®¢æˆ·ç«¯ä¸€è‡´</span></span><br><span class="line">                                    .addLast(<span class="string">"handler"</span>, <span class="keyword">new</span> EchoServerHandler());  <span class="comment">//5.æ·»åŠ  EchoServerHandler åˆ° Channel çš„ ChannelPipeline</span></span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">            ChannelFuture cf = sbs.bind(<span class="keyword">this</span>.port).sync();  <span class="comment">//6.è®¾ç½®socketåœ°å€ä½¿ç”¨æ‰€é€‰çš„ç«¯å£ å¹¶ä¸” ç»‘å®šçš„æœåŠ¡å™¨ï¼Œsync ç­‰å¾…æœåŠ¡å™¨å…³é—­</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ..."</span>);</span><br><span class="line"></span><br><span class="line">            cf.channel().closeFuture().sync();  <span class="comment">//7.å…³é—­ channel å’Œ å—ï¼Œç›´åˆ°å®ƒè¢«å…³é—­</span></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            group.shutdownGracefully();  <span class="comment">//8.å…³é—­ EventLoopGroupï¼Œé‡Šæ”¾æ‰€æœ‰èµ„æº</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">new</span> EchoServer(<span class="number">65535</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸€æ®µä»£ç ï¼š<br><img src="http://blog.duohuo.org/wp-content/uploads/2019/01/2d5cd63552e26e1c12d11902c2a05bdc.png" alt><br>è¿™æ˜¯å…³é”®æ‰€åœ¨ï¼Œå…¶ä½™ä»£ç åŸºæœ¬ä¸Šæ˜¯å¥—è·¯ä»£ç ï¼ŒæŒ‰éƒ¨å°±ç­å†™å°±å¯ä»¥ã€‚<br>å…³é”®åœ¨äºæ­¤å¤„å‡ºç°äº†ï¼š</p><ul><li>ç”¨ChannelPipelineå¼•ç”¨äº†SocketChannelçš„pipelineï¼ŒåŸå› åœ¨äºChannelPipelineæ˜¯ç”¨äºå­˜æ”¾ChannelHandlerçš„å®¹å™¨ï¼Œè€Œæ¥ä¸‹æ¥çš„è§£ç ç¼–ç æ“ä½œå’Œè‡ªå®šä¹‰çš„é€»è¾‘å¤„ç†ç±»éƒ½è¦æ¶‰åŠåˆ°ChannelHandlerçš„å­ç±»<br>å®ƒä»¬ä¹‹é—´çš„å…³ç³»å¯ä»¥ç”¨ä¸‹å›¾è¡¨ç¤ºï¼š</li></ul><p><img src="http://blog.duohuo.org/wp-content/uploads/2019/01/27d52ce0891ede08b68a32fcc9281ae2.png" alt></p><ul><li><p>Encoder(ç¼–ç å™¨)å’ŒDecoder(è§£ç å™¨)ï¼Œå±äºCodecæ¡†æ¶çš„å†…å®¹ï¼Œå¤§è‡´æ„æ€æ˜¯ï¼šæ­¤å¤„æè¿°äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“äº†ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œè¿™é‡Œè¦ä¼ è¾“Stringå°±ç”¨åˆ°äº†StringDecoder/Encode   å½“ç„¶ä¹Ÿå¯ä»¥ä¼ è¾“å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œè¯¦æƒ…å‚è€ƒè¿™ç¯‡åšå®¢ï¼š<a href="https://www.jianshu.com/p/fd815bd437cd" target="_blank" rel="noopener">https://www.jianshu.com/p/fd815bd437cd</a></p></li><li><p>æ³¨é‡Š5.å¤„çš„EchoServerHandleræ˜¯è‡ªå®šä¹‰çš„ç±»ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§â€œè§„åˆ™â€ï¼Œè§„å®šäº†æœåŠ¡ç«¯ä»¥ä»€ä¹ˆæ–¹å¼å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®ã€‚</p></li></ul><h4 id="æœåŠ¡ç«¯å¤„ç†è¿æ¥çš„ä»£ç "><a href="#æœåŠ¡ç«¯å¤„ç†è¿æ¥çš„ä»£ç " class="headerlink" title="æœåŠ¡ç«¯å¤„ç†è¿æ¥çš„ä»£ç "></a>æœåŠ¡ç«¯å¤„ç†è¿æ¥çš„ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerContext;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.SimpleChannelInboundHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoServerHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œè¿”å›ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">channelRead0</span><span class="params">(ChannelHandlerContext ctx, String msg)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æœåŠ¡ç«¯æ¥å—çš„æ¶ˆæ¯ : "</span> + msg);  <span class="comment">// æ”¶åˆ°æ¶ˆæ¯ç›´æ¥æ‰“å°è¾“å‡º</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"quit"</span>.equals(msg))&#123;  <span class="comment">//æœåŠ¡ç«¯æ–­å¼€çš„æ¡ä»¶</span></span><br><span class="line">            ctx.close();</span><br><span class="line">        &#125;</span><br><span class="line">        ctx.writeAndFlush(<span class="string">"hi! "</span>+msg+<span class="string">"\n"</span>);  <span class="comment">// è¿”å›å®¢æˆ·ç«¯æ¶ˆæ¯</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * å»ºç«‹è¿æ¥æ—¶ï¼Œè¿”å›æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelActive</span><span class="params">(ChannelHandlerContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¿æ¥çš„å®¢æˆ·ç«¯åœ°å€:"</span> + ctx.channel().remoteAddress());</span><br><span class="line">        ctx.writeAndFlush(<span class="string">"å®¢æˆ·ç«¯"</span>+ InetAddress.getLocalHost().getHostName() + <span class="string">"æˆåŠŸä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥ï¼ \n"</span>);</span><br><span class="line">        <span class="keyword">super</span>.channelActive(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯ä»£ç "><a href="#å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="å®¢æˆ·ç«¯ä»£ç "></a>å®¢æˆ·ç«¯ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.netty.bootstrap.Bootstrap;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.*;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.SocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.nio.NioSocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.DelimiterBasedFrameDecoder;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.Delimiters;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.string.StringDecoder;</span><br><span class="line"><span class="keyword">import</span> io.netty.handler.codec.string.StringEncoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoClient</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String host;  <span class="comment">//ipåœ°å€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> port;     <span class="comment">//ç«¯å£</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EchoClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EchoClient</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">"localhost"</span>, port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EchoClient</span><span class="params">(String host, <span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.host = host;</span><br><span class="line">         <span class="keyword">this</span>.port = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        EventLoopGroup group = <span class="keyword">new</span> NioEventLoopGroup();  <span class="comment">//1.åˆ›å»º EventLoopGroup</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * Nettyåˆ›å»ºå…¨éƒ¨éƒ½æ˜¯å®ç°è‡ªAbstractBootstrapã€‚</span></span><br><span class="line"><span class="comment">             * å®¢æˆ·ç«¯çš„æ˜¯Bootstrapï¼ŒæœåŠ¡ç«¯çš„åˆ™æ˜¯    ServerBootstrapã€‚</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">            Bootstrap bs = <span class="keyword">new</span> Bootstrap();  <span class="comment">//2.åˆ›å»º Bootstrap</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"å®¢æˆ·ç«¯æˆåŠŸå¯åŠ¨..."</span>);</span><br><span class="line"></span><br><span class="line">            bs.group(group)  <span class="comment">//3.æŒ‡å®š NioEventLoopGroup æ¥å¤„ç†å®¢æˆ·ç«¯äº‹ä»¶ã€‚</span></span><br><span class="line">                    .channel(NioSocketChannel.class)</span><br><span class="line">                    .handler(<span class="keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() &#123;  <span class="comment">//4.æŒ‡å®šä½¿ç”¨ NIO çš„ä¼ è¾“ Channel</span></span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                            ChannelPipeline ph = ch.pipeline();</span><br><span class="line">                            ph.addLast(<span class="string">"framer"</span>, <span class="keyword">new</span> DelimiterBasedFrameDecoder(<span class="number">8192</span>, Delimiters.lineDelimiter()))</span><br><span class="line">                                    .addLast(<span class="string">"decoder"</span>, <span class="keyword">new</span> StringDecoder())</span><br><span class="line">                                    .addLast(<span class="string">"encoder"</span>, <span class="keyword">new</span> StringEncoder())  <span class="comment">// è§£ç å’Œç¼–ç ï¼Œåº”å’ŒæœåŠ¡ç«¯ä¸€è‡´</span></span><br><span class="line">                                    .addLast(<span class="string">"handler"</span>, <span class="keyword">new</span> EchoClientHandler());  <span class="comment">//5.å½“å»ºç«‹ä¸€ä¸ªè¿æ¥å’Œä¸€ä¸ªæ–°çš„é€šé“æ—¶ï¼Œåˆ›å»ºæ·»åŠ åˆ° EchoClientHandler å®ä¾‹ åˆ° channel pipeline</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">            Channel ch = bs.connect(<span class="keyword">this</span>.host, <span class="keyword">this</span>.port).sync().channel();  <span class="comment">//6.è®¾ç½®æœåŠ¡å™¨çš„ipå’Œç«¯å£ï¼Œå¹¶ä¸”è¿æ¥åˆ°è¿œç¨‹; ç­‰å¾…è¿æ¥å®Œæˆ</span></span><br><span class="line"></span><br><span class="line">            Scanner in=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"è¯·è¾“å…¥è¦å‘é€çš„ä¿¡æ¯ï¼š"</span>);</span><br><span class="line">                String str=in.next();</span><br><span class="line">                <span class="comment">//è¿æ¥åå‘é€æ•°æ®</span></span><br><span class="line">                ch.writeAndFlush(str+ <span class="string">"\r\n"</span>);</span><br><span class="line">                System.out.println(<span class="string">"å®¢æˆ·ç«¯å‘é€æ•°æ®:"</span>+str);</span><br><span class="line">                <span class="keyword">if</span> (str.equals(<span class="string">"quit"</span>))<span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            group.shutdownGracefully();  <span class="comment">//8.å…³é—­çº¿ç¨‹æ± å’Œé‡Šæ”¾æ‰€æœ‰èµ„æº</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">new</span> EchoClient(<span class="string">"127.0.0.1"</span>, <span class="number">65535</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»£ç æ ·å¼åŸºæœ¬ä¸€è‡´ï¼Œæœ‰å‡ ä¸ªå…³é”®ç‚¹éƒ½å·²æ³¨é‡Š<br><img src="http://blog.duohuo.org/wp-content/uploads/2019/01/cefccb1c91e7593d6278109de2c6a89f.png" alt><br>æ­¤å¤„ä»¥ä¸æ–­å‘å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ï¼Œè¾“å…¥â€œquitâ€ç»ˆæ­¢è¿æ¥ã€‚</p><h3 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h3><p>å…ˆè¿è¡ŒæœåŠ¡ç«¯å†è¿è¡Œå®¢æˆ·ç«¯<br>æœåŠ¡ç«¯ï¼š<br><img src="http://blog.duohuo.org/wp-content/uploads/2019/01/781c5efd2db39cccd9f49ba70af253bc.png" alt><br>å®¢æˆ·ç«¯1:<br><img src="http://blog.duohuo.org/wp-content/uploads/2019/01/6288b3985b7af37895fcf2f1b63be69a.png" alt><br>å®¢æˆ·ç«¯2ï¼š<br><img src="http://blog.duohuo.org/wp-content/uploads/2019/01/3db8b4f3bc3dd1ce8d37dcc875dfc5c9.png" alt></p><h3 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h3><p><a href="https://www.cnblogs.com/liuming1992/p/4758532.html" target="_blank" rel="noopener">https://www.cnblogs.com/liuming1992/p/4758532.html</a><br><a href="https://blog.csdn.net/qazwsxpcm/article/details/77750865" target="_blank" rel="noopener">https://blog.csdn.net/qazwsxpcm/article/details/77750865</a><br><a href="https://www.jianshu.com/p/b9f3f6a16911" target="_blank" rel="noopener">https://www.jianshu.com/p/b9f3f6a16911</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†™åœ¨å‰é¢ï¼š&lt;br&gt;Nettyæ˜¯Javaçš„ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œæ—¢ç„¶æ˜¯æ¡†æ¶çš„å­¦ä¹ ï¼Œä¸å…ä¼šç¢°åˆ°å¾ˆå¤šåˆ†æ”¯çš„çŸ¥è¯†å’Œä¸ç†Ÿæ‚‰çš„åè¯ã€‚è¿™å°±éœ€è¦ä¸æ–­çš„åšâ€œä¸‹æ½œâ€ï¼Œè€å¿ƒæœç´¢ï¼Œä¸æ±‚ç”šè§£ï¼Œç­‰åˆ°å¤§è‡´ç†Ÿæ‚‰ä¹‹åå†å»é€ä¸€æ·±ç©¶ã€‚å› æ­¤æœ‰äº›æ¦‚å¿µä½œè€…ä¹Ÿä¸èƒ½åšå‡ºè¯¦ç»†è§£é‡Šï¼Œè¯·å‚è€ƒè´´å‡ºçš„ç›¸å…³æ–‡ç« æˆ–è‡ªè¡Œæœç´¢ä»¥è§£å†³ç–‘æƒ‘ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Netty" scheme="http://yoursite.com/tags/Netty/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä½¿ç”¨slf4j+logbacké…åˆAOPåšæ—¥å¿—è®°å½•</title>
    <link href="http://yoursite.com/2019/04/28/SpringBoot_logger_AOP/"/>
    <id>http://yoursite.com/2019/04/28/SpringBoot_logger_AOP/</id>
    <published>2019-04-28T11:42:06.303Z</published>
    <updated>2019-04-29T11:02:59.046Z</updated>
    
    <content type="html"><![CDATA[<p>éœ€è¦å¤§è‡´äº†è§£ï¼šjavaæ—¥å¿—åŸºç¡€ï¼Œå¦‚æ ¸å¿ƒç»„ä»¶Loggers,Appenders,Layoutsçš„ç”¨å¤„ã€SpringAOPæ¦‚å¿µ</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—"></a>ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—</h3><p>å½“åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å„ç§é”™è¯¯ã€‚è¿™æ—¶åº”ç”¨ç¨‹åºå°†é”™è¯¯ä¿¡æ¯ç”Ÿæˆæ—¥å¿—ï¼Œå°±æ–¹ä¾¿äº†å¼€å‘äººå‘˜å¿«é€Ÿå®šä½é”™è¯¯å’Œæ ¹æºï¼Œä»è€Œè¿›è¡Œæœ‰é’ˆå¯¹çš„ç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œåœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œæ—¥å¿—è®°å½•æ˜¯å¿…ä¸å¯å°‘çš„ã€‚<br><a id="more"></a></p><h3 id="é€‰æ‹©æ—¥å¿—æ¡†æ¶"><a href="#é€‰æ‹©æ—¥å¿—æ¡†æ¶" class="headerlink" title="é€‰æ‹©æ—¥å¿—æ¡†æ¶"></a>é€‰æ‹©æ—¥å¿—æ¡†æ¶</h3><p>ç›®å‰å¸‚é¢ä¸Šå¯ä¾›é€‰æ‹©çš„æ—¥å¿—æ¡†æ¶éå¸¸å¤šï¼Œå¦‚JCLã€SLF4Jã€Jboss-loggingã€jULã€log4jã€log4j2ã€logbackç­‰ï¼Œé¦–å…ˆè¦åˆ†æ¸…æ¥š [æ—¥å¿—æŠ½è±¡å±‚] å’Œ [æ—¥å¿—å®ç°]ã€‚   è¿™ä¸¤è€…çš„å…³ç³»å¯ä»¥å‚è€ƒè®¾è®¡æ¨¡å¼ä¸­çš„â€œé—¨é¢æ¨¡å¼â€ã€‚  æˆ‘ä»¬åœ¨å¼€å‘ä¸­è°ƒç”¨æ—¥å¿—è®°å½•æ–¹æ³•æ—¶ï¼Œä¸åº”ç›´æ¥è°ƒç”¨æ—¥å¿—å®ç°ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒç”¨æ—¥å¿—æŠ½è±¡å±‚çš„æ–¹æ³•ã€‚è¿™æ ·æ–¹ä¾¿è§£è€¦ï¼Œä»¥åæƒ³æ›´æ¢åˆ«çš„æ—¥å¿—å®ç°æ—¶ï¼Œå¯ä»¥ç›´æ¥æ”¹åŠ¨é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ï¼Œ<strong>è€Œä¸ç”¨ä¿®æ”¹ä¸€è¡Œä»£ç </strong>ã€‚ é‚£ä¹ˆå¦‚ä½•é€‰æ‹©æ—¥å¿—æ¡†æ¶å‘¢ï¼Ÿ</p><ul><li>æ—¥å¿—æŠ½è±¡å±‚ï¼šJCLï¼ˆJakarta Commons Logging), SLF4jï¼ˆSimple Logging Facade for Javaï¼‰, jboss-logging</li><li>æ—¥å¿—å®ç°ï¼šLog4j, JULï¼ˆjava.util.loggingï¼‰, Log4j2,  Logback</li></ul><p>å…³äºå¦‚ä½•é€‰æ‹©ç½‘ç»œä¸Šæœ‰å¾ˆå¤šæ–‡ç« åˆ†æï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚ç»“è®ºå°±æ˜¯SLF4Jæ›´å—å¼€å‘è€…é’çï¼Œäº‹å®ä¸Šã€Šé˜¿é‡Œjavaå¼€å‘æ‰‹å†Œã€‹ä¸Šä¹Ÿè§„å®šï¼š<em>åº”ç”¨ä¸­ä¸å¯ç›´æ¥ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿï¼ˆLog4jã€Logbackï¼‰ä¸­çš„APIï¼Œè€Œåº”ä¾èµ–ä½¿ç”¨æ—¥å¿—æ¡†æ¶<br>SLF4Jä¸­çš„APIï¼Œä½¿ç”¨é—¨é¢æ¨¡å¼çš„æ—¥å¿—æ¡†æ¶ï¼Œæœ‰åˆ©äºç»´æŠ¤å’Œå„ä¸ªç±»çš„æ—¥å¿—å¤„ç†æ–¹å¼ç»Ÿä¸€ã€‚</em><br>è‡³äºé€‰æ‹©æ—¥å¿—å®ç°ï¼Œlog4jæ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œä½†å…¶ä½œè€…åˆå†™äº†log4jçš„å‡çº§ç‰ˆlogbackï¼Œç›¸æ¯”log4jæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚æœ‰è¯¸å¤šç†ç”±è®©æˆ‘ä»¬é€‰æ‹©logbackï¼Œä½¿ç”¨å¥½logbackå…³é”®çš„ä¸€ç‚¹å°±æ˜¯é…ç½®å¥½logback.xmlæ–‡ä»¶ï¼Œå¯å‚é˜…<a href="https://www.cnblogs.com/warking/p/5710303.html" title="logbackä½¿ç”¨å’Œé…ç½®è¯¦è§£" target="_blank" rel="noopener">logbackä½¿ç”¨å’Œé…ç½®è¯¦è§£</a></p><h4 id="mavenå¼•å…¥"><a href="#mavenå¼•å…¥" class="headerlink" title="mavenå¼•å…¥"></a>mavenå¼•å…¥</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>SpringBootå·²é»˜è®¤ä½¿ç”¨slf4jå’Œlogback  æ— éœ€å¼•å…¥å¯¹åº”ä¾èµ–ã€‚</strong></p><h3 id="å¦‚ä½•æ’å…¥æ—¥å¿—è®°å½•"><a href="#å¦‚ä½•æ’å…¥æ—¥å¿—è®°å½•" class="headerlink" title="å¦‚ä½•æ’å…¥æ—¥å¿—è®°å½•"></a>å¦‚ä½•æ’å…¥æ—¥å¿—è®°å½•</h3><p>ä½¿ç”¨SpringAOPï¼Œç›®çš„æ˜¯è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œæ— éœ€å…³å¿ƒåœ¨å“ªé‡Œæ’å…¥æ—¥å¿—ï¼Œå¹¶ä¸”å¯ä»¥é™ä½æ—¥å¿—è®°å½•æ“ä½œå¯¹ä¸šåŠ¡ä»£ç çš„ä¾µå…¥æ€§ã€‚<br>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ AspectJ çš„å‡ ä¸ªæ³¨è§£æ¥å†™ä¸€ä¸ªåˆ‡é¢ç±»TestAspect.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.example.demo.annotation.RequestColor;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"testAspect"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAspect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(TestAspect.class); </span><br><span class="line">    <span class="comment">//controlleråŒ…åˆ‡ç‚¹</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.example.demo.controller.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">controllerPointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//TestControlleråˆ‡ç‚¹</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.example.demo.controller.TestController.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testControllerPointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…·ä½“æ–¹æ³• ayahiro åˆ‡ç‚¹</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.example.demo.controller.TestController.ayahiro()))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ayahiroPointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(value = <span class="string">"testControllerPointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"form: TestAspect----&gt;&gt;"</span>);</span><br><span class="line">        String className=joinPoint.getSignature().getDeclaringTypeName();</span><br><span class="line">        String methodName=joinPoint.getSignature().getName();</span><br><span class="line">        System.out.println(<span class="string">"doBeforeæ‹¦æˆªäº†"</span>+className+<span class="string">"."</span>+methodName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(value = <span class="string">"@annotation(requestColor)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfter</span><span class="params">(JoinPoint joinPoint, <span class="keyword">final</span> RequestColor requestColor)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"form: TestAspect----&gt;&gt;"</span>);</span><br><span class="line">        String className=joinPoint.getSignature().getDeclaringTypeName();</span><br><span class="line">        String methodName=joinPoint.getSignature().getName();</span><br><span class="line">        System.out.println(<span class="string">"doAfteræ‹¦æˆªäº†"</span>+className+<span class="string">"."</span>+methodName);</span><br><span class="line">        System.out.println(<span class="string">"requestType: "</span>+ requestColor.type());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around</span>(value = <span class="string">"ayahiroPointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">doAround</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        Object re=joinPoint.proceed();  <span class="comment">//æ‰§è¡Œäº†ayahiroæ–¹æ³•  è¿”å›äº†String</span></span><br><span class="line">        System.out.println(re);</span><br><span class="line">        System.out.println(<span class="string">"form: TestAspect----&gt;&gt;"</span>);</span><br><span class="line">        String className=joinPoint.getSignature().getDeclaringTypeName();</span><br><span class="line">        String methodName=joinPoint.getSignature().getName();</span><br><span class="line">        System.out.println(<span class="string">"doAroundæ‹¦æˆªäº†"</span>+className+<span class="string">"."</span>+methodName);</span><br><span class="line">        <span class="keyword">return</span> re;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning</span>(value = <span class="string">"testControllerPointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterReturning</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"form: TestAspect----&gt;&gt;"</span>);</span><br><span class="line">        String className=joinPoint.getSignature().getDeclaringTypeName();</span><br><span class="line">        String methodName=joinPoint.getSignature().getName();</span><br><span class="line">        System.out.println(<span class="string">"doAfterReturningæ‹¦æˆªäº†"</span>+className+<span class="string">"."</span>+methodName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(value = <span class="string">"testControllerPointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterThrowing</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"form: TestAspect----&gt;&gt;"</span>);</span><br><span class="line">        String className=joinPoint.getSignature().getDeclaringTypeName();</span><br><span class="line">        String methodName=joinPoint.getSignature().getName();</span><br><span class="line">        System.out.println(<span class="string">"doAfterThrowingæ‹¦æˆªäº†"</span>+className+<span class="string">"."</span>+methodName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»¥åŠControllerï¼Œæœ‰ä¸¤ä¸ªè¿”å›å­—ç¬¦ä¸²çš„æµ‹è¯•æ–¹æ³•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.example.demo.annotation.RequestColor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestColor</span>(type = RequestColor.Type.YELLOW)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(path = &#123;<span class="string">"/ayahiro"</span>&#125;,method = &#123;RequestMethod.GET&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">ayahiro</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//int num=2/0;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"this ayahiro"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(path = &#123;<span class="string">"/moonKa"</span>&#125;,method = &#123;RequestMethod.GET&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">moonKa</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"this moonKa"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£"><a href="#ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£" class="headerlink" title="ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£"></a>ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£</h3><ul><li>@Aspect è¡¨æ˜è¿™ä¸ªç±»æ˜¯â€œåˆ‡é¢ç±»â€ï¼Œåˆ‡é¢ç±»å°±æ˜¯ç”¨æ¥å®šä¹‰åˆ‡ç‚¹å’Œåˆ‡ç‚¹å¤„è¦å¢å¼ºåŠŸèƒ½çš„æ–¹æ³•</li><li>@Pointcut è¿™ä¸ªæ³¨è§£åŒ…å«ä¸¤éƒ¨åˆ†ï¼ŒPointCutè¡¨è¾¾å¼å’ŒPointCutç­¾åã€‚è¡¨è¾¾å¼æ˜¯ç”¨æ¥ç¡®å®šåˆ‡å…¥ç‚¹çš„ä½ç½®çš„ï¼Œè¯´ç™½äº†å°±æ˜¯é€šè¿‡ä¸€äº›è§„åˆ™æ¥ç¡®å®šï¼Œå“ªäº›æ–¹æ³•æ˜¯è¦å¢å¼ºçš„ï¼Œä¹Ÿå°±æ˜¯è¦æ‹¦æˆªå“ªäº›æ–¹æ³•ã€‚æ³¨è§£æ‹¬å·é‡Œçš„éƒ¨åˆ†å°±æ˜¯æè¿°åˆ‡ç‚¹çš„ä½ç½®ï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•æ¥ç¡®å®šï¼Œä»£ç ä¸­ä½¿ç”¨çš„executionè¡¨è¾¾å¼æ˜¯å…¶ä¸­çš„ä¸€ç§ï¼Œå…¶è¯­æ³•å’Œå…¶ä»–æè¿°æ–¹æ³•å¯è‡ªè¡Œç™¾åº¦ã€‚ ç­¾åå°±æ˜¯è¢«æ³¨è§£çš„æ–¹æ³•åï¼Œç­¾åæ²¡æœ‰å®é™…ç”¨å¤„ï¼Œåªæ˜¯ç”¨æ¥æ ‡è®°ä¸€ä¸ªPointcutï¼Œå¯ä»¥ç†è§£æˆè¿™ä¸ªåˆ‡å…¥ç‚¹çš„ä¸€ä¸ªè®°å·ã€‚</li><li>@Before é¡¾åæ€ä¹‰ï¼Œå³åœ¨åˆ‡å…¥ç‚¹å¤„æ–¹æ³•æ‰§è¡Œå‰ï¼Œæ‰§è¡Œæ­¤æ–¹æ³•ã€‚åŒä¸‹é¢çš„@Afterï¼Œ@Aroundï¼Œ@AfterReturningï¼Œ @AfterThrowingæ³¨è§£ç±»ä¼¼ï¼Œéƒ½æ˜¯è§„å®šäº†åœ¨ä½•æ—¶(ç›¸å¯¹äºå¾…å¢å¼ºæ–¹æ³•)æ‰§è¡Œè¢«æ³¨è§£çš„æ–¹æ³•ã€‚åªä¸è¿‡æ³¨è§£å±æ€§æœ‰æ‰€åŒºåˆ«</li><li>JoinPoint ä»£è¡¨ç€ç»‡å…¥å¢å¼ºå¤„ç†çš„è¿æ¥ç‚¹ã€‚æ³¨æ„ä¸€ç‚¹ï¼šé™¤äº†æ³¨è§£@Aroundçš„æ–¹æ³•å¤–ï¼Œå…¶ä»–éƒ½å¯ä»¥åŠ è¿™ä¸ªJoinPointä½œå‚æ•°ï¼Œ@Aroundæ³¨è§£çš„æ–¹æ³•çš„å‚æ•°ä¸€å®šè¦æ˜¯ProceedingJoinPointã€‚ JoinPointåŒ…å«äº†å‡ ä¸ªå¾ˆæœ‰ç”¨çš„å‚æ•°ï¼š<ul><li>Object[] getArgsï¼šè¿”å›ç›®æ ‡æ–¹æ³•çš„å‚æ•°</li><li>Signature getSignatureï¼šè¿”å›ç›®æ ‡æ–¹æ³•çš„ç­¾å</li><li>Object getTargetï¼šè¿”å›è¢«ç»‡å…¥å¢å¼ºå¤„ç†çš„ç›®æ ‡å¯¹è±¡</li><li>Object getThisï¼šè¿”å›AOPæ¡†æ¶ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆçš„ä»£ç†å¯¹è±¡</li></ul></li></ul><h3 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h3><p>ç†è§£äº†å‡ ä¸ªæ³¨è§£çš„ä½œç”¨åï¼Œé€šè¿‡è¿è¡Œç»“æœï¼Œæ¥çœ‹çœ‹æµ‹è¯•æ–¹æ³•éƒ½è¢«å“ªäº›å¢å¼ºæ–¹æ³•æ‹¦æˆªäº†<br>å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨è¾“å…¥<a href="http://localhost:8080/ayahiro" target="_blank" rel="noopener">http://localhost:8080/ayahiro</a><br><img src="http://blog.duohuo.org/wp-content/uploads/2019/03/æ•è·-300x107.png" alt><br>å¯ä»¥çœ‹åˆ°ï¼Œayahiro()è¢«æ‰€æœ‰å¢å¼ºæ–¹æ³•æ‹¦æˆªäº†ã€‚testControllerPointCut()å’ŒayahiroPointCut()æ‹¦æˆªä¸éš¾ç†è§£ï¼Œéƒ½å‰è€…æ˜¯åˆ’å®šäº†ä¸€ä¸ªèŒƒå›´ï¼Œåè€…æ˜¯ç›´æ¥å…·ä½“å®šä½åˆ°è¯¥æ–¹æ³•ã€‚å…¶ä¸­@After(value = â€œ@annotation(requestColor)â€) çš„æ‹¦æˆªæ–¹å¼æ¯”è¾ƒç‰¹åˆ«ï¼Œæ˜¯é€šè¿‡è‡ªå®šä¹‰æ³¨è§£æ‹¦æˆªçš„ï¼Œå› ä¸ºayahiro()è¢«@RequestColorä¿®é¥°ï¼Œè€Œ@Afteræ‹¦æˆªæ‰€æœ‰è¢«@RequestColorä¿®é¥°çš„æ–¹æ³•ã€‚<br>è¾“å…¥<a href="http://localhost:8080/moonKa" target="_blank" rel="noopener">http://localhost:8080/moonKa</a><br><img src="http://blog.duohuo.org/wp-content/uploads/2019/03/æ•è·2-300x49.png" alt><br>å¯ä»¥çœ‹åˆ°@Afterå°±æ²¡æœ‰æ‹¦æˆªmoonKaæ–¹æ³•ï¼Œå› ä¸ºè¯¥æ–¹æ³•æ²¡æœ‰è¢«@RequestColorä¿®é¥°ã€‚</p><h3 id="ä½¿ç”¨æ—¥å¿—ï¼"><a href="#ä½¿ç”¨æ—¥å¿—ï¼" class="headerlink" title="ä½¿ç”¨æ—¥å¿—ï¼"></a>ä½¿ç”¨æ—¥å¿—ï¼</h3><p>ç†è§£äº†AOPçš„æ€æƒ³ä¹‹åï¼Œå†ç»“åˆslf4jè®°å½•æ—¥å¿—å°±æ˜¾å¾—éå¸¸ç®€å•ï¼Œè°ƒç”¨æ—¥å¿—æ–¹æ³•åªéœ€è¦å£°æ˜ä¸€ä¸ª private static final Logger logger = LoggerFactory.getLogger(å½“å‰ç±».class);  å†ç”¨logerå»è°ƒç”¨å…·ä½“çš„æ–¹æ³•ï¼š.info()  .warn()  .debug() .error()å³å¯~</p><p>å‚è€ƒèµ„æ–™ï¼š<br>    <a href="https://www.cnblogs.com/wangshen31/p/9379197.html" target="_blank" rel="noopener">https://www.cnblogs.com/wangshen31/p/9379197.html</a><br>    <a href="https://blog.csdn.net/caychen/article/details/80112915" target="_blank" rel="noopener">https://blog.csdn.net/caychen/article/details/80112915</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éœ€è¦å¤§è‡´äº†è§£ï¼šjavaæ—¥å¿—åŸºç¡€ï¼Œå¦‚æ ¸å¿ƒç»„ä»¶Loggers,Appenders,Layoutsçš„ç”¨å¤„ã€SpringAOPæ¦‚å¿µ&lt;/p&gt;
&lt;h3 id=&quot;ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—&lt;/h3&gt;&lt;p&gt;å½“åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å„ç§é”™è¯¯ã€‚è¿™æ—¶åº”ç”¨ç¨‹åºå°†é”™è¯¯ä¿¡æ¯ç”Ÿæˆæ—¥å¿—ï¼Œå°±æ–¹ä¾¿äº†å¼€å‘äººå‘˜å¿«é€Ÿå®šä½é”™è¯¯å’Œæ ¹æºï¼Œä»è€Œè¿›è¡Œæœ‰é’ˆå¯¹çš„ç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œåœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œæ—¥å¿—è®°å½•æ˜¯å¿…ä¸å¯å°‘çš„ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/04/25/hello-world/"/>
    <id>http://yoursite.com/2019/04/25/hello-world/</id>
    <published>2019-04-25T12:16:47.537Z</published>
    <updated>2019-04-29T11:03:14.446Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2019/04/25/hello-world/æ¡Œé¢.jpg" alt="æµ‹è¯•å›¾ç‰‡åŠŸèƒ½"><br>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.<br><a id="more"></a></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2019/04/25/hello-world/æ¡Œé¢.jpg&quot; alt=&quot;æµ‹è¯•å›¾ç‰‡åŠŸèƒ½&quot;&gt;&lt;br&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
